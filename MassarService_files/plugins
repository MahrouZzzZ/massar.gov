function _init(){"use strict";$.AdminLTE.layout={activate:function(){var n=this;n.fix();n.fixSidebar();$(window,".wrapper").resize(function(){n.fix();n.fixSidebar()})},fix:function(){var u=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),n=$(window).height(),i=$(".sidebar").height(),r,t;$("body").hasClass("fixed")?$(".content-wrapper, .right-side").css("min-height",n-$(".main-footer").outerHeight()):(n>=i?($(".content-wrapper, .right-side").css("min-height",n-u),r=n-u):($(".content-wrapper, .right-side").css("min-height",i),r=i),t=$($.AdminLTE.options.controlSidebarOptions.selector),"undefined"!=typeof t&&t.height()>r&&$(".content-wrapper, .right-side").css("min-height",t.height()))},fixSidebar:function(){return $("body").hasClass("fixed")?("undefined"==typeof $.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),void($.AdminLTE.options.sidebarSlimScroll&&"undefined"!=typeof $.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void("undefined"!=typeof $.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"))}};$.AdminLTE.pushMenu={activate:function(n){var t=$.AdminLTE.options.screenSizes;$(n).on("click",function(n){n.preventDefault();$(window).width()>t.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")});$(".content-wrapper").click(function(){$(window).width()<=t.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")});($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var n=this,t=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>t&&n.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>t&&n.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}};$.AdminLTE.tree=function(n){var i=this,t=$.AdminLTE.options.animationSpeed;$(document).on("click",n+" li a",function(n){var u=$(this),r=u.next(),f,e,o;r.is(".treeview-menu")&&r.is(":visible")?(r.slideUp(t,function(){r.removeClass("menu-open")}),r.parent("li").removeClass("active")):r.is(".treeview-menu")&&!r.is(":visible")&&(f=u.parents("ul").first(),e=f.find("ul:visible").slideUp(t),e.removeClass("menu-open"),o=u.parent("li"),r.slideDown(t,function(){r.addClass("menu-open");f.find("li.active").removeClass("active");o.addClass("active");i.layout.fix()}));r.is(".treeview-menu")&&n.preventDefault()})};$.AdminLTE.controlSidebar={activate:function(){var t=this,i=$.AdminLTE.options.controlSidebarOptions,n=$(i.selector),u=$(i.toggleBtnSelector),r;u.on("click",function(r){r.preventDefault();n.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?t.close(n,i.slide):t.open(n,i.slide)});r=$(".control-sidebar-bg");t._fix(r);$("body").hasClass("fixed")?t._fixForFixed(n):$(".content-wrapper, .right-side").height()<n.height()&&t._fixForContent(n)},open:function(n,t){t?n.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(n,t){t?n.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(n){var t=this;$("body").hasClass("layout-boxed")?(n.css("position","absolute"),n.height($(".wrapper").height()),$(window).resize(function(){t._fix(n)})):n.css({position:"fixed",height:"auto"})},_fixForFixed:function(n){n.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(n){$(".content-wrapper, .right-side").css("min-height",n.height())}};$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(n){var t=this;n||(n=document);$(n).on("click",t.selectors.collapse,function(n){n.preventDefault();t.collapse($(this))});$(n).on("click",t.selectors.remove,function(n){n.preventDefault();t.remove($(this))})},collapse:function(n){var t=this,i=n.parents(".box").first(),r=i.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");i.hasClass("collapsed-box")?(n.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),r.slideDown(t.animationSpeed,function(){i.removeClass("collapsed-box")})):(n.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),r.slideUp(t.animationSpeed,function(){i.addClass("collapsed-box")}))},remove:function(n){var t=n.parents(".box").first();t.slideUp(this.animationSpeed)}}}function checkAllCheckBoxes(n,t,i){$('div[data-gridname="'+t+'"] .grid-table #'+i).click(function(){var t=n.rows().nodes();$('input[type="checkbox"]:not(:disabled)',t).prop("checked",$(this).is(":checked"))})}function openPopup(n,t,i){var r={id:n,draggable:!1,fading:!1,popupUrl:i,popupSize:t};return $.createPopup(r),!1}var wysihtml5,Base,Handlebars;if(function(n,t,i,r){"use strict";var u=function(t,i){this.widget="";this.$element=n(t);this.defaultTime=i.defaultTime;this.disableFocus=i.disableFocus;this.isOpen=i.isOpen;this.minuteStep=i.minuteStep;this.modalBackdrop=i.modalBackdrop;this.secondStep=i.secondStep;this.showInputs=i.showInputs;this.showMeridian=i.showMeridian;this.showSeconds=i.showSeconds;this.template=i.template;this.appendWidgetTo=i.appendWidgetTo;this.upArrowStyle=i.upArrowStyle;this.downArrowStyle=i.downArrowStyle;this.containerClass=i.containerClass;this._init()};u.prototype={constructor:u,_init:function(){var t=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){if(this.$element.parent(".input-append, .input-prepend").find(".add-on").length)this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":n.proxy(this.showWidget,this)});else this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":n.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":n.proxy(this.highlightUnit,this),"click.timepicker":n.proxy(this.highlightUnit,this),"keydown.timepicker":n.proxy(this.elementKeydown,this),"blur.timepicker":n.proxy(this.blurElement,this)})}else if(this.template)this.$element.on({"focus.timepicker":n.proxy(this.showWidget,this),"click.timepicker":n.proxy(this.showWidget,this),"blur.timepicker":n.proxy(this.blurElement,this)});else this.$element.on({"focus.timepicker":n.proxy(this.highlightUnit,this),"click.timepicker":n.proxy(this.highlightUnit,this),"keydown.timepicker":n.proxy(this.elementKeydown,this),"blur.timepicker":n.proxy(this.blurElement,this)});this.$widget=this.template!==!1?n(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",n.proxy(this.widgetClick,this)):!1;this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){n(this).on({"click.timepicker":function(){n(this).select()},"keydown.timepicker":n.proxy(t.widgetKeydown,t)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=r;this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(this.hour===1)this.hour=12;else{if(this.hour===12)return this.hour--,this.toggleMeridian();if(this.hour===0)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour===0?this.hour=23:this.hour--;this.update()},decrementMinute:function(n){var t;t=n?this.minute-n:this.minute-this.minuteStep;t<0?(this.decrementHour(),this.minute=t+60):this.minute=t;this.update()},decrementSecond:function(){var n=this.second-this.secondStep;n<0?(this.decrementMinute(!0),this.second=n+60):this.second=n;this.update()},elementKeydown:function(n){switch(n.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case"hour":n.preventDefault();this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(n.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(n.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:n.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();break;case 38:n.preventDefault();switch(this.highlightedUnit){case"hour":this.incrementHour();this.highlightHour();break;case"minute":this.incrementMinute();this.highlightMinute();break;case"second":this.incrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian()}break;case 39:n.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:n.preventDefault();switch(this.highlightedUnit){case"hour":this.decrementHour();this.highlightHour();break;case"minute":this.decrementMinute();this.highlightMinute();break;case"second":this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian()}}},formatTime:function(n,t,i,r){return n=n<10?"0"+n:n,t=t<10?"0"+t:t,i=i<10?"0"+i:i,n+":"+t+(this.showSeconds?":"+i:"")+(this.showMeridian?" "+r:"")},getCursorPosition:function(){var n=this.$element.get(0),t,r;return"selectionStart"in n?n.selectionStart:i.selection?(n.focus(),t=i.selection.createRange(),r=i.selection.createRange().text.length,t.moveStart("character",-n.value.length),t.text.length-r):void 0},getTemplate:function(){var n,t,i,r,u,f;this.showInputs?(t='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',i='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',r='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',u='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"><\/span>',i='<span class="bootstrap-timepicker-minute"><\/span>',r='<span class="bootstrap-timepicker-second"><\/span>',u='<span class="bootstrap-timepicker-meridian"><\/span>');f='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"><\/i><\/a><\/td><td class="separator">&nbsp;<\/td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"><\/i><\/a><\/td>'+(this.showSeconds?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="incrementSecond"><i class="'+this.upArrowStyle+'"><\/i><\/a><\/td>':"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"><\/i><\/a><\/td>':"")+"<\/tr><tr><td>"+t+'<\/td> <td class="separator">:<\/td><td>'+i+"<\/td> "+(this.showSeconds?'<td class="separator">:<\/td><td>'+r+"<\/td>":"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td>'+u+"<\/td>":"")+'<\/tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+'"><\/i><\/a><\/td><td class="separator"><\/td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"><\/i><\/a><\/td>'+(this.showSeconds?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"><\/i><\/a><\/td>':"")+(this.showMeridian?'<td class="separator">&nbsp;<\/td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"><\/i><\/a><\/td>':"")+"<\/tr><\/table>";switch(this.template){case"modal":n='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">Ã—<\/a><h3>Pick a Time<\/h3><\/div><div class="modal-content">'+f+'<\/div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK<\/a><\/div><\/div>';break;case"dropdown":n='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"<\/div>"}return n},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){this.isOpen!==!1&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.template==="modal"&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),n(i).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition();this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var n=this.$element.get(0);this.highlightedUnit="hour";n.setSelectionRange&&setTimeout(function(){n.setSelectionRange(0,2)},0)},highlightMinute:function(){var n=this.$element.get(0);this.highlightedUnit="minute";n.setSelectionRange&&setTimeout(function(){n.setSelectionRange(3,5)},0)},highlightSecond:function(){var n=this.$element.get(0);this.highlightedUnit="second";n.setSelectionRange&&setTimeout(function(){n.setSelectionRange(6,8)},0)},highlightMeridian:function(){var n=this.$element.get(0);this.highlightedUnit="meridian";n.setSelectionRange&&(this.showSeconds?setTimeout(function(){n.setSelectionRange(9,11)},0):setTimeout(function(){n.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(this.hour===11)return this.hour++,this.toggleMeridian();this.hour===12&&(this.hour=0)}if(this.hour===23){this.hour=0;return}this.hour++;this.update()},incrementMinute:function(n){var t;t=n?this.minute+n:this.minute+this.minuteStep-this.minute%this.minuteStep;t>59?(this.incrementHour(),this.minute=t-60):this.minute=t;this.update()},incrementSecond:function(){var n=this.second+this.secondStep-this.second%this.secondStep;n>59?(this.incrementMinute(!0),this.second=n-60):this.second=n;this.update()},remove:function(){n("document").off(".timepicker");this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(n){if(this.$element.val())this.updateFromElementVal();else if(n==="current"){var i=new Date,t=i.getHours(),u=Math.floor(i.getMinutes()/this.minuteStep)*this.minuteStep,f=Math.floor(i.getSeconds()/this.secondStep)*this.secondStep,r="AM";this.showMeridian&&(t===0?t=12:t>=12?(t>12&&(t=t-12),r="PM"):r="AM");this.hour=t;this.minute=u;this.second=f;this.meridian=r;this.update()}else n===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(n)},setTime:function(n){var i,t;this.showMeridian?(i=n.split(" "),t=i[0].split(":"),this.meridian=i[1]):t=n.split(":");this.hour=parseInt(t[0],10);this.minute=parseInt(t[1],10);this.second=parseInt(t[2],10);isNaN(this.hour)&&(this.hour=0);isNaN(this.minute)&&(this.minute=0);this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),this.meridian==="am"||this.meridian==="a"?this.meridian="AM":(this.meridian==="pm"||this.meridian==="p")&&(this.meridian="PM"),this.meridian!=="AM"&&this.meridian!=="PM"&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0);this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59);this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59));this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var t=this;n(i).on("mousedown.timepicker",function(i){n(i.target).closest(".bootstrap-timepicker-widget").length===0&&t.hideWidget()});if(this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),this.template==="modal"&&this.$widget.modal)this.$widget.modal("show").on("hidden",n.proxy(this.hideWidget,this));else this.isOpen===!1&&this.$widget.addClass("open");this.isOpen=!0}},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM";this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var n=this.$element.val();n&&this.setTime(n)},updateWidget:function(){if(this.$widget!==!1){var n=this.hour<10?"0"+this.hour:this.hour,t=this.minute<10?"0"+this.minute:this.minute,i=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(n),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(i),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(n),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(i),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var t=n("input.bootstrap-timepicker-hour",this.$widget).val()+":"+n("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+n("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+n("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(t)}},widgetClick:function(t){t.stopPropagation();t.preventDefault();var i=n(t.target).closest("a").data("action");i&&this[i]()},widgetKeydown:function(t){var r=n(t.target).closest("input"),i=r.attr("name");switch(t.keyCode){case 9:if(this.showMeridian){if(i==="meridian")return this.hideWidget()}else if(this.showSeconds){if(i==="second")return this.hideWidget()}else if(i==="minute")return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:t.preventDefault();switch(i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:t.preventDefault();switch(i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}};n.fn.timepicker=function(t){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var f=n(this),r=f.data("timepicker"),e=typeof t=="object"&&t;r||f.data("timepicker",r=new u(this,n.extend({},n.fn.timepicker.defaults,e,n(this).data())));typeof t=="string"&&r[t].apply(r,i)})};n.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"};n.fn.timepicker.Constructor=u}(jQuery,window,document),!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function y(n,t){return n.getUTCFullYear()===t.getUTCFullYear()&&n.getUTCMonth()===t.getUTCMonth()&&n.getUTCDate()===t.getUTCDate()}function c(n){return function(){return this[n].apply(this,arguments)}}function p(n){return n&&!isNaN(n.getTime())}function w(t,i){function o(n,t){return t.toLowerCase()}var u,f=n(t).data(),e={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in f)i.test(r)&&(u=r.replace(s,o),e[u]=f[r]);return e}function b(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;r>t;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this._process_options(r);this.dates=new l;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},s,a,o,h,v,r,i;f.prototype={constructor:f,_process_options:function(f){var o,c,a,v,s,l;this._o=n.extend({},this._o,f);o=this.o=n.extend({},this._o);c=o.language;switch(r[c]||(c=c.split("-")[0],r[c]||(c=h.language)),o.language=c,o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}switch(o.maxViewMode){case 0:case"days":o.maxViewMode=0;break;case 1:case"months":o.maxViewMode=1;break;default:o.maxViewMode=2}if(o.startView=Math.min(o.startView,o.maxViewMode),o.startView=Math.max(o.startView,o.minViewMode),o.multidate!==!0&&(o.multidate=Number(o.multidate)||!1,o.multidate!==!1&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7,a=i.parseFormat(o.format),(o.startDate!==-(1/0)&&(o.startDate=o.startDate?o.startDate instanceof Date?this._local_to_utc(this._zero_time(o.startDate)):i.parseDate(o.startDate,a,o.language):-(1/0)),o.endDate!==1/0&&(o.endDate=o.endDate?o.endDate instanceof Date?this._local_to_utc(this._zero_time(o.endDate)):i.parseDate(o.endDate,a,o.language):1/0),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],n.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=n.map(o.daysOfWeekDisabled,function(n){return parseInt(n,10)}),o.daysOfWeekHighlighted=o.daysOfWeekHighlighted||[],n.isArray(o.daysOfWeekHighlighted)||(o.daysOfWeekHighlighted=o.daysOfWeekHighlighted.split(/[,\s]*/)),o.daysOfWeekHighlighted=n.map(o.daysOfWeekHighlighted,function(n){return parseInt(n,10)}),o.datesDisabled=o.datesDisabled||[],n.isArray(o.datesDisabled))||(v=[],v.push(i.parseDate(o.datesDisabled,a,o.language)),o.datesDisabled=v),o.datesDisabled=n.map(o.datesDisabled,function(n){return i.parseDate(n,a,o.language)}),s=String(o.orientation).toLowerCase().split(/\s+/g),l=o.orientation.toLowerCase(),s=n.grep(s,function(n){return/^auto|left|right|top|bottom$/.test(n)}),o.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":o.orientation.y=s[0];break;case"left":case"right":o.orientation.x=s[0]}else l=n.grep(s,function(n){return/^left|right$/.test(n)}),o.orientation.x=l[0]||"auto",l=n.grep(s,function(n){return/^top|bottom$/.test(n)}),o.orientation.y=l[0]||"auto";if(o.defaultViewDate){var y=o.defaultViewDate.year||(new Date).getFullYear(),p=o.defaultViewDate.month||0,w=o.defaultViewDate.day||1;o.defaultViewDate=u(y,p,w)}else o.defaultViewDate=e();o.showOnFocus=o.showOnFocus!==t?o.showOnFocus:!0;o.zIndexOffset=o.zIndexOffset!==t?o.zIndexOffset:10},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var f,r,u,i=0;i<n.length;i++)f=n[i][0],2===n[i].length?(r=t,u=n[i][1]):3===n[i].length&&(r=n[i][1],u=n[i][2]),f.on(u,r)},_unapplyEvents:function(n){for(var f,r,u,i=0;i<n.length;i++)f=n[i][0],2===n[i].length?(u=t,r=n[i][1]):3===n[i].length&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){var t={keyup:n.proxy(function(t){-1===n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:n.proxy(this.keydown,this),paste:n.proxy(this.paste,this)};this.o.showOnFocus===!0&&(t.focus=n.proxy(this.show,this));this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":n.proxy(function(n){this.update(n.date)},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{mousedown:n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.picker.hasClass("datepicker-inline")||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){0===arguments.length?(n=this.dates.length-1,t=this.o.format):"string"==typeof n&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){if(!this.element.attr("readonly")||this.o.enableOnReadonly!==!1)return(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&n(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==n.inArray("text/plain",t.originalEvent.clipboardData.types))i=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i);this.update();t.preventDefault()},_utc_to_local:function(n){return n&&new Date(n.getTime()+6e4*n.getTimezoneOffset())},_local_to_utc:function(n){return n&&new Date(n.getTime()-6e4*n.getTimezoneOffset())},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var n=this.dates.get(-1);return"undefined"!=typeof n?new Date(n):null},clearDates:function(){var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input"));n&&n.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,n.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();return this.isInput?this.element.val(n):this.component&&this.element.find("input").val(n),this},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){return this._process_options({startDate:n}),this.update(),this.updateNavArrows(),this},setEndDate:function(n){return this._process_options({endDate:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(n){return this._process_options({daysOfWeekDisabled:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(n){return this._process_options({daysOfWeekHighlighted:n}),this.update(),this},setDatesDisabled:function(n){this._process_options({datesDisabled:n});this.update();this.updateNavArrows()},place:function(){var v,u,y;if(this.isInline)return this;var f=this.picker.outerWidth(),s=this.picker.outerHeight(),e=n(this.o.container),h=e.width(),p=e.scrollTop(),c=e.offset(),l=[];this.element.parents().each(function(){var t=n(this).css("z-index");"auto"!==t&&0!==t&&l.push(parseInt(t))});var a=Math.max.apply(Math,l)+this.o.zIndexOffset,i=this.component?this.component.parent().offset():this.element.offset(),w=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),o=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=i.left-c.left,r=i.top-c.top;return this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(t-=f-o)):i.left<0?(this.picker.addClass("datepicker-orient-left"),t-=i.left-10):t+f>h?(this.picker.addClass("datepicker-orient-right"),t=i.left+o-f):this.picker.addClass("datepicker-orient-left"),u=this.o.orientation.y,("auto"===u&&(v=-p+r-s,u=0>v?"bottom":"top"),this.picker.addClass("datepicker-orient-"+u),"top"===u?r-=s+parseInt(this.picker.css("padding-top")):r+=w,this.o.rtl)?(y=h-(t+o),this.picker.css({top:r,right:y,zIndex:a})):this.picker.css({top:r,left:t,zIndex:a}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var r=this.dates.copy(),t=[],u=!1;return arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date),t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this)),t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0),this.dates.replace(t),this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate,u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&r.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(n,t){return parseInt(t)+1}),n+='<th class="cw">&#160;<\/th>');t<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[t++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;12>t;)n+='<span class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),-1!==n.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&i.push("highlighted"),this.o.datesDisabled.length>0&&n.grep(this.o.datesDisabled,function(n){return y(t,n)}).length>0&&i.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==n.inArray(t.valueOf(),this.range)&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},fill:function(){var l,nt=new Date(this.viewDate),f=nt.getUTCFullYear(),w=nt.getUTCMonth(),b=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),et=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),k=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,ot=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,st=r[this.o.language].today||r.en.today||"",ht=r[this.o.language].clear||r.en.clear||"",ct=r[this.o.language].titleFormat||r.en.titleFormat,e,d,v,a,h,o,y,rt,ut,c,ft,p,s;if(!isNaN(f)&&!isNaN(w)){for(this.picker.find(".datepicker-days thead .datepicker-switch").text(i.formatDate(new u(f,w),ct,this.o.language)),this.picker.find("tfoot .today").text(st).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(ht).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths(),e=u(f,w-1,28),d=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(d),e.setUTCDate(d-(e.getUTCDay()-this.o.weekStart+7)%7),v=new Date(e),e.getUTCFullYear()<100&&v.setUTCFullYear(e.getUTCFullYear()),v.setUTCDate(v.getUTCDate()+42),v=v.valueOf(),h=[];e.valueOf()<v;){if(e.getUTCDay()===this.o.weekStart&&(h.push("<tr>"),this.o.calendarWeeks)){var tt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),it=new Date(Number(tt)+(11-tt.getUTCDay())%7*864e5),g=new Date(Number(g=u(it.getUTCFullYear(),0,1))+(11-g.getUTCDay())%7*864e5),lt=(it-g)/6048e5+1;h.push('<td class="cw">'+lt+"<\/td>")}(a=this.getClassNames(e),a.push("day"),this.o.beforeShowDay!==n.noop)&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),o.enabled===!1&&a.push("disabled"),o.classes&&(a=a.concat(o.classes.split(/\s+/))),o.tooltip&&(l=o.tooltip));a=n.unique(a);h.push('<td class="'+a.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+e.getUTCDate()+"<\/td>");l=null;e.getUTCDay()===this.o.weekEnd&&h.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(h.join("")),y=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?"Months":f).end().find("span").removeClass("active"),(n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&y.eq(t.getUTCMonth()).addClass("active")}),(b>f||f>k)&&y.addClass("disabled"),f===b&&y.slice(0,et).addClass("disabled"),f===k&&y.slice(ot+1).addClass("disabled"),this.o.beforeShowMonth!==n.noop)&&(rt=this,n.each(y,function(t,i){if(!n(i).hasClass("disabled")){var r=new Date(f,t,1),u=rt.o.beforeShowMonth(r);u===!1&&n(i).addClass("disabled")}})),h="",f=10*parseInt(f/10,10),ut=this.picker.find(".datepicker-years").find(".datepicker-switch").text(f+"-"+(f+9)).end().find("td"),f-=1,ft=n.map(this.dates,function(n){return n.getUTCFullYear()}),p=-1;11>p;p++)(c=["year"],l=null,-1===p?c.push("old"):10===p&&c.push("new"),-1!==n.inArray(f,ft)&&c.push("active"),(b>f||f>k)&&c.push("disabled"),this.o.beforeShowYear!==n.noop)&&(s=this.o.beforeShowYear(new Date(f,0,1)),s===t?s={}:"boolean"==typeof s?s={enabled:s}:"string"==typeof s&&(s={classes:s}),s.enabled===!1&&c.push("disabled"),s.classes&&(c=c.concat(s.classes.split(/\s+/))),s.tooltip&&(l=s.tooltip)),h+='<span class="'+c.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+f+"<\/span>",f+=1;ut.html(h)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==1/0&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&n<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==1/0&&n>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var e,f,o,r,h,s,c;if(t.preventDefault(),t.stopPropagation(),r=n(t.target).closest("span, td, th"),1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":h=i.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h);1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);c="linked"===this.o.todayBtn?null:"view";this._setDate(s,c);break;case"clear":this.clearDates()}break;case"span":r.hasClass("disabled")||(this.viewDate.setUTCDate(1),r.hasClass("month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(u(e,f,o)),this.showMode()):this.showMode(-1)):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(u(e,f,o)),this.showMode(-1)),this.fill());break;case"td":r.hasClass("day")&&!r.hasClass("disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.hasClass("old")?0===f?(f=11,e-=1):f-=1:r.hasClass("new")&&(11===f?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n||this.dates.clear(),-1!==t?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(n)):this.dates.push(n),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(n,t){t&&"date"!==t||this._toggle_multidate(n&&new Date(n));t&&"view"!==t||(this.viewDate=n&&new Date(n));this.fill();this.setValue();t&&"view"===t||this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(n,t){var f;if(!p(n))return this.o.defaultViewDate;if(!t)return n;var r,u,i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1===s)u=-1===t?function(){return i.getUTCMonth()===o}:function(){return i.getUTCMonth()!==r},r=o+t,i.setUTCMonth(r),(0>r||r>11)&&(r=(r+12)%12);else{for(f=0;s>f;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!==i.getUTCMonth()}}for(;u();)i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,12*t)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var t,u,i,o,r,f;if(!this.picker.is(":visible"))return void((40===n.keyCode||27===n.keyCode)&&(this.show(),n.stopPropagation()));o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();n.stopPropagation();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===n.keyCode?-1:1;n.ctrlKey?(u=this.moveYear(this.dates.get(-1)||e(),t),i=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(u=this.moveMonth(this.dates.get(-1)||e(),t),i=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(u=new Date(this.dates.get(-1)||e()),u.setUTCDate(u.getUTCDate()+t),i=new Date(r),i.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===n.keyCode?-1:1;n.ctrlKey?(u=this.moveYear(this.dates.get(-1)||e(),t),i=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(u=this.moveMonth(this.dates.get(-1)||e(),t),i=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(u=new Date(this.dates.get(-1)||e()),u.setUTCDate(u.getUTCDate()+7*t),i=new Date(r),i.setUTCDate(r.getUTCDate()+7*t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(r),o=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),"function"==typeof n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+n)));this.picker.children("div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).show();this.updateNavArrows()}};s=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;o.call(n(this.inputs),i).on("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};s.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){var f;if(!this.updating&&(this.updating=!0,f=n(t.target).data("datepicker"),"undefined"!=typeof f)){var i=f.getUTCDate(),e=n.inArray(t.target,this.inputs),r=e-1,u=e+1,o=this.inputs.length;if(-1!==e){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[u])for(;o>u&&i>this.dates[u];)this.pickers[u++].setUTCDate(i);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;o=function(i){var u=Array.apply(null,arguments),r;if(u.shift(),this.each(function(){var e=n(this),t=e.data("datepicker"),c="object"==typeof i&&i,a;if(!t){var l=w(this,"date"),v=n.extend({},h,l,c),y=b(v.language),o=n.extend({},h,y,l,c);e.hasClass("input-daterange")||o.inputs?(a={inputs:o.inputs||e.find("input").toArray()},e.data("datepicker",t=new s(this,n.extend(o,a)))):e.data("datepicker",t=new f(this,o))}"string"==typeof i&&"function"==typeof t[i]&&(r=t[i].apply(t,u))}),r===t||r instanceof f||r instanceof s)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return r};n.fn.datepicker=o;h=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,beforeShowMonth:n.noop,beforeShowYear:n.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:2,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body",immediateUpdates:!1,title:""};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){if("function"==typeof n.toValue&&"function"==typeof n.toDisplay)return n;var t=n.replace(this.validParts,"\x00").split("\x00"),i=n.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function nt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()}var v,y,h,tt,c,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if("string"==typeof o&&(o=i.parseFormat(o)),o.toValue)return o.toValue(e,o,s);if(tt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++)switch(v=tt.exec(c[h]),y=parseInt(v[1]),v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+7*y);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var p,b,k={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;0>t;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}};if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return-1!==n.inArray(i,g)}).toArray()),c.length===a.length){for(h=0,it=a.length;it>h;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":b=n(r[s].months).filter(nt);p=n.inArray(b[0],r[s].months)+1;break;case"M":b=n(r[s].monthsShort).filter(nt);p=n.inArray(b[0],r[s].monthsShort)+1}k[v]=p}for(h=0;h<g.length;h++)w=g[h],w in k&&!isNaN(k[w])&&(d=new Date(e),l[w](d,k[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e;if(!t)return"";if("string"==typeof u&&(u=i.parseFormat(u)),u.toDisplay)return u.toDisplay(t,u,f);e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d;e.mm=(e.m<10?"0":"")+e.m;t=[];for(var s=n.extend([],u.separators),o=0,h=u.parts.length;h>=o;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"><\/th><\/tr><tr><th class="prev">&#171;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&#187;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n.fn.datepicker.version="1.5.0";n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),o.call(i,"show"))});n(function(){o.call(n('[data-provide="datepicker-inline"]'))})}),!function(n){n.fn.datepicker.dates.ar={days:["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª","Ø§Ù„Ø£Ø­Ø¯"],daysShort:["Ø£Ø­Ø¯","Ø§Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª","Ø£Ø­Ø¯"],daysMin:["Ø­","Ù†","Ø«","Ø¹","Ø®","Ø¬","Ø³","Ø­"],months:["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],monthsShort:["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],today:"Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…",rtl:!0}}(jQuery),!function(n){n.fn.datepicker.dates.fr={days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],daysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],daysMin:["d","l","ma","me","j","v","s"],months:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],monthsShort:["janv.","fÃ©vr.","mars","avril","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],today:"Aujourd'hui",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"}}(jQuery),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&!function(){var n=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return n.get.call(this)},set:function(t){return n.set.call(this,t)}})}(),Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}),wysihtml5={version:"0.4.15",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"ï»¿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46},function(n,t){"function"==typeof define&&define.amd?define(n):t.rangy=n()}(function(){function t(n,t){var i=typeof n[t];return i==ot||!(i!=rt||!n[t])||"unknown"==i}function u(n,t){return!(typeof n[t]!=rt||!n[t])}function b(n,t){return typeof n[t]!=h}function c(n){return function(t,i){for(var r=i.length;r--;)if(!n(t,i[r]))return!1;return!0}}function k(n){return n&&p(n,lt)&&w(n,ct)}function d(n){return u(n,"body")?n.body:n.getElementsByTagName("body")[0]}function l(n){u(window,"console")&&t(window.console,"log")&&window.console.log(n)}function g(n,t){t?window.alert(n):l(n)}function i(t){n.initialized=!0;n.supported=!1;g("Rangy is not supported on this page in your browser. Reason: "+t,n.config.alertOnFail)}function ut(t){g("Rangy warning: "+t,n.config.alertOnWarn)}function nt(n){return n.message||n.description||n+""}function a(){var e,s,h,u,a,v,y,c,b;if(!n.initialized){if(s=!1,h=!1,t(document,"createRange")&&(e=document.createRange(),p(e,ht)&&w(e,st)&&(s=!0)),u=d(document),!u||"body"!=u.nodeName.toLowerCase())return i("No body element found"),void 0;if(u&&t(u,"createTextRange")&&(e=u.createTextRange(),k(e)&&(h=!0)),!s&&!h)return i("Neither Range nor TextRange are available"),void 0;n.initialized=!0;n.features={implementsDomRange:s,implementsTextRange:h};for(y in r)(a=r[y])instanceof f&&a.init(a,n);for(c=0,b=o.length;b>c;++c)try{o[c](n)}catch(g){v="Rangy init listener threw an exception. Continuing. Detail: "+nt(g);l(v)}}}function ft(n){n=n||window;a();for(var t=0,i=s.length;i>t;++t)s[t](n)}function f(n,t,i){this.name=n;this.dependencies=t;this.initialized=!1;this.supported=!1;this.initializer=i}function tt(t,i,u,e){var o=new f(i,u,function(t){if(!t.initialized){t.initialized=!0;try{e(n,t);t.supported=!0}catch(r){var u="Module '"+i+"' failed to load: "+nt(r);l(u)}}});r[i]=o}function it(){}function et(){}var e,o,s,v,y,rt="object",ot="function",h="undefined",st=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ht=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],ct=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],lt=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],p=c(t),at=c(u),w=c(b),r={},n={version:"1.3alpha.20140804",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:u,isHostProperty:b,areHostMethods:p,areHostObjects:at,areHostProperties:w,isTextRange:k,getBody:d},features:{},modules:r,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==h?!0:rangyAutoInitialize}};return n.fail=i,n.warn=ut,{}.hasOwnProperty?n.util.extend=function(t,i,r){var f,u;for(var e in i)i.hasOwnProperty(e)&&(f=t[e],u=i[e],r&&null!==f&&"object"==typeof f&&null!==u&&"object"==typeof u&&n.util.extend(f,u,!0),t[e]=u);return i.hasOwnProperty("toString")&&(t.toString=i.toString),t}:i("hasOwnProperty not supported"),function(){var i,t,r=document.createElement("div");r.appendChild(document.createElement("span"));i=[].slice;try{1==i.call(r.childNodes,0)[0].nodeType&&(t=function(n){return i.call(n,0)})}catch(u){}t||(t=function(n){for(var r=[],t=0,i=n.length;i>t;++t)r[t]=n[t];return r});n.util.toArray=t}(),t(document,"addEventListener")?e=function(n,t,i){n.addEventListener(t,i,!1)}:t(document,"attachEvent")?e=function(n,t,i){n.attachEvent("on"+t,i)}:i("Document does not have required addEventListener or attachEvent method"),n.util.addListener=e,o=[],n.init=a,n.addInitListener=function(t){n.initialized?t(n):o.push(t)},s=[],n.addShimListener=function(n){s.push(n)},n.shim=n.createMissingNativeApi=ft,f.prototype={init:function(){for(var n,i,e=this.dependencies||[],t=0,u=e.length;u>t;++t){if(i=e[t],n=r[i],!(n&&n instanceof f))throw Error("required module '"+i+"' not found");if(n.init(),!n.supported)throw Error("required module '"+i+"' not supported");}this.initializer(this)},fail:function(n){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+n);},warn:function(t){n.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,i){n.warn("DEPRECATED: "+t+" in module "+this.name+"is deprecated. Please use "+i+" instead")},createError:function(n){return Error("Error in Rangy "+this.name+" module: "+n)}},n.createModule=function(t){var i,r,u;2==arguments.length?(i=arguments[1],r=[]):(i=arguments[2],r=arguments[1]);u=tt(!1,t,r,i);n.initialized&&u.init()},n.createCoreModule=function(n,t,i){tt(!0,n,t,i)},n.RangePrototype=it,n.rangePrototype=new it,n.selectionPrototype=new et,v=!1,y=function(){v||(v=!0,!n.initialized&&n.config.autoInitialize&&a())},typeof window==h?(i("No window found"),void 0):typeof document==h?(i("No document found"),void 0):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",y,!1),e(window,"load",y),n.createCoreModule("DomUtil",[],function(n,t){function rt(n){var t;return typeof n.namespaceURI==r||null===(t=n.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function ut(n){var t=n.parentNode;return 1==t.nodeType?t:null}function u(n){for(var t=0;n=n.previousSibling;)++t;return t}function ft(n){switch(n.nodeType){case 7:case 10:return 0;case 3:case 8:return n.length;default:return n.childNodes.length}}function y(n,t){for(var r=[],i=n;i;i=i.parentNode)r.push(i);for(i=t;i;i=i.parentNode)if(a(r,i))return i;return null}function p(n,t,i){for(var r=i?t:t.parentNode;r;){if(r===n)return!0;r=r.parentNode}return!1}function et(n,t){return p(n,t,!0)}function f(n,t,i){for(var u,r=i?n:n.parentNode;r;){if(u=r.parentNode,u===t)return r;r=u}return null}function w(n){var t=n.nodeType;return 3==t||4==t||8==t}function ot(n){if(!n)return!1;var t=n.nodeType;return 3==t||8==t}function b(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n}function st(n,t,i){var e,r,f=n.cloneNode(!1);if(f.deleteData(0,t),n.deleteData(t,n.length-t),b(f,n),i)for(e=0;r=i[e++];)r.node==n&&r.offset>t?(r.node=f,r.offset-=t):r.node==n.parentNode&&r.offset>u(n)&&++r.offset;return f}function e(n){if(9==n.nodeType)return n;if(typeof n.ownerDocument!=r)return n.ownerDocument;if(typeof n.document!=r)return n.document;if(n.parentNode)return e(n.parentNode);throw t.createError("getDocument: no document found for node");}function k(n){var i=e(n);if(typeof i.defaultView!=r)return i.defaultView;if(typeof i.parentWindow!=r)return i.parentWindow;throw t.createError("Cannot get a window object for node");}function d(n){if(typeof n.contentDocument!=r)return n.contentDocument;if(typeof n.contentWindow!=r)return n.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element");}function ht(n){if(typeof n.contentWindow!=r)return n.contentWindow;if(typeof n.contentDocument!=r)return n.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element");}function g(n){return n&&i.isHostMethod(n,"setTimeout")&&i.isHostObject(n,"document")}function ct(n,t,r){var u;if(n?i.isHostProperty(n,"nodeType")?u=1==n.nodeType&&"iframe"==n.tagName.toLowerCase()?d(n):e(n):g(n)&&(u=n.document):u=document,!u)throw t.createError(r+"(): Parameter must be a Window object or DOM node");return u}function lt(n){for(var t;t=n.parentNode;)n=t;return n}function at(n,i,r,e){var h,o,c,l,s;if(n==r)return i===e?0:e>i?-1:1;if(h=f(r,n,!0))return i<=u(h)?-1:1;if(h=f(n,r,!0))return u(h)<e?-1:1;if(o=y(n,r),!o)throw Error("comparePoints error: nodes have no common ancestor");if(c=n===o?o:f(n,o,!0),l=r===o?o:f(r,o,!0),c===l)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(s=o.firstChild;s;){if(s===c)return-1;if(s===l)return 1;s=s.nextSibling}}function h(n){var t;try{return t=n.parentNode,!1}catch(i){return!0}}function nt(n){if(!n)return"[No node]";if(s&&h(n))return"[Broken node]";if(w(n))return'"'+n.data+'"';if(1==n.nodeType){var t=n.id?' id="'+n.id+'"':"";return"<"+n.nodeName+t+">[index:"+u(n)+",length:"+n.childNodes.length+"]["+(n.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return n.nodeName}function vt(n){for(var t,i=e(n).createDocumentFragment();t=n.firstChild;)i.appendChild(t);return i}function tt(n){this.root=n;this._next=n}function yt(n){return new tt(n)}function it(n,t){this.node=n;this.offset=t}function c(n){this.code=this[n];this.codeName=n;this.message="DOMException: "+this.codeName}var o,l,a,s,v,r="undefined",i=n.util;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method");i.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");o=document.createElement("div");i.areHostMethods(o,["insertBefore","appendChild","cloneNode"]||!i.areHostObjects(o,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation");i.isHostProperty(o,"innerHTML")||t.fail("Element is missing innerHTML property");l=document.createTextNode("test");i.areHostMethods(l,["splitText","deleteData","insertData","appendData","cloneNode"]||!i.areHostObjects(o,["previousSibling","nextSibling","childNodes","parentNode"])||!i.areHostProperties(l,["data"]))||t.fail("Incomplete Text Node implementation");a=function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1};s=!1,function(){var i,t=document.createElement("b");t.innerHTML="1";i=t.firstChild;t.innerHTML="<br>";s=h(i);n.features.crashyTextNodes=s}();typeof getComputedStyle!=r?v=function(n,t){return k(n).getComputedStyle(n,null)[t]}:typeof document.documentElement.currentStyle!=r?v=function(n,t){return n.currentStyle[t]}:t.fail("No means of obtaining computed style properties found");tt.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,i,n=this._current=this._next;if(this._current)if(t=n.firstChild,t)this._next=t;else{for(i=null;n!==this.root&&!(i=n.nextSibling);)n=n.parentNode;this._next=i}return this._current},detach:function(){this._current=this._next=this.root=null}};it.prototype={equals:function(n){return!!n&&this.node===n.node&&this.offset==n.offset},inspect:function(){return"[DomPosition("+nt(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};c.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};c.prototype.toString=function(){return this.message};n.dom={arrayContains:a,isHtmlNamespace:rt,parentElement:ut,getNodeIndex:u,getNodeLength:ft,getCommonAncestor:y,isAncestorOf:p,isOrIsAncestorOf:et,getClosestAncestorIn:f,isCharacterDataNode:w,isTextOrCommentNode:ot,insertAfter:b,splitDataNode:st,getDocument:e,getWindow:k,getIframeWindow:ht,getIframeDocument:d,getBody:i.getBody,isWindow:g,getContentDocument:ct,getRootContainer:lt,comparePoints:at,isBrokenNode:h,inspectNode:nt,getComputedStyleProperty:v,fragmentFromNodeChildren:vt,createIterator:yt,DomPosition:it};n.DOMException=c}),n.createCoreModule("DomRange",["DomUtil"],function(n){function l(n,t){return 3!=n.nodeType&&(y(n,t.startContainer)||y(n,t.endContainer))}function e(n){return n.document||it(n.startContainer)}function gt(n){return new rr(n.parentNode,c(n))}function rt(n){return new rr(n.parentNode,c(n)+1)}function ni(n,i,u){var f=11==n.nodeType?n.firstChild:n;return r(i)?u==i.length?t.insertAfter(n,i):i.parentNode.insertBefore(n,0==u?i:wt(i,u)):u>=i.childNodes.length?i.appendChild(n):i.insertBefore(n,i.childNodes[u]),f}function ti(n,t,r){if(i(n),i(t),e(t)!=e(n))throw new f("WRONG_DOCUMENT_ERR");var o=u(n.startContainer,n.startOffset,t.endContainer,t.endOffset),s=u(n.endContainer,n.endOffset,t.startContainer,t.startOffset);return r?0>=o&&s>=0:0>o&&s>0}function ii(n){for(var i,t,u,r=e(n.range).createDocumentFragment();t=n.next();){if(i=n.isPartiallySelectedSubtree(),t=t.cloneNode(!i),i&&(u=n.getSubtreeIterator(),t.appendChild(ii(u)),u.detach()),10==t.nodeType)throw new f("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function w(n,i,r){var e,o,u,f;for(r=r||{stop:!1};u=n.next();)if(n.isPartiallySelectedSubtree()){if(i(u)===!1)return r.stop=!0,void 0;if(f=n.getSubtreeIterator(),w(f,i,r),f.detach(),r.stop)return}else for(e=t.createIterator(u);o=e.next();)if(i(o)===!1)return r.stop=!0,void 0}function ri(n){for(var t;n.next();)n.isPartiallySelectedSubtree()?(t=n.getSubtreeIterator(),ri(t),t.detach()):n.remove()}function ui(n){for(var t,i,r=e(n.range).createDocumentFragment();t=n.next();){if(n.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=n.getSubtreeIterator(),t.appendChild(ui(i)),i.detach()):n.remove(),10==t.nodeType)throw new f("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function ur(n,t,i){var f,u,e=!(!t||!t.length),s=!!i;return e&&(f=RegExp("^("+t.join("|")+")$")),u=[],w(new o(n,!1),function(t){var o,h;(!e||f.test(t.nodeType))&&(!s||i(t))&&(o=n.startContainer,t==o&&r(o)&&n.startOffset==o.length||(h=n.endContainer,t==h&&r(h)&&0==n.endOffset||u.push(t)))}),u}function fi(n){var i=void 0===n.getName?"Range":n.getName();return"["+i+"("+t.inspectNode(n.startContainer)+":"+n.startOffset+", "+t.inspectNode(n.endContainer)+":"+n.endOffset+")]"}function o(n,t){if(this.range=n,this.clonePartiallySelectedTextNodes=t,!n.collapsed){this.sc=n.startContainer;this.so=n.startOffset;this.ec=n.endContainer;this.eo=n.endOffset;var i=n.commonAncestorContainer;this.sc===this.ec&&r(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||r(this.sc)?bt(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||r(this.ec)?bt(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function ut(n){return function(t,i){for(var u,r=i?t:t.parentNode;r;){if(u=r.nodeType,dt(n,u))return r;r=r.parentNode}return null}}function a(n,t){if(nr(n,t))throw new f("INVALID_NODE_TYPE_ERR");}function v(n,t){if(!dt(t,n.nodeType))throw new f("INVALID_NODE_TYPE_ERR");}function ft(n,t){if(0>t||t>(r(n)?n.length:n.childNodes.length))throw new f("INDEX_SIZE_ERR");}function et(n,t){if(k(n,!0)!==k(t,!0))throw new f("WRONG_DOCUMENT_ERR");}function s(n){if(gi(n,!0))throw new f("NO_MODIFICATION_ALLOWED_ERR");}function b(n,t){if(!n)throw new f(t);}function ei(n){return fr&&t.isBrokenNode(n)||!dt(st,n.nodeType)&&!k(n,!0)}function oi(n,t){return t<=(r(n)?n.length:n.childNodes.length)}function si(n){return!!n.startContainer&&!!n.endContainer&&!ei(n.startContainer)&&!ei(n.endContainer)&&oi(n.startContainer,n.startOffset)&&oi(n.endContainer,n.endOffset)}function i(n){if(!si(n))throw Error("Range error: Range is no longer valid after DOM mutation ("+n.inspect()+")");}function hi(n,t){var u,o,f,e,s;i(n);u=n.startContainer;o=n.startOffset;f=n.endContainer;e=n.endOffset;s=u===f;r(f)&&e>0&&e<f.length&&wt(f,e,t);r(u)&&o>0&&o<u.length&&(u=wt(u,o,t),s?(e-=o,f=u):f==u.parentNode&&e>=c(u)&&e++,o=0);n.setStartAndEnd(u,o,f,e)}function ci(n){i(n);var t=n.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(n.cloneContents()),t.innerHTML}function li(n){n.START_TO_START=nt;n.START_TO_END=ct;n.END_TO_END=ir;n.END_TO_START=lt;n.NODE_BEFORE=at;n.NODE_AFTER=vt;n.NODE_BEFORE_AND_AFTER=yt;n.NODE_INSIDE=tt}function ai(n){li(n);li(n.prototype)}function vi(n,t){return function(){var r,f,e,u,c,h,l;return i(this),r=this.startContainer,f=this.startOffset,e=this.commonAncestorContainer,u=new o(this,!0),r!==e&&(c=bt(r,e,!0),h=rt(c),r=h.node,f=h.offset),w(u,s),u.reset(),l=n(u),u.detach(),t(this,r,f,r,f),l}}function yi(t,f){function e(n,t){return function(i){v(i,ot);v(p(i),st);var r=(n?gt:rt)(i);(t?h:y)(this,r.node,r.offset)}}function h(n,t,i){var r=n.endContainer,e=n.endOffset;(t!==n.startContainer||i!==n.startOffset)&&((p(t)!=p(r)||1==u(t,i,r,e))&&(r=t,e=i),f(n,t,i,r,e))}function y(n,t,i){var r=n.startContainer,e=n.startOffset;(t!==n.endContainer||i!==n.endOffset)&&((p(t)!=p(r)||-1==u(t,i,r,e))&&(r=t,e=i),f(n,r,e,t,i))}var w=function(){};w.prototype=n.rangePrototype;t.prototype=new w;pt.extend(t.prototype,{setStart:function(n,t){a(n,!0);ft(n,t);h(this,n,t)},setEnd:function(n,t){a(n,!0);ft(n,t);y(this,n,t)},setStartAndEnd:function(){var n=arguments,i=n[0],r=n[1],u=i,t=r;switch(n.length){case 3:t=n[2];break;case 4:u=n[2];t=n[3]}f(this,i,r,u,t)},setBoundary:function(n,t,i){this["set"+(i?"Start":"End")](n,t)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(n){i(this);n?f(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):f(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(n){a(n,!0);f(this,n,0,n,kt(n))},selectNode:function(n){a(n,!1);v(n,ot);var t=gt(n),i=rt(n);f(this,t.node,t.offset,i.node,i.offset)},extractContents:vi(ui,f),deleteContents:vi(ri,f),canSurroundContents:function(){var n,t;return i(this),s(this.startContainer),s(this.endContainer),n=new o(this,!0),t=n._first&&l(n._first,this)||n._last&&l(n._last,this),n.detach(),!t},splitBoundaries:function(){hi(this)},splitBoundariesPreservingPositions:function(n){hi(this,n)},normalizeBoundaries:function(){var u,e,n,t,h,l,a,o,s;i(this);u=this.startContainer;e=this.startOffset;n=this.endContainer;t=this.endOffset;h=function(i){var r=i.nextSibling;r&&r.nodeType==i.nodeType&&(n=i,t=i.length,i.appendData(r.data),r.parentNode.removeChild(r))};l=function(i){var o,f,r=i.previousSibling;r&&r.nodeType==i.nodeType&&(u=i,o=i.length,e=r.length,i.insertData(0,r.data),r.parentNode.removeChild(r),u==n?(t+=e,n=u):n==i.parentNode&&(f=c(i),t==f?(n=i,t=o):t>f&&t--))};a=!0;r(n)?n.length==t&&h(n):(t>0&&(o=n.childNodes[t-1],o&&r(o)&&h(o)),a=!this.collapsed);a?r(u)?0==e&&l(u):e<u.childNodes.length&&(s=u.childNodes[e],s&&r(s)&&l(s)):(u=n,e=t);f(this,u,e,n,t)},collapseToPoint:function(n,t){a(n,!0);ft(n,t);this.setStartAndEnd(n,t)}});ai(t)}function pi(n){n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset;n.commonAncestorContainer=n.collapsed?n.startContainer:t.getCommonAncestor(n.startContainer,n.endContainer)}function wi(n,i,r,u,f){n.startContainer=i;n.startOffset=r;n.endContainer=u;n.endOffset=f;n.document=t.getDocument(i);pi(n)}function h(n){this.startContainer=n;this.startOffset=0;this.endContainer=n;this.endOffset=0;this.document=n;pi(this)}var ot,st,bi,ki,di,k,gi,nr,ht,d,tr,g,nt,ct,ir,lt,at,vt,yt,tt,t=n.dom,pt=n.util,rr=t.DomPosition,f=n.DOMException,r=t.isCharacterDataNode,c=t.getNodeIndex,y=t.isOrIsAncestorOf,it=t.getDocument,u=t.comparePoints,wt=t.splitDataNode,bt=t.getClosestAncestorIn,kt=t.getNodeLength,dt=t.arrayContains,p=t.getRootContainer,fr=n.features.crashyTextNodes;o.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var n=this._current=this._next;return n&&(this._next=n!==this._last?n.nextSibling:null,r(n)&&this.clonePartiallySelectedTextNodes&&(n===this.ec&&(n=n.cloneNode(!0)).deleteData(this.eo,n.length-this.eo),this._current===this.sc&&(n=n.cloneNode(!0)).deleteData(0,this.so))),n},remove:function(){var t,i,n=this._current;!r(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,i=n===this.ec?this.eo:n.length,t!=i&&n.deleteData(t,i-t))},isPartiallySelectedSubtree:function(){var n=this._current;return l(n,this.range)},getSubtreeIterator:function(){var t,n,i,r,u,f;return this.isSingleCharacterDataNode?(t=this.range.cloneRange(),t.collapse(!1)):(t=new h(e(this.range)),n=this._current,i=n,r=0,u=n,f=kt(n),y(n,this.sc)&&(i=this.sc,r=this.so),y(n,this.ec)&&(u=this.ec,f=this.eo),wi(t,i,r,u,f)),new o(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};ot=[1,3,4,5,7,8,10];st=[2,9,11];bi=[5,6,10,12];ki=[1,3,4,5,7,8,10,11];di=[1,3,4,5,7,8];k=ut([9,11]);gi=ut(bi);nr=ut([6,10,12]);ht=document.createElement("style");d=!1;try{ht.innerHTML="<b>x<\/b>";d=3==ht.firstChild.nodeType}catch(er){}n.features.htmlParsingConforms=d;tr=d?function(n){var i,u=this.startContainer,e=it(u);if(!u)throw new f("INVALID_STATE_ERR");return i=null,1==u.nodeType?i=u:r(u)&&(i=t.parentElement(u)),i=null===i||"HTML"==i.nodeName&&t.isHtmlNamespace(it(i).documentElement)&&t.isHtmlNamespace(i)?e.createElement("body"):i.cloneNode(!1),i.innerHTML=n,t.fragmentFromNodeChildren(i)}:function(n){var r=e(this),i=r.createElement("body");return i.innerHTML=n,t.fragmentFromNodeChildren(i)};g=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];nt=0;ct=1;ir=2;lt=3;at=0;vt=1;yt=2;tt=3;pt.extend(n.rangePrototype,{compareBoundaryPoints:function(n,t){var e,o,s,h,r,f;return i(this),et(this.startContainer,t.startContainer),r=n==lt||n==nt?"start":"end",f=n==ct||n==nt?"start":"end",e=this[r+"Container"],o=this[r+"Offset"],s=t[f+"Container"],h=t[f+"Offset"],u(e,o,s,h)},insertNode:function(n){if(i(this),v(n,ki),s(this.startContainer),y(n,this.startContainer))throw new f("HIERARCHY_REQUEST_ERR");var t=ni(n,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var n,t,u;return i(this),this.collapsed?e(this).createDocumentFragment():this.startContainer===this.endContainer&&r(this.startContainer)?(n=this.startContainer.cloneNode(!0),n.data=n.data.slice(this.startOffset,this.endOffset),t=e(this).createDocumentFragment(),t.appendChild(n),t):(u=new o(this,!0),n=ii(u),u.detach(),n)},canSurroundContents:function(){var n,t;return i(this),s(this.startContainer),s(this.endContainer),n=new o(this,!0),t=n._first&&l(n._first,this)||n._last&&l(n._last,this),n.detach(),!t},surroundContents:function(n){if(v(n,di),!this.canSurroundContents())throw new f("INVALID_STATE_ERR");var t=this.extractContents();if(n.hasChildNodes())for(;n.lastChild;)n.removeChild(n.lastChild);ni(n,this.startContainer,this.startOffset);n.appendChild(t);this.selectNode(n)},cloneRange:function(){var n,t,r;for(i(this),n=new h(e(this)),t=g.length;t--;)r=g[t],n[r]=this[r];return n},toString:function(){var n,t,u;return i(this),n=this.startContainer,n===this.endContainer&&r(n)?3==n.nodeType||4==n.nodeType?n.data.slice(this.startOffset,this.endOffset):"":(t=[],u=new o(this,!0),w(u,function(n){(3==n.nodeType||4==n.nodeType)&&t.push(n.data)}),u.detach(),t.join(""))},compareNode:function(n){var t,r,e,u;if(i(this),t=n.parentNode,r=c(n),!t)throw new f("NOT_FOUND_ERR");return e=this.comparePoint(t,r),u=this.comparePoint(t,r+1),0>e?u>0?yt:at:u>0?vt:tt},comparePoint:function(n,t){return i(this),b(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)<0?-1:u(n,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:tr,toHtml:function(){return ci(this)},intersectsNode:function(n,t){var r,f,o,s;return i(this),b(n,"NOT_FOUND_ERR"),it(n)!==e(this)?!1:(r=n.parentNode,f=c(n),b(r,"NOT_FOUND_ERR"),o=u(r,f,this.endContainer,this.endOffset),s=u(r,f+1,this.startContainer,this.startOffset),t?0>=o&&s>=0:0>o&&s>0)},isPointInRange:function(n,t){return i(this),b(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)>=0&&u(n,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(n){return ti(this,n,!1)},intersectsOrTouchesRange:function(n){return ti(this,n,!0)},intersection:function(n){var i,r,t;return this.intersectsRange(n)?(i=u(this.startContainer,this.startOffset,n.startContainer,n.startOffset),r=u(this.endContainer,this.endOffset,n.endContainer,n.endOffset),t=this.cloneRange(),-1==i&&t.setStart(n.startContainer,n.startOffset),1==r&&t.setEnd(n.endContainer,n.endOffset),t):null},union:function(n){if(this.intersectsOrTouchesRange(n)){var t=this.cloneRange();return-1==u(n.startContainer,n.startOffset,this.startContainer,this.startOffset)&&t.setStart(n.startContainer,n.startOffset),1==u(n.endContainer,n.endOffset,this.endContainer,this.endOffset)&&t.setEnd(n.endContainer,n.endOffset),t}throw new f("Ranges do not intersect");},containsNode:function(n,t){return t?this.intersectsNode(n,!1):this.compareNode(n)==tt},containsNodeContents:function(n){return this.comparePoint(n,0)>=0&&this.comparePoint(n,kt(n))<=0},containsRange:function(n){var t=this.intersection(n);return null!==t&&n.equals(t)},containsNodeText:function(n){var i,r,t=this.cloneRange();return t.selectNode(n),i=t.getNodes([3]),i.length>0?(t.setStart(i[0],0),r=i.pop(),t.setEnd(r,r.length),this.containsRange(t)):this.containsNodeContents(n)},getNodes:function(n,t){return i(this),ur(this,n,t)},getDocument:function(){return e(this)},collapseBefore:function(n){this.setEndBefore(n);this.collapse(!1)},collapseAfter:function(n){this.setStartAfter(n);this.collapse(!0)},getBookmark:function(i){var r,u,o,s=e(this),f=n.createRange(s);return i=i||t.getBody(s),f.selectNodeContents(i),r=this.intersection(f),u=0,o=0,r&&(f.setEnd(r.startContainer,r.startOffset),u=(""+f).length,o=u+(""+r).length),{start:u,end:o,containerNode:i}},moveToBookmark:function(n){var f,t,r,e,u,o,s,h=n.containerNode,i=0;for(this.setStart(h,0),this.collapse(!0),f=[h],r=!1,e=!1;!e&&(t=f.pop());)if(3==t.nodeType)u=i+t.length,!r&&n.start>=i&&n.start<=u&&(this.setStart(t,n.start-i),r=!0),r&&n.end>=i&&n.end<=u&&(this.setEnd(t,n.end-i),e=!0),i=u;else for(s=t.childNodes,o=s.length;o--;)f.push(s[o])},getName:function(){return"DomRange"},equals:function(n){return h.rangesEqual(this,n)},isValid:function(){return si(this)},inspect:function(){return fi(this)},detach:function(){}});yi(h,wi);pt.extend(h,{rangeProperties:g,RangeIterator:o,copyComparisonConstants:ai,createPrototypeRange:yi,inspect:fi,toHtml:ci,getRangeDocument:e,rangesEqual:function(n,t){return n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset}});n.DomRange=h}),n.createCoreModule("WrappedRange",["DomRange"],function(n,t){var o,r,y,p,s,h,a,v,i=n.dom,w=n.util,u=i.DomPosition,f=n.DomRange,e=i.getBody,c=i.getContentDocument,l=i.isCharacterDataNode;n.features.implementsDomRange&&!function(){function s(n){for(var t,i=b.length;i--;)t=b[i],n[t]=n.nativeRange[t];n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset}function k(n,t,i,r,u){var f=n.startContainer!==t||n.startOffset!=i,e=n.endContainer!==r||n.endOffset!=u,o=!n.equals(n.nativeRange);(f||e||o)&&(n.setEnd(r,u),n.setStart(t,i))}var r,l,h,u,a,v,y,p,b=f.rangeProperties;o=function(n){if(!n)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=n;s(this)};f.createPrototypeRange(o,k);r=o.prototype;r.selectNode=function(n){this.nativeRange.selectNode(n);s(this)};r.cloneContents=function(){return this.nativeRange.cloneContents()};r.surroundContents=function(n){this.nativeRange.surroundContents(n);s(this)};r.collapse=function(n){this.nativeRange.collapse(n);s(this)};r.cloneRange=function(){return new o(this.nativeRange.cloneRange())};r.refresh=function(){s(this)};r.toString=function(){return""+this.nativeRange};h=document.createTextNode("test");e(document).appendChild(h);u=document.createRange();u.setStart(h,0);u.setEnd(h,0);try{u.setStart(h,1);r.setStart=function(n,t){this.nativeRange.setStart(n,t);s(this)};r.setEnd=function(n,t){this.nativeRange.setEnd(n,t);s(this)};l=function(n){return function(t){this.nativeRange[n](t);s(this)}}}catch(d){r.setStart=function(n,t){try{this.nativeRange.setStart(n,t)}catch(i){this.nativeRange.setEnd(n,t);this.nativeRange.setStart(n,t)}s(this)};r.setEnd=function(n,t){try{this.nativeRange.setEnd(n,t)}catch(i){this.nativeRange.setStart(n,t);this.nativeRange.setEnd(n,t)}s(this)};l=function(n,t){return function(i){try{this.nativeRange[n](i)}catch(r){this.nativeRange[t](i);this.nativeRange[n](i)}s(this)}}}r.setStartBefore=l("setStartBefore","setEndBefore");r.setStartAfter=l("setStartAfter","setEndAfter");r.setEndBefore=l("setEndBefore","setStartBefore");r.setEndAfter=l("setEndAfter","setStartAfter");r.selectNodeContents=function(n){this.setStartAndEnd(n,0,i.getNodeLength(n))};u.selectNodeContents(h);u.setEnd(h,3);a=document.createRange();a.selectNodeContents(h);a.setEnd(h,4);a.setStart(h,2);r.compareBoundaryPoints=-1==u.compareBoundaryPoints(u.START_TO_END,a)&&1==u.compareBoundaryPoints(u.END_TO_START,a)?function(n,t){return t=t.nativeRange||t,n==t.START_TO_END?n=t.END_TO_START:n==t.END_TO_START&&(n=t.START_TO_END),this.nativeRange.compareBoundaryPoints(n,t)}:function(n,t){return this.nativeRange.compareBoundaryPoints(n,t.nativeRange||t)};v=document.createElement("div");v.innerHTML="123";y=v.firstChild;p=e(document);p.appendChild(v);u.setStart(y,1);u.setEnd(y,2);u.deleteContents();"13"==y.data&&(r.deleteContents=function(){this.nativeRange.deleteContents();s(this)},r.extractContents=function(){var n=this.nativeRange.extractContents();return s(this),n});p.removeChild(v);p=null;w.isHostMethod(u,"createContextualFragment")&&(r.createContextualFragment=function(n){return this.nativeRange.createContextualFragment(n)});e(document).removeChild(h);r.getName=function(){return"WrappedRange"};n.WrappedRange=o;n.createNativeRange=function(n){return n=c(n,t,"createNativeRange"),n.createRange()}}();n.features.implementsTextRange&&(y=function(n){var r,f,u,e=n.parentElement(),t=n.duplicate();return t.collapse(!0),r=t.parentElement(),t=n.duplicate(),t.collapse(!1),f=t.parentElement(),u=r==f?r:i.getCommonAncestor(r,f),u==e?u:i.getCommonAncestor(e,u)},p=function(n){return 0==n.compareEndPoints("StartToEnd",n)},s=function(n,t,r,f,e){var o,k,s,p,it,w,d,nt,b,h,tt,c,a,g,y,rt,v=n.duplicate();if(v.collapse(r),o=v.parentElement(),i.isOrIsAncestorOf(t,o)||(o=t),!o.canHaveHTML)return k=new u(o.parentNode,i.getNodeIndex(o)),{boundaryPosition:k,nodeInfo:{nodeIndex:k.offset,containerElement:k.node}};for(s=i.getDocument(o).createElement("span"),s.parentNode&&s.parentNode.removeChild(s),it=r?"StartToStart":"StartToEnd",h=e&&e.containerElement==o?e.nodeIndex:0,tt=o.childNodes.length,c=tt,a=c;;){if(a==tt?o.appendChild(s):o.insertBefore(s,o.childNodes[a]),v.moveToElementText(s),p=v.compareEndPoints(it,n),0==p||h==c)break;if(-1==p){if(c==h+1)break;h=a}else c=c==h+1?h:a;a=Math.floor((h+c)/2);o.removeChild(s)}if(b=s.nextSibling,-1==p&&b&&l(b)){if(v.setEndPoint(r?"EndToStart":"EndToEnd",n),/[\r\n]/.test(b.data))for(y=v.duplicate(),rt=y.text.replace(/\r\n/g,"\r").length,g=y.moveStart("character",rt);-1==(p=y.compareEndPoints("StartToEnd",y));)g++,y.moveStart("character",1);else g=v.text.length;nt=new u(b,g)}else w=(f||!r)&&s.previousSibling,d=(f||r)&&s.nextSibling,nt=d&&l(d)?new u(d,0):w&&l(w)?new u(w,w.data.length):new u(o,i.getNodeIndex(s));return s.parentNode.removeChild(s),{boundaryPosition:nt,nodeInfo:{nodeIndex:a,containerElement:o}}},h=function(n,t){var u,f,r,s,h=n.offset,c=i.getDocument(n.node),o=e(c).createTextRange(),a=l(n.node);return a?(u=n.node,f=u.parentNode):(s=n.node.childNodes,u=h<s.length?s[h]:null,f=n.node),r=c.createElement("span"),r.innerHTML="&#feff;",u?f.insertBefore(r,u):f.appendChild(r),o.moveToElementText(r),o.collapse(!t),f.removeChild(r),a&&o[t?"moveStart":"moveEnd"]("character",h),o},r=function(n){this.textRange=n;this.refresh()},r.prototype=new f(document),r.prototype.refresh=function(){var n,t,i,r=y(this.textRange);p(this.textRange)?t=n=s(this.textRange,r,!0,!0).boundaryPosition:(i=s(this.textRange,r,!0,!1),n=i.boundaryPosition,t=s(this.textRange,r,!1,!1,i.nodeInfo).boundaryPosition);this.setStart(n.node,n.offset);this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},f.copyComparisonConstants(r),a=function(n){var i,r,t;return n.collapsed?h(new u(n.startContainer,n.startOffset),!0):(i=h(new u(n.startContainer,n.startOffset),!0),r=h(new u(n.endContainer,n.endOffset),!1),t=e(f.getRangeDocument(n)).createTextRange(),t.setEndPoint("StartToStart",i),t.setEndPoint("EndToEnd",r),t)},r.rangeToTextRange=a,r.prototype.toTextRange=function(){return a(this)},n.WrappedTextRange=r,(!n.features.implementsDomRange||n.config.preferTextRange)&&(v=function(){return this}(),void 0===v.Range&&(v.Range=r),n.createNativeRange=function(n){return n=c(n,t,"createNativeRange"),e(n).createTextRange()},n.WrappedRange=r));n.createRange=function(i){return i=c(i,t,"createRange"),new n.WrappedRange(n.createNativeRange(i))};n.createRangyRange=function(n){return n=c(n,t,"createRangyRange"),new f(n)};n.createIframeRange=function(i){return t.deprecationNotice("createIframeRange()","createRange(iframeEl)"),n.createRange(i)};n.createIframeRangyRange=function(i){return t.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),n.createRangyRange(i)};n.addShimListener(function(t){var i=t.document;void 0===i.createRange&&(i.createRange=function(){return n.createRange(i)});i=t=null})}),n.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(n,t){function wt(n){return"string"==typeof n?/^backward(s)?$/i.test(n):!!n}function ft(n,i){if(n){if(f.isWindow(n))return n;if(n instanceof o)return n.win;var r=f.getContentDocument(n,t,i);return f.getWindow(r)}return window}function bi(n){return ft(n,"getWinSelection").getSelection()}function oi(n){return ft(n,"getDocSelection").document.selection}function si(n){var t=!1;return n.anchorNode&&(t=1==f.comparePoints(n.anchorNode,n.anchorOffset,n.focusNode,n.focusOffset)),t}function d(n,t,i){var r=i?"end":"start",u=i?"start":"end";n.anchorNode=t[r+"Container"];n.anchorOffset=t[r+"Offset"];n.focusNode=t[u+"Container"];n.focusOffset=t[u+"Offset"]}function ki(n){var t=n.nativeSelection;n.anchorNode=t.anchorNode;n.anchorOffset=t.anchorOffset;n.focusNode=t.focusNode;n.focusOffset=t.focusOffset}function v(n){n.anchorNode=n.focusNode=null;n.anchorOffset=n.focusOffset=0;n.rangeCount=0;n.isCollapsed=!0;n._ranges.length=0}function bt(t){var i;return t instanceof w?(i=n.createNativeRange(t.getDocument()),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset)):t instanceof ot?i=t.nativeRange:r.implementsDomRange&&t instanceof f.getWindow(t.startContainer).Range&&(i=t),i}function di(n){if(!n.length||1!=n[0].nodeType)return!1;for(var t=1,i=n.length;i>t;++t)if(!f.isAncestorOf(n[0],n[t]))return!1;return!0}function kt(n){var i=n.getNodes();if(!di(i))throw t.createError("getSingleElementFromRange: range "+n.inspect()+" did not consist of a single element");return i[0]}function dt(n){return!!n&&void 0!==n.text}function hi(n,t){var i=new ot(t);n._ranges=[i];d(n,i,!1);n.rangeCount=1;n.isCollapsed=i.collapsed}function g(t){var i,u,f,r;if(t._ranges.length=0,"None"==t.docSelection.type)v(t);else if(i=t.docSelection.createRange(),dt(i))hi(t,i);else{for(t.rangeCount=i.length,f=e(i.item(0)),r=0;r<t.rangeCount;++r)u=n.createRange(f),u.selectNode(i.item(r)),t._ranges.push(u);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed;d(t,t._ranges[t.rangeCount-1],!1)}}function ci(n,i){for(var u=n.docSelection.createRange(),s=kt(i),h=e(u.item(0)),f=a(h).createControlRange(),r=0,o=u.length;o>r;++r)f.add(u.item(r));try{f.add(s)}catch(c){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}f.select();g(n)}function o(n,t,i){this.nativeSelection=n;this.docSelection=t;this._ranges=[];this.win=i;this.refresh()}function li(n){n.win=n.anchorNode=n.focusNode=n._ranges=null;n.rangeCount=n.anchorOffset=n.focusOffset=0;n.detached=!0}function gt(n,t){for(var i,r,u=k.length;u--;)if(i=k[u],r=i.selection,"deleteAll"==t)li(r);else if(i.win==n)return"delete"==t?(k.splice(u,1),!0):r;return"deleteAll"==t&&(k.length=0),null}function ai(n,i){for(var u,s=e(i[0].startContainer),o=a(s).createControlRange(),r=0,f=i.length;f>r;++r){u=kt(i[r]);try{o.add(u)}catch(h){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");}}o.select();g(n)}function vi(n,t){if(n.win.document!=e(t))throw new nt("WRONG_DOCUMENT_ERR");}function yi(t){return function(i,r){var u;this.rangeCount?(u=this.getRangeAt(0),u["set"+(t?"Start":"End")](i,r)):(u=n.createRange(this.win.document),u.setStartAndEnd(i,r));this.setSingleRange(u,this.isBackward())}}function pi(n){var t,i,r=[],u=new ti(n.anchorNode,n.anchorOffset),f=new ti(n.focusNode,n.focusOffset),e="function"==typeof n.getName?n.getName():"Selection";if(void 0!==n.rangeCount)for(t=0,i=n.rangeCount;i>t;++t)r[t]=w.inspect(n.getRangeAt(t));return"["+e+"(Ranges: "+r.join(", ")+")(anchor: "+u.inspect()+", focus: "+f.inspect()+"]"}var ni,et,f,y,c,w,ot,nt,ti,tt,st,r,l,e,a,ht,ct,s,b,u,ii,lt,p,it,ri,rt,ui,at,h,wi,vt,k,yt,i,fi,pt,ei,ut;if(n.config.checkSelectionRanges=!0,ni="boolean",et="number",f=n.dom,y=n.util,c=y.isHostMethod,w=n.DomRange,ot=n.WrappedRange,nt=n.DOMException,ti=f.DomPosition,r=n.features,l="Control",e=f.getDocument,a=f.getBody,ht=w.rangesEqual,ct=c(window,"getSelection"),s=y.isHostObject(document,"selection"),r.implementsWinGetSelection=ct,r.implementsDocSelection=s,b=s&&(!ct||n.config.preferTextRange),b?(tt=oi,n.isSelectionValid=function(n){var t=ft(n,"isSelectionValid").document,i=t.selection;return"None"!=i.type||e(i.createRange().parentElement())==t}):ct?(tt=bi,n.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),n.getNativeSelection=tt,u=tt(),ii=n.createNativeRange(document),lt=a(document),p=y.areHostProperties(u,["anchorNode","focusNode","anchorOffset","focusOffset"]),r.selectionHasAnchorAndFocus=p,it=c(u,"extend"),r.selectionHasExtend=it,ri=typeof u.rangeCount==et,r.selectionHasRangeCount=ri,rt=!1,ui=!0,at=it?function(t,i){var u=w.getRangeDocument(i),r=n.createRange(u);r.collapseToPoint(i.endContainer,i.endOffset);t.addRange(bt(r));t.extend(i.startContainer,i.startOffset)}:null,y.areHostMethods(u,["addRange","getRangeAt","removeAllRanges"])&&typeof u.rangeCount==et&&r.implementsDomRange&&!function(){var e,l,u,v,i,h,o,f,r,c,s,t=window.getSelection();if(t){for(e=t.rangeCount,l=e>1,u=[],v=si(t),i=0;e>i;++i)u[i]=t.getRangeAt(i);for(h=a(document),o=h.appendChild(document.createElement("div")),o.contentEditable="false",f=o.appendChild(document.createTextNode("Â Â Â ")),r=document.createRange(),r.setStart(f,1),r.collapse(!0),t.addRange(r),ui=1==t.rangeCount,t.removeAllRanges(),l||(c=window.navigator.appVersion.match(/Chrome\/(.*?) /),c&&parseInt(c[1])>=36?rt=!1:(s=r.cloneRange(),r.setStart(f,0),s.setEnd(f,3),s.setStart(f,2),t.addRange(r),t.addRange(s),rt=2==t.rangeCount)),h.removeChild(o),t.removeAllRanges(),i=0;e>i;++i)0==i&&v?at?at(t,u[i]):(n.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(u[i])):t.addRange(u[i])}}(),r.selectionSupportsMultipleRanges=rt,r.collapsedNonEditableSelectionsSupported=ui,h=!1,lt&&c(lt,"createControlRange")&&(wi=lt.createControlRange(),y.areHostProperties(wi,["item","add"])&&(h=!0)),r.implementsControlRange=h,st=p?function(n){return n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset}:function(n){return n.rangeCount?n.getRangeAt(n.rangeCount-1).collapsed:!1},c(u,"getRangeAt")?vt=function(n,t){try{return n.getRangeAt(t)}catch(i){return null}}:p&&(vt=function(t){var r=e(t.anchorNode),i=n.createRange(r);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),o.prototype=n.selectionPrototype,k=[],yt=function(n){var t,i,r;return n&&n instanceof o?(n.refresh(),n):(n=ft(n,"getNativeSelection"),t=gt(n),i=tt(n),r=s?oi(n):null,t?(t.nativeSelection=i,t.docSelection=r,t.refresh()):(t=new o(i,r,n),k.push({win:n,selection:t})),t)},n.getSelection=yt,n.getIframeSelection=function(i){return t.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),n.getSelection(f.getIframeWindow(i))},i=o.prototype,!b&&p&&y.areHostMethods(u,["removeAllRanges","addRange"]))i.removeAllRanges=function(){this.nativeSelection.removeAllRanges();v(this)},fi=function(n,t){at(n.nativeSelection,t);n.refresh()},i.addRange=ri?function(t,i){var u,r;h&&s&&this.docSelection.type==l?ci(this,t):wt(i)&&it?fi(this,t):(rt?u=this.rangeCount:(this.removeAllRanges(),u=0),this.nativeSelection.addRange(bt(t).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==u+1?(n.config.checkSelectionRanges&&(r=vt(this.nativeSelection,this.rangeCount-1),r&&!ht(r,t)&&(t=new ot(r))),this._ranges[this.rangeCount-1]=t,d(this,t,ut(this.nativeSelection)),this.isCollapsed=st(this)):this.refresh())}:function(n,t){wt(t)&&it?fi(this,n):(this.nativeSelection.addRange(bt(n)),this.refresh())},i.setRanges=function(n){if(h&&s&&n.length>1)ai(this,n);else{this.removeAllRanges();for(var t=0,i=n.length;i>t;++t)this.addRange(n[t])}};else{if(!(c(u,"empty")&&c(ii,"select")&&h&&b))return t.fail("No means of selecting a Range or TextRange was found"),!1;i.removeAllRanges=function(){var n,t,i;try{this.docSelection.empty();"None"!=this.docSelection.type&&(this.anchorNode?n=e(this.anchorNode):this.docSelection.type==l&&(t=this.docSelection.createRange(),t.length&&(n=e(t.item(0)))),n&&(i=a(n).createTextRange(),i.select(),this.docSelection.empty()))}catch(r){}v(this)};i.addRange=function(t){this.docSelection.type==l?ci(this,t):(n.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,d(this,t,!1))};i.setRanges=function(n){this.removeAllRanges();var t=n.length;t>1?ai(this,n):t&&this.addRange(n[0])}}if(i.getRangeAt=function(n){if(0>n||n>=this.rangeCount)throw new nt("INDEX_SIZE_ERR");return this._ranges[n].cloneRange()},b)pt=function(t){var i;n.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=a(t.win.document).createTextRange(),i.collapse(!0));t.docSelection.type==l?g(t):dt(i)?hi(t,i):v(t)};else if(c(u,"getRangeAt")&&typeof u.rangeCount==et)pt=function(t){if(h&&s&&t.docSelection.type==l)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,r=t.rangeCount;r>i;++i)t._ranges[i]=new n.WrappedRange(t.nativeSelection.getRangeAt(i));d(t,t._ranges[t.rangeCount-1],ut(t.nativeSelection));t.isCollapsed=st(t)}else v(t)};else{if(!p||typeof u.isCollapsed!=ni||typeof ii.collapsed!=ni||!r.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;pt=function(n){var t,i=n.nativeSelection;i.anchorNode?(t=vt(i,0),n._ranges=[t],n.rangeCount=1,ki(n),n.isCollapsed=st(n)):v(n)}}i.refresh=function(n){var t,i=n?this._ranges.slice(0):null,r=this.anchorNode,u=this.anchorOffset;if(pt(this),n){if((t=i.length,t!=this._ranges.length)||this.anchorNode!=r||this.anchorOffset!=u)return!0;for(;t--;)if(!ht(i[t],this._ranges[t]))return!0;return!1}};ei=function(n,t){var i,u,r=n.getAllRanges();for(n.removeAllRanges(),i=0,u=r.length;u>i;++i)ht(t,r[i])||n.addRange(r[i]);n.rangeCount||v(n)};i.removeRange=h&&s?function(n){var t,f,o,r,s,u,i,h;if(this.docSelection.type==l){for(t=this.docSelection.createRange(),f=kt(n),o=e(t.item(0)),r=a(o).createControlRange(),u=!1,i=0,h=t.length;h>i;++i)s=t.item(i),s!==f||u?r.add(t.item(i)):u=!0;r.select();g(this)}else ei(this,n)}:function(n){ei(this,n)};!b&&p&&r.implementsDomRange?(ut=si,i.isBackward=function(){return ut(this)}):ut=i.isBackward=function(){return!1};i.isBackwards=i.isBackward;i.toString=function(){for(var i=[],n=0,t=this.rangeCount;t>n;++n)i[n]=""+this._ranges[n];return i.join("")};i.collapse=function(t,i){vi(this,t);var r=n.createRange(t);r.collapseToPoint(t,i);this.setSingleRange(r);this.isCollapsed=!0};i.collapseToStart=function(){if(!this.rangeCount)throw new nt("INVALID_STATE_ERR");var n=this._ranges[0];this.collapse(n.startContainer,n.startOffset)};i.collapseToEnd=function(){if(!this.rangeCount)throw new nt("INVALID_STATE_ERR");var n=this._ranges[this.rangeCount-1];this.collapse(n.endContainer,n.endOffset)};i.selectAllChildren=function(t){vi(this,t);var i=n.createRange(t);i.selectNodeContents(t);this.setSingleRange(i)};i.deleteFromDocument=function(){var t,i,n,r,u;if(h&&s&&this.docSelection.type==l){for(t=this.docSelection.createRange();t.length;)i=t.item(0),t.remove(i),i.parentNode.removeChild(i);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),r=0,u=n.length;u>r;++r)n[r].deleteContents();this.addRange(n[u-1])}};i.eachRange=function(n,t){for(var i=0,r=this._ranges.length;r>i;++i)if(n(this.getRangeAt(i)))return t};i.getAllRanges=function(){var n=[];return this.eachRange(function(t){n.push(t)}),n};i.setSingleRange=function(n,t){this.removeAllRanges();this.addRange(n,t)};i.callMethodOnEachRange=function(n,t){var i=[];return this.eachRange(function(r){i.push(r[n].apply(r,t))}),i};i.setStart=yi(!0);i.setEnd=yi(!1);n.rangePrototype.select=function(n){yt(this.getDocument()).setSingleRange(this,n)};i.changeEachRange=function(n){var t=[],i=this.isBackward();this.eachRange(function(i){n(i);t.push(i)});this.removeAllRanges();i&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)};i.containsNode=function(n,t){return this.eachRange(function(i){return i.containsNode(n,t)},!0)||!1};i.getBookmark=function(n){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[n])}};i.moveToBookmark=function(t){for(var f,i,r=[],u=0;f=t.rangeBookmarks[u++];)i=n.createRange(this.win),i.moveToBookmark(f),r.push(i);t.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)};i.toHtml=function(){var n=[];return this.eachRange(function(t){n.push(w.toHtml(t))}),n.join("")};r.implementsTextRange&&(i.getNativeTextRange=function(){var r,i;if(r=this.docSelection){if(i=r.createRange(),dt(i))return i;throw t.createError("getNativeTextRange: selection is a control selection");}if(this.rangeCount>0)return n.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range");});i.getName=function(){return"WrappedSelection"};i.inspect=function(){return pi(this)};i.detach=function(){gt(this.win,"delete");li(this)};o.detachAll=function(){gt(null,"deleteAll")};o.inspect=pi;o.isDirectionBackward=wt;n.Selection=o;n.selectionPrototype=i;n.addShimListener(function(n){void 0===n.getSelection&&(n.getSelection=function(){return yt(n)});n=null})}),n)},this),function(n,t){"function"==typeof define&&define.amd?define(["rangy"],n):n(t.rangy)}(function(n){n.createModule("SaveRestore",["WrappedRange"],function(n,t){function i(n,t){return(t||document).getElementById(n)}function u(n,t){var i,f="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),r=y.getDocument(n.startContainer),u=n.cloneRange();return u.collapse(t),i=r.createElement("span"),i.id=f,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(r.createTextNode(p)),u.insertNode(i),i}function f(n,r,u,f){var e=i(u,n);e?(r[f?"setStartBefore":"setEndBefore"](e),e.parentNode.removeChild(e)):t.warn("Marker element has been removed. Cannot restore selection.")}function c(n,t){return t.compareBoundaryPoints(n.START_TO_START,n)}function e(t,i){var f,r,e=n.DomRange.getRangeDocument(t),o=""+t;return t.collapsed?(r=u(t,!1),{document:e,markerId:r.id,collapsed:!0}):(r=u(t,!1),f=u(t,!0),{document:e,startMarkerId:f.id,endMarkerId:r.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+o+"', new text: '"+t+"'"}})}function o(r,u){var o,e,s,h=r.document;return void 0===u&&(u=!0),o=n.createRange(h),r.collapsed?(e=i(r.markerId,h),e?(e.style.display="inline",s=e.previousSibling,s&&3==s.nodeType?(e.parentNode.removeChild(e),o.collapseToPoint(s,s.length)):(o.collapseBefore(e),e.parentNode.removeChild(e))):t.warn("Marker element has been removed. Cannot restore selection.")):(f(h,o,r.startMarkerId,!0),f(h,o,r.endMarkerId,!1)),u&&o.normalizeBoundaries(),o}function s(t,r){var f,s,u,h,o=[];for(t=t.slice(0),t.sort(c),u=0,h=t.length;h>u;++u)o[u]=e(t[u],r);for(u=h-1;u>=0;--u)f=t[u],s=n.DomRange.getRangeDocument(f),f.collapsed?f.collapseAfter(i(o[u].markerId,s)):(f.setEndBefore(i(o[u].endMarkerId,s)),f.setStartAfter(i(o[u].startMarkerId,s)));return o}function l(i){var r,u,f,e;return n.isSelectionValid(i)?(r=n.getSelection(i),u=r.getAllRanges(),f=1==u.length&&r.isBackward(),e=s(u,f),f?r.setSingleRange(u[0],"backward"):r.setRanges(u),{win:i,rangeInfos:e,restored:!1}):(t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null)}function h(n){for(var i=[],r=n.length,t=r-1;t>=0;t--)i[t]=o(n[t],!0);return i}function a(t,i){var r,u,f,e;t.restored||(r=t.rangeInfos,u=n.getSelection(t.win),f=h(r),e=r.length,1==e&&i&&n.features.selectionHasExtend&&r[0].backward?(u.removeAllRanges(),u.addRange(f[0],!0)):u.setRanges(f),t.restored=!0)}function r(n,t){var r=i(t,n);r&&r.parentNode.removeChild(r)}function v(n){for(var t,f=n.rangeInfos,i=0,u=f.length;u>i;++i)t=f[i],t.collapsed?r(n.doc,t.markerId):(r(n.doc,t.startMarkerId),r(n.doc,t.endMarkerId))}var y=n.dom,p="ï»¿";n.util.extend(n,{saveRange:e,restoreRange:o,saveRanges:s,restoreRanges:h,saveSelection:l,restoreSelection:a,removeMarkerElement:r,removeMarkers:v})})},this),Base=function(){},Base.extend=function(n,t){var r,u,i,f=Base.prototype.extend;return Base._prototyping=!0,r=new this,f.call(r,n),r.base=function(){},delete Base._prototyping,u=r.constructor,i=r.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==i)this._constructing=!0,u.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||f).call(arguments[0],r)},i.ancestor=this,i.extend=this.extend,i.forEach=this.forEach,i.implement=this.implement,i.prototype=r,i.toString=this.toString,i.valueOf=function(n){return"object"==n?i:u.valueOf()},f.call(i,t),"function"==typeof i.init&&i.init(),i},Base.prototype={extend:function(n,t){var r,f,u,e,o,s,i;if(arguments.length>1)r=this[n],!r||"function"!=typeof t||r.valueOf&&r.valueOf()==t.valueOf()||!/\bbase\b/.test(t)||(f=t.valueOf(),t=function(){var n,t=this.base||Base.prototype.base;return this.base=r,n=f.apply(this,arguments),this.base=t,n},t.valueOf=function(n){return"object"==n?t:f},t.toString=Base.toString),this[n]=t;else if(n){for(u=Base.prototype.extend,Base._prototyping||"function"==typeof this||(u=this.extend||u),e={toSource:null},o=["constructor","toString","valueOf"],s=Base._prototyping?0:1;i=o[s++];)n[i]!=e[i]&&u.call(this,i,n[i]);for(i in n)e[i]||u.call(this,i,n[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(n,t,i){for(var r in n)void 0===this.prototype[r]&&t.call(i,n[r],r,n)},implement:function(){for(var n=0;n<arguments.length;n++)"function"==typeof arguments[n]?arguments[n](this.prototype):this.prototype.extend(arguments[n]);return this},toString:function(){return this.valueOf()+""}}),wysihtml5.browser=function(){function e(n){return+(/ipad|iphone|ipod/.test(n)&&n.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function o(n){return+(n.match(/android (\d+)/)||[void 0,0])[1]}function n(n,t){var r,i=-1;return"Microsoft Internet Explorer"==navigator.appName?r=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(r=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")),r&&null!=r.exec(navigator.userAgent)&&(i=parseFloat(RegExp.$1)),-1===i?!1:n?t?"<"===t?i>n:">"===t?n>i:"<="===t?i>=n:">="===t?n>=i:void 0:n===i:!0}var t=navigator.userAgent,i=document.createElement("div"),r=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),f=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),u=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var n=this.USER_AGENT.toLowerCase(),t="contentEditable"in i,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,u=document.querySelector&&document.querySelectorAll,f=this.isIos()&&e(n)<5||this.isAndroid()&&o(n)<4||-1!==n.indexOf("opera mobi")||-1!==n.indexOf("hpwos/");return t&&r&&u&&!f},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return n()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return n()},hasCurrentStyleProperty:function(){return"currentStyle"in i},hasHistoryIssue:function(){return r&&"Mac"===navigator.platform.substr(0,3)},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(n){return"placeholder"in n},supportsEvent:function(n){return"on"+n in i||function(){return i.setAttribute("on"+n,"return;"),"function"==typeof i["on"+n]}()},supportsEventsInIframeCorrectly:function(){return!u},supportsHTML5Tags:function(n){var t=n.createElement("div"),i="<article>foo<\/article>";return t.innerHTML=i,t.innerHTML.toLowerCase()===i},supportsCommand:function(){var t={formatBlock:n(10,"<="),insertUnorderedList:n(),insertOrderedList:n()},i={insertHTML:r};return function(n,r){var u=t[r];if(!u){try{return n.queryCommandSupported(r)}catch(f){}try{return n.queryCommandEnabled(r)}catch(e){return!!i[r]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||u||f},supportsGetAttributeCorrectly:function(){var n=document.createElement("td");return"1"!=n.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||n()||u},autoScrollsToCaret:function(){return!f},autoClosesUnclosedTags:function(){var n,t,r=i.cloneNode(!1);return r.innerHTML="<p><div><\/div>",t=r.innerHTML.toLowerCase(),n="<p><\/p><div><\/div>"===t||"<p><div><\/div><\/p>"===t,this.autoClosesUnclosedTags=function(){return n},n},supportsNativeGetElementsByClassName:function(){return-1!==(document.getElementsByClassName+"").indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return u},supportsSpeechApiOn:function(n){var i=t.match(/Chrome\/(\d+)/)||[void 0,0];return i[1]>=11&&("onwebkitspeechchange"in n||"speech"in n)},crashesWhenDefineProperty:function(t){return n(9)&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return n()},hasProblemsSettingCaretAfterImg:function(){return n()},hasUndoInContextMenu:function(){return r||s||u},hasInsertNodeIssue:function(){return u},hasIframeFocusIssue:function(){return n()},createsNestedInvalidMarkupAfterPaste:function(){return f},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModenPaste:function(){return!("clipboardData"in window)}}}(),wysihtml5.lang.array=function(n){return{contains:function(t){if(Array.isArray(t)){for(var i=t.length;i--;)if(-1!==wysihtml5.lang.array(n).indexOf(t[i]))return!0;return!1}return-1!==wysihtml5.lang.array(n).indexOf(t)},indexOf:function(t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},without:function(t){t=wysihtml5.lang.array(t);for(var r=[],i=0,u=n.length;u>i;i++)t.contains(n[i])||r.push(n[i]);return r},get:function(){for(var t=0,r=n.length,i=[];r>t;t++)i.push(n[t]);return i},map:function(t,i){if(Array.prototype.map)return n.map(t,i);for(var u=n.length>>>0,f=Array(u),r=0;u>r;r++)f[r]=t.call(i,n[r],r,n);return f},unique:function(){for(var i=[],r=n.length,t=0;r>t;)wysihtml5.lang.array(i).contains(n[t])||i.push(n[t]),t++;return i}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(n,t){return this.events=this.events||{},this.events[n]=this.events[n]||[],this.events[n].push(t),this},off:function(n,t){this.events=this.events||{};var i,u,r=0;if(n){for(i=this.events[n]||[],u=[];r<i.length;r++)i[r]!==t&&t&&u.push(i[r]);this.events[n]=u}else this.events={};return this},fire:function(n,t){this.events=this.events||{};for(var r=this.events[n]||[],i=0;i<r.length;i++)r[i].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(n){return{merge:function(t){for(var i in t)n[i]=t[i];return this},get:function(){return n},clone:function(t){var i,r={};if(null===n||!wysihtml5.lang.object(n).isPlainObject())return n;for(i in n)n.hasOwnProperty(i)&&(r[i]=t?wysihtml5.lang.object(n[i]).clone(t):n[i]);return r},isArray:function(){return"[object Array]"===Object.prototype.toString.call(n)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(n)},isPlainObject:function(){return"[object Object]"===Object.prototype.toString.call(n)}}},function(){var n=/^\s+/,t=/\s+$/,i=/[&<>\t"]/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "};wysihtml5.lang.string=function(u){return u+="",{trim:function(){return u.replace(n,"").replace(t,"")},interpolate:function(n){for(var t in n)u=this.replace("#{"+t+"}").by(n[t]);return u},replace:function(n){return{by:function(t){return u.split(n).join(t)}}},escapeHTML:function(n,t){var f=u.replace(i,function(n){return r[n]});return n&&(f=f.replace(/(?:\r\n|\r|\n)/g,"<br />")),t&&(f=f.replace(/  /gi,"&nbsp; ")),f}}}}(),function(n){function e(n,t){return c(n,t)?n:(n===n.ownerDocument.documentElement&&(n=n.ownerDocument.body),i(n,t))}function o(n){return n.replace(t,function(n,t){var i,e,r=(t.match(u)||[])[1]||"",o=l[r];return t=t.replace(u,""),t.split(o).length>t.split(r).length&&(t+=r,r=""),i=t,e=t,t.length>f&&(e=e.substr(0,f)+"..."),"www."===i.substr(0,4)&&(i="http://"+i),'<a href="'+i+'">'+e+"<\/a>"+r})}function s(n){var t=n._wysihtml5_tempElement;return t||(t=n._wysihtml5_tempElement=n.createElement("div")),t}function h(t){var r=t.parentNode,u=n.lang.string(t.data).escapeHTML(),i=s(r.ownerDocument);for(i.innerHTML="<span><\/span>"+o(u),i.removeChild(i.firstChild);i.firstChild;)r.insertBefore(i.firstChild,t);r.removeChild(t)}function c(t,i){for(var u;t.parentNode;){if((t=t.parentNode,u=t.nodeName,t.className&&n.lang.array(t.className.split(" ")).contains(i))||r.contains(u))return!0;if("body"===u)return!1}return!1}function i(u,f){if(!(r.contains(u.nodeName)||u.className&&n.lang.array(u.className.split(" ")).contains(f))){if(u.nodeType===n.TEXT_NODE&&u.data.match(t))return h(u),void 0;for(var o=n.lang.array(u.childNodes).get(),s=o.length,e=0;s>e;e++)i(o[e],f);return u}}var r=n.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),t=/((https?:\/\/|www\.)[^\s<]{3,})/gi,u=/([^\w\/\-](,?))$/i,f=100,l={")":"(","]":"[","}":"{"};n.dom.autoLink=e;n.dom.autoLink.URL_REG_EXP=t}(wysihtml5),function(n){var t=n.dom;t.addClass=function(n,i){var r=n.classList;return r?r.add(i):(t.hasClass(n,i)||(n.className+=" "+i),void 0)};t.removeClass=function(n,t){var i=n.classList;return i?i.remove(t):(n.className=n.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),void 0)};t.hasClass=function(n,t){var i,r=n.classList;return r?r.contains(t):(i=n.className,i.length>0&&(i==t||RegExp("(^|\\s)"+t+"(\\s|$)").test(i)))}}(wysihtml5),wysihtml5.dom.contains=function(){var n=document.documentElement;return n.contains?function(n,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),n!==t&&n.contains(t)}:n.compareDocumentPosition?function(n,t){return!!(16&n.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function n(n,t){var i=n.createElement("li");return t.appendChild(i),i}function t(n,t){return n.createElement(t)}function i(i,r,u){if("UL"===i.nodeName||"OL"===i.nodeName||"MENU"===i.nodeName)return i;for(var l,v,o,s,h,y,p,f,a=i.ownerDocument,c=t(a,r),w=i.querySelectorAll("br"),b=w.length,e=0;b>e;e++)for(s=w[e];(h=s.parentNode)&&h!==i&&h.lastChild===s;){if("block"===wysihtml5.dom.getStyle("display").from(h)){h.removeChild(s);break}wysihtml5.dom.insert(s).after(s.parentNode)}for(l=wysihtml5.lang.array(i.childNodes).get(),v=l.length,e=0;v>e;e++)f=f||n(a,c),o=l[e],y="block"===wysihtml5.dom.getStyle("display").from(o),p="BR"===o.nodeName,!y||u&&wysihtml5.dom.hasClass(o,u)?p?f=f.firstChild?null:f:f.appendChild(o):(f=f.firstChild?n(a,c):f,f.appendChild(o),f=null);return 0===l.length&&n(a,c),i.parentNode.replaceChild(c,i),c}return i}(),wysihtml5.dom.copyAttributes=function(n){return{from:function(t){return{to:function(i){for(var r,u=0,f=n.length;f>u;u++)r=n[u],void 0!==t[r]&&""!==t[r]&&(i[r]=t[r]);return{andTo:arguments.callee}}}}}},function(n){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],i=function(t){return r(t)?parseInt(n.getStyle("width").from(t),10)<t.offsetWidth:!1},r=function(i){for(var r=0,u=t.length;u>r;r++)if("border-box"===n.getStyle(t[r]).from(i))return t[r]};n.copyStyles=function(r){return{from:function(u){i(u)&&(r=wysihtml5.lang.array(r).without(t));for(var f,o="",s=r.length,e=0;s>e;e++)f=r[e],o+=f+":"+n.getStyle(f).from(u)+";";return{to:function(t){return n.setStyles(o).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(n){n.dom.delegate=function(t,i,r,u){return n.dom.observe(t,r,function(r){for(var f=r.target,e=n.lang.array(t.querySelectorAll(i));f&&f!==t;){if(e.contains(f)){u.call(f,r);break}f=f.parentNode}})}}(wysihtml5),function(n){n.dom.domNode=function(t){var i=[n.ELEMENT_NODE,n.TEXT_NODE],r=function(t){return t.nodeType===n.TEXT_NODE&&/^\s*$/g.test(t.data)};return{prev:function(u){var f=t.previousSibling,e=u&&u.nodeTypes?u.nodeTypes:i;return f?!n.lang.array(e).contains(f.nodeType)||u&&u.ignoreBlankTexts&&r(f)?n.dom.domNode(f).prev(u):f:null},next:function(u){var f=t.nextSibling,e=u&&u.nodeTypes?u.nodeTypes:i;return f?!n.lang.array(e).contains(f.nodeType)||u&&u.ignoreBlankTexts&&r(f)?n.dom.domNode(f).next(u):f:null}}}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var t=function(n,t){var i=t.createElement("div");i.style.display="none";t.body.appendChild(i);try{i.innerHTML=n}catch(r){}return t.body.removeChild(i),i},i=function(t){if(!t._wysihtml5_supportsHTML5Tags){for(var i=0,r=n.length;r>i;i++)t.createElement(n[i]);t._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,r){r=r||document;var u;return"object"==typeof n&&n.nodeType?(u=r.createElement("div"),u.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(r)?(u=r.createElement("div"),u.innerHTML=n):(i(r),u=t(n,r)),u}}(),wysihtml5.dom.getParentElement=function(){function n(n,t){return t&&t.length?"string"==typeof t?n===t:wysihtml5.lang.array(t).contains(n):!0}function t(n){return n.nodeType===wysihtml5.ELEMENT_NODE}function i(n,t,i){var r=(n.className||"").match(i)||[];return t?r[r.length-1]===t:!!r.length}function r(n,t,i){var r=(n.getAttribute("style")||"").match(i)||[];return t?r[r.length-1]===t:!!r.length}return function(u,f,e,o){var s=f.cssStyle||f.styleRegExp,h=f.className||f.classRegExp;for(e=e||50;e--&&u&&"BODY"!==u.nodeName&&(!o||u!==o);){if(t(u)&&n(u.nodeName,f.nodeName)&&(!s||r(u,f.cssStyle,f.styleRegExp))&&(!h||i(u,f.className,f.classRegExp)))return u;u=u.parentNode}return null}}(),wysihtml5.dom.getStyle=function(){function n(n){return n.replace(i,function(n){return n.charAt(1).toUpperCase()})}var t={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},i=/\-[a-z]/g;return function(i){return{from:function(r){var f,e,u,o,s,h,c,l,a;if(r.nodeType===wysihtml5.ELEMENT_NODE){if(f=r.ownerDocument,e=t[i]||n(i),u=r.style,o=r.currentStyle,s=u[e],s)return s;if(o)try{return o[e]}catch(v){}return h=f.defaultView||f.parentWindow,c=("height"===i||"width"===i)&&"TEXTAREA"===r.nodeName,h.getComputedStyle?(c&&(l=u.overflow,u.overflow="hidden"),a=h.getComputedStyle(r,null).getPropertyValue(i),c&&(u.overflow=l||""),a):void 0}}}}}(),wysihtml5.dom.getTextNodes=function(n,t){var i=[];for(n=n.firstChild;n;n=n.nextSibling)3==n.nodeType?t&&/^\s*$/.test(n.innerText||n.textContent)||i.push(n):i=i.concat(wysihtml5.dom.getTextNodes(n,t));return i},wysihtml5.dom.hasElementWithTagName=function(){function t(n){return n._wysihtml5_identifier||(n._wysihtml5_identifier=i++)}var n={},i=1;return function(i,r){var f=t(i)+":"+r,u=n[f];return u||(u=n[f]=i.getElementsByTagName(r)),u.length>0}}(),function(n){function i(n){return n._wysihtml5_identifier||(n._wysihtml5_identifier=r++)}var t={},r=1;n.dom.hasElementWithClassName=function(r,u){if(!n.browser.supportsNativeGetElementsByClassName())return!!r.querySelector("."+u);var e=i(r)+":"+u,f=t[e];return f||(f=t[e]=r.getElementsByClassName(u)),f.length>0}}(wysihtml5),wysihtml5.dom.insert=function(n){return{after:function(t){t.parentNode.insertBefore(n,t.nextSibling)},before:function(t){t.parentNode.insertBefore(n,t)},into:function(t){t.appendChild(n)}}},wysihtml5.dom.insertCSS=function(n){return n=n.join("\n"),{into:function(t){var r,u,i=t.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),r=t.querySelector("head link"),r?(r.parentNode.insertBefore(i,r),void 0):(u=t.querySelector("head"),u&&u.appendChild(i),void 0)}}},function(n){n.dom.lineBreaks=function(t){function i(n){return"BR"===n.nodeName}function r(t){return i(t)?!0:"block"===n.dom.getStyle("display").from(t)?!0:!1}return{add:function(){var i=t.ownerDocument,u=n.dom.domNode(t).next({ignoreBlankTexts:!0}),f=n.dom.domNode(t).prev({ignoreBlankTexts:!0});u&&!r(u)&&n.dom.insert(i.createElement("br")).after(t);f&&!r(f)&&n.dom.insert(i.createElement("br")).before(t)},remove:function(){var r=n.dom.domNode(t).next({ignoreBlankTexts:!0}),u=n.dom.domNode(t).prev({ignoreBlankTexts:!0});r&&i(r)&&r.parentNode.removeChild(r);u&&i(u)&&u.parentNode.removeChild(u)}}}}(wysihtml5),wysihtml5.dom.observe=function(n,t,i){t="string"==typeof t?[t]:t;for(var r,u,f=0,e=t.length;e>f;f++)u=t[f],n.addEventListener?n.addEventListener(u,i,!1):(r=function(t){"target"in t||(t.target=t.srcElement);t.preventDefault=t.preventDefault||function(){this.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0};i.call(n,t)},n.attachEvent("on"+u,r));return{stop:function(){for(var u,f=0,e=t.length;e>f;f++)u=t[f],n.removeEventListener?n.removeEventListener(u,i,!1):n.detachEvent("on"+u,r)}}},wysihtml5.dom.parse=function(n,t){function c(n,t){var c,f,a,v,u,e,o,s,h;for(wysihtml5.lang.object(i).merge(tt).merge(t.rules).get(),c=t.context||n.ownerDocument||document,f=c.createDocumentFragment(),a="string"==typeof n,v=!1,t.clearInternals===!0&&(v=!0),u=a?wysihtml5.dom.getAsDom(n,c):n,i.selectors&&l(u,i.selectors);u.firstChild;)o=u.firstChild,e=r(o,t.cleanUp,v,t.uneditableClass),e&&f.appendChild(e),o!==e&&u.removeChild(o);if(t.unjoinNbsps)for(s=wysihtml5.dom.getTextNodes(f),h=s.length;h--;)s[h].nodeValue=s[h].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return u.innerHTML="",u.appendChild(f),a?wysihtml5.quirks.getCorrectInnerHTML(u):u}function r(n,t,i,f){var o,e,h,l=n.nodeType,c=n.childNodes,a=c.length,v=nt[l],s=0;if(f&&1===l&&wysihtml5.dom.hasClass(n,f))return n;if(e=v&&v(n,i),!e){if(e===!1){for(o=n.ownerDocument.createDocumentFragment(),s=a;s--;)c[s]&&(h=r(c[s],t,i,f),h&&(c[s]===h&&s--,o.insertBefore(h,o.firstChild)));return"block"===wysihtml5.dom.getStyle("display").from(n)&&o.appendChild(n.ownerDocument.createElement("br")),wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(n.nodeName.toLowerCase())&&n.parentNode.lastChild!==n&&(n.nextSibling&&3===n.nextSibling.nodeType&&/^\s/.test(n.nextSibling.nodeValue)||o.appendChild(n.ownerDocument.createTextNode(" "))),o.normalize&&o.normalize(),o}return null}for(s=0;a>s;s++)c[s]&&(h=r(c[s],t,i,f),h&&(c[s]===h&&s--,e.appendChild(h)));if(t&&e.nodeName.toLowerCase()===u&&(!e.childNodes.length||/^\s*$/gi.test(e.innerHTML)&&(i||"_wysihtml5-temp-placeholder"!==n.className&&"rangySelectionBoundary"!==n.className)||!e.attributes.length)){for(o=e.ownerDocument.createDocumentFragment();e.firstChild;)o.appendChild(e.firstChild);return o.normalize&&o.normalize(),o}return e.normalize&&e.normalize(),e}function l(n,t){var i,r,u,f;for(i in t)if(t.hasOwnProperty(i))for(wysihtml5.lang.object(t[i]).isFunction()?r=t[i]:"string"==typeof t[i]&&h[t[i]]&&(r=h[t[i]]),u=n.querySelectorAll(i),f=u.length;f--;)r(u[f])}function a(n,t){var r,f,s,h=i.tags,e=n.nodeName.toLowerCase(),o=n.scopeName;if(n._wysihtml5||(n._wysihtml5=1,"wysihtml5-temp"===n.className))return null;if(o&&"HTML"!=o&&(e=o+":"+e),"outerHTML"in n&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==n.nodeName||"<\/p>"===n.outerHTML.slice(-4).toLowerCase()||(e="div")),e in h){if(r=h[e],!r||r.remove)return null;if(r.unwrap)return!1;r="string"==typeof r?{rename_tag:r}:r}else{if(!n.firstChild)return null;r={rename_tag:u}}if(r.one_of_type&&!v(n,i,r.one_of_type,t)){if(!r.remove_action)return null;if("unwrap"===r.remove_action)return!1;if("rename"!==r.remove_action)return null;s=r.remove_action_rename_to||u}return f=n.ownerDocument.createElement(s||r.rename_tag||e),k(n,f,r,t),p(n,f,r),n=null,f.normalize&&f.normalize(),f}function v(n,t,i,r){var f,u;if("SPAN"===n.nodeName&&!r&&("_wysihtml5-temp-placeholder"===n.className||"rangySelectionBoundary"===n.className))return!0;for(u in i)if(i.hasOwnProperty(u)&&t.type_definitions&&t.type_definitions[u]&&(f=t.type_definitions[u],y(n,f)))return!0;return!1}function y(n,t){var v,i,e,c,l,o,h,a,r=n.getAttribute("class"),u=n.getAttribute("style");if(t.methods)for(o in t.methods)if(t.methods.hasOwnProperty(o)&&s[o]&&s[o](n))return!0;if(r&&t.classes)for(r=r.replace(/^\s+/g,"").replace(/\s+$/g,"").split(f),v=r.length,h=0;v>h;h++)if(t.classes[r[h]])return!0;if(u&&t.styles){u=u.split(";");for(i in t.styles)if(t.styles.hasOwnProperty(i))for(a=u.length;a--;)if(l=u[a].split(":"),l[0].replace(/\s/g,"").toLowerCase()===i&&(t.styles[i]===!0||1===t.styles[i]||wysihtml5.lang.array(t.styles[i]).contains(l[1].replace(/\s/g,"").toLowerCase())))return!0}if(t.attrs)for(e in t.attrs)if(t.attrs.hasOwnProperty(e)&&(c=wysihtml5.dom.getAttribute(n,e),"string"==typeof c&&c.search(t.attrs[e])>-1))return!0;return!1}function p(n,t,i){var r,u;if(i&&i.keep_styles)for(r in i.keep_styles)if(i.keep_styles.hasOwnProperty(r)){if(u="float"===r?n.style.styleFloat||n.style.cssFloat:n.style[r],i.keep_styles[r]instanceof RegExp&&!i.keep_styles[r].test(u))continue;"float"===r?t.style[n.style.styleFloat?"styleFloat":"cssFloat"]=u:n.style[r]&&(t.style[r]=u)}}function w(n,t){var i,r=[];for(i in t)t.hasOwnProperty(i)&&0===i.indexOf(n)&&r.push(i);return r}function o(n,t,i,r){var u,f=it[i];return f&&(t||"alt"===n&&"IMG"==r)&&(u=f(t),"string"==typeof u)?u:!1}function b(n,t){var r,u,e,f,l,a=wysihtml5.lang.object(i.attributes||{}).clone(),s=wysihtml5.lang.object(a).merge(wysihtml5.lang.object(t||{}).clone()).get(),h={},c=wysihtml5.dom.getAttributes(n);for(r in s)if(/\*$/.test(r))for(e=w(r.slice(0,-1),c),f=0,l=e.length;l>f;f++)u=o(e[f],c[e[f]],s[r],n.nodeName),u!==!1&&(h[e[f]]=u);else u=o(r,c[r],s[r],n.nodeName),u!==!1&&(h[r]=u);return h}function k(n,t,r,u){var p,h,w,s,c,e={},nt=r.set_class,k=r.add_class,d=r.add_style,tt=r.set_attributes,l=i.classes,a=0,o=[],g=[],v=[],y=[];if(tt&&(e=wysihtml5.lang.object(tt).clone()),e=wysihtml5.lang.object(e).merge(b(n,r.check_attributes)).get(),nt&&o.push(nt),k)for(s in k)c=ut[k[s]],c&&(w=c(wysihtml5.dom.getAttribute(n,s)),"string"==typeof w&&o.push(w));if(d)for(s in d)c=rt[d[s]],c&&(newStyle=c(wysihtml5.dom.getAttribute(n,s)),"string"==typeof newStyle&&g.push(newStyle));if("string"==typeof l&&"any"===l&&n.getAttribute("class"))if(i.classes_blacklist){for(y=n.getAttribute("class"),y&&(o=o.concat(y.split(f))),p=o.length;p>a;a++)h=o[a],i.classes_blacklist[h]||v.push(h);v.length&&(e["class"]=wysihtml5.lang.array(v).unique().join(" "))}else e["class"]=n.getAttribute("class");else{for(u||(l["_wysihtml5-temp-placeholder"]=1,l._rangySelectionBoundary=1,l["wysiwyg-tmp-selected-cell"]=1),y=n.getAttribute("class"),y&&(o=o.concat(y.split(f))),p=o.length;p>a;a++)h=o[a],l[h]&&v.push(h);v.length&&(e["class"]=wysihtml5.lang.array(v).unique().join(" "))}e["class"]&&u&&(e["class"]=e["class"].replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(e["class"])&&delete e["class"]);g.length&&(e.style=wysihtml5.lang.array(g).unique().join(" "));for(s in e)try{t.setAttribute(s,e[s])}catch(it){}e.src&&(void 0!==e.width&&t.setAttribute("width",e.width),void 0!==e.height&&t.setAttribute("height",e.height))}function d(n){var i,t=n.nextSibling;return t&&t.nodeType===wysihtml5.TEXT_NODE?(t.data=n.data.replace(e,"")+t.data.replace(e,""),void 0):(i=n.data.replace(e,""),n.ownerDocument.createTextNode(i))}function g(n){if(i.comments)return n.ownerDocument.createComment(n.nodeValue)}var nt={1:a,3:d,8:g},u="span",f=/\s+/,tt={tags:{},classes:{}},i={},e=/\uFEFF/g,it={url:function(){var n=/^https?:\/\//i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),src:function(){var n=/^(\/|https?:\/\/)/i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),href:function(){var n=/^(#|\/|https?:\/\/|mailto:)/i;return function(t){return t&&t.match(n)?t.replace(n,function(n){return n.toLowerCase()}):null}}(),alt:function(){var n=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(n,""):""}}(),numbers:function(){var n=/\D/g;return function(t){return t=(t||"").replace(n,""),t||null}}(),any:function(){return function(n){return n}}()},rt={align_text:function(){var n={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(t){return n[(t+"").toLowerCase()]}}()},ut={align_img:function(){var n={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return n[(t+"").toLowerCase()]}}(),align_text:function(){var n={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return n[(t+"").toLowerCase()]}}(),clear_br:function(){var n={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return n[(t+"").toLowerCase()]}}(),size_font:function(){var n={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return n[(t+"").charAt(0)]}}()},s={has_visible_contet:function(){var n,t=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(i){if(n=(i.innerText||i.textContent).replace(/\s/g,""),n&&n.length>0)return!0;for(var r=t.length;r--;)if(i.querySelector(t[r]))return!0;return i.offsetWidth&&i.offsetWidth>0&&i.offsetHeight&&i.offsetHeight>0?!0:!1}}()},h={unwrap:function(n){wysihtml5.dom.unwrap(n)},remove:function(n){n.parentNode.removeChild(n)}};return c(n,t)},wysihtml5.dom.removeEmptyTextNodes=function(n){for(var t,r=wysihtml5.lang.array(n.childNodes).get(),u=r.length,i=0;u>i;i++)t=r[i],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(n,t){for(var r,i=n.ownerDocument.createElement(t);r=n.firstChild;)i.appendChild(r);return wysihtml5.dom.copyAttributes(["align","className"]).from(n).to(i),n.parentNode.replaceChild(i,n),i},wysihtml5.dom.replaceWithChildNodes=function(n){if(n.parentNode){if(!n.firstChild)return n.parentNode.removeChild(n),void 0;for(var t=n.ownerDocument.createDocumentFragment();n.firstChild;)t.appendChild(n.firstChild);n.parentNode.replaceChild(t,n);n=t=null}},function(n){function t(t){return"block"===n.getStyle("display").from(t)}function i(n){return"BR"===n.nodeName}function r(n){var t=n.ownerDocument.createElement("br");n.appendChild(t)}function u(n,u){if(n.nodeName.match(/^(MENU|UL|OL)$/)){var e,c,l,a,s,f,v=n.ownerDocument,o=v.createDocumentFragment(),h=wysihtml5.dom.domNode(n).prev({ignoreBlankTexts:!0});if(u)for(!h||t(h)||i(h)||r(o);f=n.firstElementChild||n.firstChild;){for(c=f.lastChild;e=f.firstChild;)l=e===c,a=l&&!t(e)&&!i(e),o.appendChild(e),a&&r(o);f.parentNode.removeChild(f)}else for(;f=n.firstElementChild||n.firstChild;){if(f.querySelector&&f.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;e=f.firstChild;)o.appendChild(e);else{for(s=v.createElement("p");e=f.firstChild;)s.appendChild(e);o.appendChild(s)}f.parentNode.removeChild(f)}n.parentNode.replaceChild(o,n)}}n.resolveList=u}(wysihtml5.dom),function(n){var t=document,i=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],r=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],u=["referrer","write","open","close"];n.dom.Sandbox=Base.extend({constructor:function(t,i){this.callback=t||n.EMPTY_FUNCTION;this.config=n.lang.object({}).merge(i).get();this.editableArea=this._createIframe()},insertInto:function(n){"string"==typeof n&&(n=t.getElementById(n));n.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var n=this.getIframe();n.parentNode.removeChild(n)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet");},_createIframe:function(){var r=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",n.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),n.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html><\/html>'"),i.onload=function(){i.onreadystatechange=i.onload=null;r._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,r._onLoadIframe(i))},i},_onLoadIframe:function(f){var c,h,o,l,a,e,s;if(n.dom.contains(t.documentElement,f)){if(c=this,h=f.contentWindow,o=f.contentWindow.document,l=t.characterSet||t.charset||"utf-8",a=this._getHtml({charset:l,stylesheets:this.config.stylesheets}),o.open("text/html","replace"),o.write(a),o.close(),this.getWindow=function(){return f.contentWindow},this.getDocument=function(){return f.contentWindow.document},h.onerror=function(n,t,i){throw Error("wysihtml5.Sandbox: "+n,t,i);},!n.browser.supportsSandboxedIframes()){for(e=0,s=i.length;s>e;e++)this._unset(h,i[e]);for(e=0,s=r.length;s>e;e++)this._unset(h,r[e],n.EMPTY_FUNCTION);for(e=0,s=u.length;s>e;e++)this._unset(o,u[e]);this._unset(o,"cookie","",!0)}this.loaded=!0;setTimeout(function(){c.callback(c)},0)}},_getHtml:function(t){var u,i=t.stylesheets,f="",r=0;if(i="string"==typeof i?[i]:i,i)for(u=i.length;u>r;r++)f+='<link rel="stylesheet" href="'+i[r]+'">';return t.stylesheets=f,n.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}<\/head><body><\/body><\/html>').interpolate(t)},_unset:function(t,i,r,u){try{t[i]=r}catch(e){}try{t.__defineGetter__(i,function(){return r})}catch(e){}if(u)try{t.__defineSetter__(i,function(){})}catch(e){}if(!n.browser.crashesWhenDefineProperty(i))try{var f={get:function(){return r}};u&&(f.set=function(){});Object.defineProperty(t,i,f)}catch(e){}}})}(wysihtml5),function(n){var t=document;n.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView},getDocument:function(){return this.element.ownerDocument},constructor:function(t,i,r){this.callback=t||n.EMPTY_FUNCTION;this.config=n.lang.object({}).merge(i).get();this.element=r?this._bindElement(r):this._createElement()},_createElement:function(){var n=t.createElement("div");return n.className="wysihtml5-sandbox",this._loadElement(n),n},_bindElement:function(n){return n.className=n.className&&""!=n.className?n.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(n,!0),n},_loadElement:function(n,t){var i,r=this;t||(i=this._getHtml(),n.innerHTML=i);this.getWindow=function(){return n.ownerDocument.defaultView};this.getDocument=function(){return n.ownerDocument};this.loaded=!0;setTimeout(function(){r.callback(r)},0)},_getHtml:function(){return""}})}(wysihtml5),function(){var n={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(i){for(var r in t)i.setAttribute(n[r]||r,t[r])}}}}(),wysihtml5.dom.setStyles=function(n){return{on:function(t){var i,r=t.style;if("string"==typeof n)return r.cssText+=";"+n,void 0;for(i in n)"float"===i?(r.cssFloat=n[i],r.styleFloat=n[i]):r[i]=n[i]}}},function(n){n.simulatePlaceholder=function(t,i,r){var e="placeholder",u=function(){var t=i.element.offsetWidth>0&&i.element.offsetHeight>0;i.hasPlaceholderSet()&&(i.clear(),i.element.focus(),t&&setTimeout(function(){var n=i.selection.getSelection();n.focusNode&&n.anchorNode||i.selection.selectNode(i.element.firstChild||i.element)},0));i.placeholderSet=!1;n.removeClass(i.element,e)},f=function(){i.isEmpty()&&(i.placeholderSet=!0,i.setValue(r),n.addClass(i.element,e))};t.on("set_placeholder",f).on("unset_placeholder",u).on("focus:composer",u).on("paste:composer",u).on("blur:composer",f);f()}}(wysihtml5.dom),function(n){var t=document.documentElement;"textContent"in t?(n.setTextContent=function(n,t){n.textContent=t},n.getTextContent=function(n){return n.textContent}):"innerText"in t?(n.setTextContent=function(n,t){n.innerText=t},n.getTextContent=function(n){return n.innerText}):(n.setTextContent=function(n,t){n.nodeValue=t},n.getTextContent=function(n){return n.nodeValue})}(wysihtml5.dom),wysihtml5.dom.getAttribute=function(n,t){var i,r,u,f=!wysihtml5.browser.supportsGetAttributeCorrectly();return t=t.toLowerCase(),i=n.nodeName,"IMG"==i&&"src"==t&&wysihtml5.dom.isLoadedImage(n)===!0?n.src:f&&"outerHTML"in n?(r=n.outerHTML.toLowerCase(),u=-1!=r.indexOf(" "+t+"="),u?n.getAttribute(t):null):n.getAttribute(t)},wysihtml5.dom.getAttributes=function(n){var t,r=!wysihtml5.browser.supportsGetAttributeCorrectly(),u=n.nodeName,i=[];for(t in n.attributes)(n.attributes.hasOwnProperty&&n.attributes.hasOwnProperty(t)||!n.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n.attributes,t))&&n.attributes[t].specified&&("IMG"==u&&"src"==n.attributes[t].name.toLowerCase()&&wysihtml5.dom.isLoadedImage(n)===!0?i.src=n.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(n.attributes[t].name.toLowerCase())&&r?1!==n.attributes[t].value&&(i[n.attributes[t].name]=n.attributes[t].value):i[n.attributes[t].name]=n.attributes[t].value);return i},wysihtml5.dom.isLoadedImage=function(n){try{return n.complete&&!n.mozMatchesSelector(":-moz-broken")}catch(t){if(n.complete&&"complete"===n.readyState)return!0}},function(n){function e(n,t){for(var i,u,e=[],r=0,f=n.length;f>r;r++)if(i=n[r].querySelectorAll(t),i)for(u=i.length;u--;e.unshift(i[u]));return e}function u(n){n.parentNode.removeChild(n)}function r(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function o(n,t){for(var i=n.nextSibling;1!=i.nodeType;)if(i=i.nextSibling,!t||t==i.tagName.toLowerCase())return i;return null}var t=n.dom,f=function(n){this.el=n;this.isColspan=!1;this.isRowspan=!1;this.firstCol=!0;this.lastCol=!0;this.firstRow=!0;this.lastRow=!0;this.isReal=!0;this.spanCollection=[];this.modified=!1},i=function(n,i){n?(this.cell=n,this.table=t.getParentElement(n,{nodeName:["TABLE"]})):i&&(this.table=i,this.cell=this.table.querySelectorAll("th, td")[0])};i.prototype={addSpannedCellToMap:function(n,t,i,r,u,e){for(var s,h=[],c=i+(e?parseInt(e,10)-1:0),l=r+(u?parseInt(u,10)-1:0),o=i;c>=o;o++)for(void 0===t[o]&&(t[o]=[]),s=r;l>=s;s++)t[o][s]=new f(n),t[o][s].isColspan=u&&parseInt(u,10)>1,t[o][s].isRowspan=e&&parseInt(e,10)>1,t[o][s].firstCol=s==r,t[o][s].lastCol=s==l,t[o][s].firstRow=o==i,t[o][s].lastRow=o==c,t[o][s].isReal=s==r&&o==i,t[o][s].spanCollection=h,h.push(t[o][s])},setCellAsModified:function(n){if(n.modified=!0,n.spanCollection.length>0)for(var t=0,i=n.spanCollection.length;i>t;t++)n.spanCollection[t].modified=!0},setTableMap:function(){for(var c,s,o,u,i,e,h,r=[],l=this.getTableRows(),n=0;n<l.length;n++)for(c=l[n],s=this.getRowCells(c),i=0,void 0===r[n]&&(r[n]=[]),o=0;o<s.length;o++){for(u=s[o];void 0!==r[n][i];)i++;e=t.getAttribute(u,"colspan");h=t.getAttribute(u,"rowspan");e||h?(this.addSpannedCellToMap(u,r,n,i,e,h),i+=e?parseInt(e,10):1):(r[n][i]=new f(u),i++)}return this.map=r,r},getRowCells:function(t){var i=this.table.querySelectorAll("table"),r=i?e(i,"th, td"):[],u=t.querySelectorAll("th, td");return r.length>0?n.lang.array(u).without(r):u},getTableRows:function(){var t=this.table.querySelectorAll("table"),i=t?e(t,"tr"):[],r=this.table.querySelectorAll("tr");return i.length>0?n.lang.array(r).without(i):r},getMapIndex:function(n){for(var i,r=this.map.length,u=this.map&&this.map[0]?this.map[0].length:0,t=0;r>t;t++)for(i=0;u>i;i++)if(this.map[t][i].el===n)return{row:t,col:i};return!1},getElementAtIndex:function(n){return this.setTableMap(),this.map[n.row]&&this.map[n.row][n.col]&&this.map[n.row][n.col].el?this.map[n.row][n.col].el:null},getMapElsTo:function(n){var r,u,t,f,i,e,o=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(n),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(r=this.idx_start,this.idx_start=this.idx_end,this.idx_end=r),this.idx_start.col>this.idx_end.col&&(u=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=u),null!=this.idx_start&&null!=this.idx_end)for(t=this.idx_start.row,f=this.idx_end.row;f>=t;t++)for(i=this.idx_start.col,e=this.idx_end.col;e>=i;i++)o.push(this.map[t][i].el);return o},orderSelectionEnds:function(n){var t,i;return this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(n),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(i=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=i),{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(n,t,i){for(var r,u,e=this.table.ownerDocument,o=e.createDocumentFragment(),f=0;t>f;f++){if(r=e.createElement(n),i)for(u in i)i.hasOwnProperty(u)&&r.setAttribute(u,i[u]);r.appendChild(document.createTextNode("Â "));o.appendChild(r)}return o},correctColIndexForUnreals:function(n,t){for(var f=this.map[t],r=-1,i=0,u=n;n>i;i++)f[i].isReal&&r++;return r},getLastNewCellOnRow:function(n,t){for(var r,u,e=this.getRowCells(n),i=0,f=e.length;f>i;i++)if(r=e[i],u=this.getMapIndex(r),u===!1||void 0!==t&&u.row!=t)return r;return null},removeEmptyTable:function(){var n=this.table.querySelectorAll("td, th");return n&&0!=n.length?!1:(u(this.table),!0)},splitRowToCells:function(n){var i,u,f;n.isColspan&&(i=parseInt(t.getAttribute(n.el,"colspan")||1,10),u=n.el.tagName.toLowerCase(),i>1&&(f=this.createCells(u,i-1),r(n.el,f)),n.el.removeAttribute("colspan"))},getRealRowEl:function(n,i){var u,e,r=null,f=null;for(i=i||this.idx,u=0,e=this.map[i.row].length;e>u;u++)if(f=this.map[i.row][u],f.isReal&&(r=t.getParentElement(f.el,{nodeName:["TR"]}),r))return r;return null===r&&n&&(r=t.getParentElement(this.map[i.row][i.col].el,{nodeName:["TR"]})||null),r},injectRowAt:function(n,i,u,f,e){var s,h,o=this.getRealRowEl(!1,{row:n,col:i}),c=this.createCells(f,u);o?(s=this.correctColIndexForUnreals(i,n),s>=0?r(this.getRowCells(o)[s],c):o.insertBefore(c,o.firstChild)):(h=this.table.ownerDocument.createElement("tr"),h.appendChild(c),r(t.getParentElement(e.el,{nodeName:["TR"]}),h))},canMerge:function(n){var r,u,t,f,i,e;for(this.to=n,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(r=this.idx_start,this.idx_start=this.idx_end,this.idx_end=r),this.idx_start.col>this.idx_end.col&&(u=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=u),t=this.idx_start.row,f=this.idx_end.row;f>=t;t++)for(i=this.idx_start.col,e=this.idx_end.col;e>=i;i++)if(this.map[t][i].isColspan||this.map[t][i].isRowspan)return!1;return!0},decreaseCellSpan:function(n,i){var r=parseInt(t.getAttribute(n.el,i),10)-1;r>=1?n.el.setAttribute(i,r):(n.el.removeAttribute(i),"colspan"==i&&(n.isColspan=!1),"rowspan"==i&&(n.isRowspan=!1),n.firstCol=!0,n.lastCol=!0,n.firstRow=!0,n.lastRow=!0,n.isReal=!0)},removeSurplusLines:function(){var n,f,i,e,r,o,s,h;if(this.setTableMap(),this.map){for(i=0,e=this.map.length;e>i;i++){for(n=this.map[i],s=!0,r=0,o=n.length;o>r;r++)if(f=n[r],!(t.getAttribute(f.el,"rowspan")&&parseInt(t.getAttribute(f.el,"rowspan"),10)>1&&f.firstRow!==!0)){s=!1;break}if(s)for(r=0;o>r;r++)this.decreaseCellSpan(n[r],"rowspan")}for(h=this.getTableRows(),i=0,e=h.length;e>i;i++)n=h[i],0==n.childNodes.length&&/^\s*$/.test(n.textContent||n.innerText)&&u(n)}},fillMissingCells:function(){var i,n,t,e=0,o=0,u=null;if(this.setTableMap(),this.map){for(e=this.map.length,i=0;e>i;i++)this.map[i].length>o&&(o=this.map[i].length);for(n=0;e>n;n++)for(t=0;o>t;t++)this.map[n]&&!this.map[n][t]&&t>0&&(this.map[n][t]=new f(this.createCells("td",1)),u=this.map[n][t-1],u&&u.el&&u.el.parent&&r(this.map[n][t-1].el,this.map[n][t].el))}},rectify:function(){return this.removeEmptyTable()?!1:(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){var n,u,f,r,i,e;if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){if(n=this.map[this.idx.row][this.idx.col],u=t.getAttribute(n.el,"colspan")?parseInt(t.getAttribute(n.el,"colspan"),10):1,f=n.el.tagName.toLowerCase(),n.isRowspan){if(r=parseInt(t.getAttribute(n.el,"rowspan"),10),r>1)for(i=1,e=r-1;e>=i;i++)this.injectRowAt(this.idx.row+i,this.idx.col,u,f,n);n.el.removeAttribute("rowspan")}this.splitRowToCells(n)}},merge:function(n){var r,f,t,e,i,o;if(this.rectify())if(this.canMerge(n)){for(r=this.idx_end.row-this.idx_start.row+1,f=this.idx_end.col-this.idx_start.col+1,t=this.idx_start.row,e=this.idx_end.row;e>=t;t++)for(i=this.idx_start.col,o=this.idx_end.col;o>=i;i++)t==this.idx_start.row&&i==this.idx_start.col?(r>1&&this.map[t][i].el.setAttribute("rowspan",r),f>1&&this.map[t][i].el.setAttribute("colspan",f)):(/^\s*<br\/?>\s*$/.test(this.map[t][i].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[t][i].el.innerHTML),u(this.map[t][i].el));this.rectify()}else window.console&&void 0},collapseCellToNextRow:function(n){var i,u,f,s=this.getMapIndex(n.el),e=s.row+1,o={row:e,col:s.col};e<this.map.length&&(i=this.getRealRowEl(!1,o),null!==i&&(u=this.correctColIndexForUnreals(o.col,o.row),u>=0?r(this.getRowCells(i)[u],n.el):(f=this.getLastNewCellOnRow(i,e),null!==f?r(f,n.el):i.insertBefore(n.el,i.firstChild)),parseInt(t.getAttribute(n.el,"rowspan"),10)>2?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)-1):n.el.removeAttribute("rowspan")))},removeRowCell:function(n){n.isReal?n.isRowspan?this.collapseCellToNextRow(n):u(n.el):parseInt(t.getAttribute(n.el,"rowspan"),10)>2?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)-1):n.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var t,n,i,r=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(t=this.map[this.idx.row],n=0,i=t.length;i>n;n++)t[n].isReal&&r.push(t[n].el);return r},getColumnElementsByCell:function(){var n,t,i=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(n=0,t=this.map.length;t>n;n++)this.map[n][this.idx.col]&&this.map[n][this.idx.col].isReal&&i.push(this.map[n][this.idx.col].el);return i},removeRow:function(){var i,n,r,f=t.getParentElement(this.cell,{nodeName:["TR"]});if(f){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(i=this.map[this.idx.row],n=0,r=i.length;r>n;n++)i[n].modified||(this.setCellAsModified(i[n]),this.removeRowCell(i[n]));u(f)}},removeColCell:function(n){n.isColspan?parseInt(t.getAttribute(n.el,"colspan"),10)>2?n.el.setAttribute("colspan",parseInt(t.getAttribute(n.el,"colspan"),10)-1):n.el.removeAttribute("colspan"):n.isReal&&u(n.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var n=0,t=this.map.length;t>n;n++)this.map[n][this.idx.col].modified||(this.setCellAsModified(this.map[n][this.idx.col]),this.removeColCell(this.map[n][this.idx.col]))},remove:function(n){if(this.rectify()){switch(n){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(n){var u,f,i,o,e,s=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==n&&t.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(t.getAttribute(this.cell,"rowspan"),10)-1),this.idx!==!1){for(u=this.map[this.idx.row],f=s.createElement("tr"),i=0,o=u.length;o>i;i++)u[i].modified||(this.setCellAsModified(u[i]),this.addRowCell(u[i],f,n));switch(n){case"below":r(this.getRealRowEl(!0),f);break;case"above":e=t.getParentElement(this.map[this.idx.row][this.idx.col].el,{nodeName:["TR"]});e&&e.parentNode.insertBefore(f,e)}}},addRowCell:function(n,i,r){var u=n.isColspan?{colspan:t.getAttribute(n.el,"colspan")}:null;n.isReal?"above"!=r&&n.isRowspan?n.el.setAttribute("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)+1):i.appendChild(this.createCells("td",1,u)):"above"!=r&&n.isRowspan&&n.lastRow?i.appendChild(this.createCells("td",1,u)):c.isRowspan&&n.el.attr("rowspan",parseInt(t.getAttribute(n.el,"rowspan"),10)+1)},add:function(n){this.rectify()&&(("below"==n||"above"==n)&&this.addRow(n),("before"==n||"after"==n)&&this.addColumn(n))},addColCell:function(n,i,u){var f,e=n.el.tagName.toLowerCase();switch(u){case"before":f=!n.isColspan||n.firstCol;break;case"after":f=!n.isColspan||n.lastCol||n.isColspan&&c.el==this.cell}if(f){switch(u){case"before":n.el.parentNode.insertBefore(this.createCells(e,1),n.el);break;case"after":r(n.el,this.createCells(e,1))}n.isRowspan&&this.handleCellAddWithRowspan(n,i+1,u)}else n.el.setAttribute("colspan",parseInt(t.getAttribute(n.el,"colspan"),10)+1)},addColumn:function(n){var u,r,i,f;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==n&&t.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(t.getAttribute(this.cell,"colspan"),10)-1),this.idx!==!1)for(i=0,f=this.map.length;f>i;i++)u=this.map[i],u[this.idx.col]&&(r=u[this.idx.col],r.modified||(this.setCellAsModified(r),this.addColCell(r,i,n)))},handleCellAddWithRowspan:function(n,i,u){for(var f,s,l,a=parseInt(t.getAttribute(this.cell,"rowspan"),10)-1,e=t.getParentElement(n.el,{nodeName:["TR"]}),c=n.el.tagName.toLowerCase(),v=this.table.ownerDocument,h=0;a>h;h++)if(f=this.correctColIndexForUnreals(this.idx.col,i+h),e=o(e,"tr"),e)if(f>0)switch(u){case"before":s=this.getRowCells(e);f>0&&this.map[i+h][this.idx.col].el!=s[f]&&f==s.length-1?r(s[f],this.createCells(c,1)):s[f].parentNode.insertBefore(this.createCells(c,1),s[f]);break;case"after":r(this.getRowCells(e)[f],this.createCells(c,1))}else e.insertBefore(this.createCells(c,1),e.firstChild);else l=v.createElement("tr"),l.appendChild(this.createCells(c,1)),this.table.appendChild(l)}};t.table={getCellsBetween:function(n,t){var r=new i(n);return r.getMapElsTo(t)},addCells:function(n,t){var r=new i(n);r.add(t)},removeCells:function(n,t){var r=new i(n);r.remove(t)},mergeCellsBetween:function(n,t){var r=new i(n);r.merge(t)},unmergeCell:function(n){var t=new i(n);t.unmerge()},orderSelectionEnds:function(n,t){var r=new i(n);return r.orderSelectionEnds(t)},indexOf:function(n){var t=new i(n);return t.setTableMap(),t.getMapIndex(n)},findCell:function(n,t){var r=new i(null,n);return r.getElementAtIndex(t)},findRowByCell:function(n){var t=new i(n);return t.getRowElementsByCell()},findColumnByCell:function(n){var t=new i(n);return t.getColumnElementsByCell()},canMerge:function(n,t){var r=new i(n);return r.canMerge(t)}}}(wysihtml5),wysihtml5.dom.query=function(n,t){var i,r,f,u,e=[];for(n.nodeType&&(n=[n]),r=0,f=n.length;f>r;r++)if(i=n[r].querySelectorAll(t),i)for(u=i.length;u--;e.unshift(i[u]));return e},wysihtml5.dom.compareDocumentPosition=function(){var n=document.documentElement;return n.compareDocumentPosition?function(n,t){return n.compareDocumentPosition(t)}:function(n,t){var o,s,i,r,u,f,e,h,c;if(o=9===n.nodeType?n:n.ownerDocument,s=9===t.nodeType?t:t.ownerDocument,n===t)return 0;if(n===t.ownerDocument)return 20;if(n.ownerDocument===t)return 10;if(o!==s)return 1;if(2===n.nodeType&&n.childNodes&&-1!==wysihtml5.lang.array(n.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==wysihtml5.lang.array(t.childNodes).indexOf(n))return 10;for(i=n,r=[],u=null;i;){if(i==t)return 10;r.push(i);i=i.parentNode}for(i=t,u=null;i;){if(i==n)return 20;if(f=wysihtml5.lang.array(r).indexOf(i),-1!==f)return e=r[f],h=wysihtml5.lang.array(e.childNodes).indexOf(r[f-1]),c=wysihtml5.lang.array(e.childNodes).indexOf(u),h>c?2:4;u=i;i=i.parentNode}return 1}}(),wysihtml5.dom.unwrap=function(n){if(n.parentNode){for(;n.lastChild;)wysihtml5.dom.insert(n.lastChild).after(n);n.parentNode.removeChild(n)}},wysihtml5.dom.getPastedHtml=function(n){var t;return n.clipboardData&&(wysihtml5.lang.array(n.clipboardData.types).contains("text/html")?t=n.clipboardData.getData("text/html"):wysihtml5.lang.array(n.clipboardData.types).contains("text/plain")&&(t=wysihtml5.lang.string(n.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),t},wysihtml5.dom.getPastedHtmlWithDiv=function(n,t){var u=n.selection.getBookmark(),r=n.element.ownerDocument,i=r.createElement("DIV");r.body.appendChild(i);i.style.width="1px";i.style.height="1px";i.style.overflow="hidden";i.setAttribute("contenteditable","true");i.focus();setTimeout(function(){n.selection.setBookmark(u);t(i.innerHTML);i.parentNode.removeChild(i)},0)},wysihtml5.quirks.cleanPastedHTML=function(){var n=function(n){var t=wysihtml5.lang.string(n).trim(),i=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return RegExp("^((?!^"+i+"$).)*$","i")},t=function(t,i){var u,f,r=wysihtml5.lang.object(t).clone(!0);for(u in r.tags)if(r.tags.hasOwnProperty(u)&&r.tags[u].keep_styles)for(f in r.tags[u].keep_styles)r.tags[u].keep_styles.hasOwnProperty(f)&&i[f]&&(r.tags[u].keep_styles[f]=n(i[f]));return r},i=function(n,t){var r,i,u;if(!n)return null;for(i=0,u=n.length;u>i;i++)if(n[i].condition||(r=n[i].set),n[i].condition&&n[i].condition.test(t))return n[i].set;return r};return function(n,r){var u,f={color:wysihtml5.dom.getStyle("color").from(r.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(r.referenceNode)},e=t(i(r.rules,n)||{},f);return u=wysihtml5.dom.parse(n,{rules:e,cleanUp:!0,context:r.referenceNode.ownerDocument,uneditableClass:r.uneditableClass,clearInternals:!0,unjoinNbsps:!0}),u}}(),wysihtml5.quirks.ensureProperClearing=function(){var n=function(){var n=this;setTimeout(function(){var t=n.innerHTML.toLowerCase();("<p>&nbsp;<\/p>"==t||"<p>&nbsp;<\/p><p>&nbsp;<\/p>"==t)&&(n.innerHTML="")},0)};return function(t){wysihtml5.dom.observe(t.element,["cut","keydown"],n)}}(),function(n){var t="%7E";n.quirks.getCorrectInnerHTML=function(i){var f,e,o,s,r,u=i.innerHTML;if(-1===u.indexOf(t))return u;for(f=i.querySelectorAll("[href*='~'], [src*='~']"),r=0,s=f.length;s>r;r++)e=f[r].href||f[r].src,o=n.lang.string(e).replace("~").by(t),u=n.lang.string(u).replace(o).by(e);return u}}(wysihtml5),function(n){var t="wysihtml5-quirks-redraw";n.quirks.redraw=function(i){n.dom.addClass(i,t);n.dom.removeClass(i,t);try{var r=i.ownerDocument;r.execCommand("italic",!1,null);r.execCommand("italic",!1,null)}catch(u){}}}(wysihtml5),wysihtml5.quirks.tableCellsSelection=function(n,t){function c(){return r.observe(n,"mousedown",function(n){var t=wysihtml5.dom.getParentElement(n.target,{nodeName:["TD","TH"]});t&&l(t)}),i}function l(e){i.start=e;i.end=e;i.cells=[e];i.table=r.getParentElement(i.start,{nodeName:["TABLE"]});i.table&&(f(),r.addClass(e,u),s=r.observe(n,"mousemove",a),h=r.observe(n,"mouseup",v),t.fire("tableselectstart").fire("tableselectstart:composer"))}function f(){var t,i;if(n&&(t=n.querySelectorAll("."+u),t.length>0))for(i=0;i<t.length;i++)r.removeClass(t[i],u)}function e(n){for(var t=0;t<n.length;t++)r.addClass(n[t],u)}function a(n){var s,o=null,u=r.getParentElement(n.target,{nodeName:["TD","TH"]});u&&i.table&&i.start&&(o=r.getParentElement(u,{nodeName:["TABLE"]}),o&&o===i.table&&(f(),s=i.end,i.end=u,i.cells=r.table.getCellsBetween(i.start,u),i.cells.length>1&&t.composer.selection.deselect(),e(i.cells),i.end!==s&&t.fire("tableselectchange").fire("tableselectchange:composer")))}function v(){s.stop();h.stop();t.fire("tableselect").fire("tableselect:composer");setTimeout(function(){o()},0)}function o(){var u=r.observe(n.ownerDocument,"click",function(n){u.stop();r.getParentElement(n.target,{nodeName:["TABLE"]})!=i.table&&(f(),i.table=null,i.start=null,i.end=null,t.fire("tableunselect").fire("tableunselect:composer"))})}function y(n,u){i.start=n;i.end=u;i.table=r.getParentElement(i.start,{nodeName:["TABLE"]});selectedCells=r.table.getCellsBetween(i.start,i.end);e(selectedCells);o();t.fire("tableselect").fire("tableselect:composer")}var r=wysihtml5.dom,i={table:null,start:null,end:null,cells:null,select:y},u="wysiwyg-tmp-selected-cell",s=null,h=null;return c()},function(n){var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,i=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,r=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,u=/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,f=function(n){return RegExp("(^|\\s|;)"+n+"\\s*:\\s*[^;$]+","gi")};n.quirks.styleParser={parseColor:function(e,o){var h,s,l,v=f(o),c=e.match(v),a=10;if(c){for(l=c.length;l--;)c[l]=n.lang.string(c[l].split(":")[1]).trim();if(h=c[c.length-1],t.test(h))s=h.match(t);else if(i.test(h))s=h.match(i);else if(r.test(h))s=h.match(r),a=16;else if(u.test(h))return s=h.match(u),s.shift(),s.push(1),n.lang.array(s).map(function(n,t){return 3>t?16*parseInt(n,16)+parseInt(n,16):parseFloat(n)});if(s)return s.shift(),s[3]||s.push(1),n.lang.array(s).map(function(n,t){return 3>t?parseInt(n,a):parseFloat(n)})}return!1},unparseColor:function(n,t){if(t){if("hex"==t)return n[0].toString(16).toUpperCase()+n[1].toString(16).toUpperCase()+n[2].toString(16).toUpperCase();if("hash"==t)return"#"+n[0].toString(16).toUpperCase()+n[1].toString(16).toUpperCase()+n[2].toString(16).toUpperCase();if("rgb"==t)return"rgb("+n[0]+","+n[1]+","+n[2]+")";if("rgba"==t)return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")";if("csv"==t)return n[0]+","+n[1]+","+n[2]+","+n[3]}return n[3]&&1!==n[3]?"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")":"rgb("+n[0]+","+n[1]+","+n[2]+")"},parseFontSize:function(t){var i=t.match(f("font-size"));return i?n.lang.string(i[i.length-1].split(":")[1]).trim():!1}}}(wysihtml5),function(n){function u(n){var t=0;if(n.parentNode)do t+=n.offsetTop||0,n=n.offsetParent;while(n);return t}function i(n,t){for(var i=0;t!==n;)if(i++,t=t.parentNode,!t)throw Error("not a descendant of ancestor!");return i}function r(n){if(!n.canSurroundContents())for(var t=n.commonAncestorContainer,r=i(t,n.startContainer),u=i(t,n.endContainer);!n.canSurroundContents();)r>u?(n.setStartBefore(n.startContainer),r=i(t,n.startContainer)):(n.setEndAfter(n.endContainer),u=i(t,n.endContainer))}var t=n.dom;n.Selection=Base.extend({constructor:function(n,t,i){window.rangy.init();this.editor=n;this.composer=n.composer;this.doc=this.composer.doc;this.contain=t;this.unselectableClass=i||!1},getBookmark:function(){var n=this.getRange();return n&&r(n),n&&n.cloneRange()},setBookmark:function(n){n&&this.setSelection(n)},setBefore:function(n){var t=rangy.createRange(this.doc);return t.setStartBefore(n),t.setEndBefore(n),this.setSelection(t)},setAfter:function(n){var t=rangy.createRange(this.doc);return t.setStartAfter(n),t.setEndAfter(n),this.setSelection(t)},selectNode:function(i,r){var u=rangy.createRange(this.doc),e=i.nodeType===n.ELEMENT_NODE,f="canHaveHTML"in i?i.canHaveHTML:"IMG"!==i.nodeName,s=e?i.innerHTML:i.data,o=""===s||s===n.INVISIBLE_SPACE,h=t.getStyle("display").from(i),c="block"===h||"list-item"===h;if(o&&e&&f&&!r)try{i.innerHTML=n.INVISIBLE_SPACE}catch(l){}f?u.selectNodeContents(i):u.selectNode(i);f&&o&&e?u.collapse(c):f&&o&&(u.setStartAfter(i),u.setEndAfter(i));this.setSelection(u)},getSelectedNode:function(n){var i,t;return n&&this.doc.selection&&"Control"===this.doc.selection.type&&(t=this.doc.selection.createRange(),t&&t.length)?t.item(0):(i=this.getSelection(this.doc),i.focusNode===i.anchorNode?i.focusNode:(t=this.getRange(this.doc),t?t.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var n=this.getRange();r(n);this.setSelection(n)},getSelectedOwnNodes:function(){for(var i=this.getOwnRanges(),r=[],n=0,t=i.length;t>n;n++)r.push(i[n].commonAncestorContainer||this.doc.body);return r},findNodesInSelection:function(t){for(var u,e=this.getOwnRanges(),r=[],i=0,f=e.length;f>i;i++)u=e[i].getNodes([1],function(i){return n.lang.array(t).contains(i.nodeName)}),r=r.concat(u);return r},containsUneditable:function(){for(var i=this.getOwnUneditables(),r=this.getSelection(),n=0,t=i.length;t>n;n++)if(r.containsNode(i[n]))return!0;return!1},deleteContents:function(){for(var t=this.getOwnRanges(),n=t.length;n--;)t[n].deleteContents();this.setSelection(t[0])},getPreviousNode:function(t,i){var f,r,u;return t||(f=this.getSelection(),t=f.anchorNode),t===this.contain?!1:(r=t.previousSibling,r===this.contain?!1:(r&&3!==r.nodeType&&1!==r.nodeType?r=this.getPreviousNode(r,i):r&&3===r.nodeType&&/^\s*$/.test(r.textContent)?r=this.getPreviousNode(r,i):i&&r&&1===r.nodeType&&!n.lang.array(["BR","HR","IMG"]).contains(r.nodeName)&&/^[\s]*$/.test(r.innerHTML)?r=this.getPreviousNode(r,i):r||t===this.contain||(u=t.parentNode,u!==this.contain&&(r=this.getPreviousNode(u,i))),r!==this.contain?r:!1))},getSelectionParentsByTag:function(){for(var r,i=this.getSelectedOwnNodes(),u=[],t=0,f=i.length;f>t;t++)r=i[t].nodeName&&"LI"===i[t].nodeName?i[t]:n.dom.getParentElement(i[t],{nodeName:["LI"]},!1,this.contain),r&&u.push(r);return u.length?u:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var t=this.getRange(),i=t.startContainer,r=t.startOffset,n=rangy.createRange(this.doc);return n.selectNodeContents(i),n.setStart(i,r),n}},caretIsLastInSelection:function(){var n=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()),t=n.textContent;return/^\s*$/.test(t)},caretIsFirstInSelection:function(){var t=rangy.createRange(this.doc),i=this.getSelection(),u=this.getRange(),r=u.startContainer;return r.nodeType===n.TEXT_NODE?this.isCollapsed()&&r.nodeType===n.TEXT_NODE&&/^\s*$/.test(r.data.substr(0,u.startOffset)):(t.selectNodeContents(this.getRange().commonAncestorContainer),t.collapse(!0),this.isCollapsed()&&(t.startContainer===i.anchorNode||t.endContainer===i.anchorNode)&&t.startOffset===i.anchorOffset)},caretIsInTheBeginnig:function(t){var r=this.getSelection(),i=r.anchorNode,u=r.anchorOffset;return t?0===u&&(i.nodeName&&i.nodeName===t.toUpperCase()||n.dom.getParentElement(i.parentNode,{nodeName:t},1)):0===u&&!this.getPreviousNode(i,!0)},caretIsBeforeUneditable:function(){var i,t,n,r,u=this.getSelection(),f=u.anchorNode,e=u.anchorOffset;if(0===e&&(i=this.getPreviousNode(f,!0),i))for(t=this.getOwnUneditables(),n=0,r=t.length;r>n;n++)if(i===t[n])return t[n];return!1},executeAndRestoreRangy:function(n){var i=this.doc.defaultView||this.doc.parentWindow,t=rangy.saveSelection(i);if(t)try{n()}catch(r){setTimeout(function(){throw r;},0)}else n();rangy.restoreSelection(t)},executeAndRestore:function(i,r){var u,h,l,a,p,v,s,e,c,o=this.doc.body,b=r&&o.scrollTop,k=r&&o.scrollLeft,y="_wysihtml5-temp-placeholder",w='<span class="'+y+'">'+n.INVISIBLE_SPACE+"<\/span>",f=this.getRange(!0);if(!f)return i(o,o),void 0;f.collapsed||(s=f.cloneRange(),v=s.createContextualFragment(w),s.collapse(!1),s.insertNode(v),s.detach());p=f.createContextualFragment(w);f.insertNode(p);v&&(u=this.contain.querySelectorAll("."+y),f.setStartBefore(u[0]),f.setEndAfter(u[u.length-1]));this.setSelection(f);try{i(f.startContainer,f.endContainer)}catch(d){setTimeout(function(){throw d;},0)}if(u=this.contain.querySelectorAll("."+y),u&&u.length)for(e=rangy.createRange(this.doc),l=u[0].nextSibling,u.length>1&&(a=u[u.length-1].previousSibling),a&&l?(e.setStartBefore(l),e.setEndAfter(a)):(h=this.doc.createTextNode(n.INVISIBLE_SPACE),t.insert(h).after(u[0]),e.setStartBefore(h),e.setEndAfter(h)),this.setSelection(e),c=u.length;c--;)u[c].parentNode.removeChild(u[c]);else this.contain.focus();r&&(o.scrollTop=b,o.scrollLeft=k);try{u.parentNode.removeChild(u)}catch(g){}},set:function(n,t){var i=rangy.createRange(this.doc);i.setStart(n,t||0);this.setSelection(i)},insertHTML:function(n){var i,t=(rangy.createRange(this.doc),this.doc.createElement("DIV")),r=this.doc.createDocumentFragment();for(t.innerHTML=n,i=t.lastChild;t.firstChild;)r.appendChild(t.firstChild);this.insertNode(r);i&&this.setAfter(i)},insertNode:function(n){var t=this.getRange();t&&t.insertNode(n)},surround:function(n){var t,i,r=this.getOwnRanges(),u=[];if(0==r.length)return u;for(i=r.length;i--;){t=this.doc.createElement(n.nodeName);u.push(t);n.className&&(t.className=n.className);n.cssStyle&&t.setAttribute("style",n.cssStyle);try{r[i].surroundContents(t);this.selectNode(t)}catch(f){t.appendChild(r[i].extractContents());r[i].insertNode(t)}}return u},deblockAndSurround:function(t){var r,f,i,u=this.doc.createElement("div"),e=rangy.createRange(this.doc);if(u.className=t.className,this.composer.commands.exec("formatBlock",t.nodeName,t.className),r=this.contain.querySelectorAll("."+t.className),r[0])for(r[0].parentNode.insertBefore(u,r[0]),e.setStartBefore(r[0]),e.setEndAfter(r[r.length-1]),f=e.extractContents();f.firstChild;)if(i=f.firstChild,1==i.nodeType&&n.dom.hasClass(i,t.className)){for(;i.firstChild;)u.appendChild(i.firstChild);"BR"!==i.nodeName&&u.appendChild(this.doc.createElement("br"));f.removeChild(i)}else u.appendChild(i);else u=null;return u},scrollIntoView:function(){var r,t=this.doc,f=t.documentElement.scrollHeight>t.documentElement.offsetHeight,i=t._wysihtml5ScrollIntoViewElement=t._wysihtml5ScrollIntoViewElement||function(){var i=t.createElement("span");return i.innerHTML=n.INVISIBLE_SPACE,i}();f&&(this.insertNode(i),r=u(i),i.parentNode.removeChild(i),r>=t.body.scrollTop+t.documentElement.offsetHeight-5&&(t.body.scrollTop=r))},selectLine:function(){n.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView,n=t.getSelection();n.modify("move","left","lineboundary");n.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,f,n,r,u,t=this.doc.selection.createRange(),i=t.boundingTop,o=this.doc.body.scrollWidth;if(t.moveToPoint){for(0===i&&(n=this.doc.createElement("span"),this.insertNode(n),i=n.offsetTop,n.parentNode.removeChild(n)),i+=1,r=-10;o>r;r+=2)try{t.moveToPoint(r,i);break}catch(s){}for(e=i,f=this.doc.selection.createRange(),u=o;u>=0;u--)try{f.moveToPoint(u,e);break}catch(h){}t.setEndPoint("EndToEnd",f);t.select()}},getText:function(){var n=this.getSelection();return n?""+n:""},getNodes:function(n,t){var i=this.getRange();return i?i.getNodes([n],t):[]},fixRangeOverflow:function(n){var t,i;this.contain&&this.contain.firstChild&&n&&(t=n.compareNode(this.contain),2!==t?(1===t&&n.setStartBefore(this.contain.firstChild),0===t&&n.setEndAfter(this.contain.lastChild),3===t&&(n.setStartBefore(this.contain.firstChild),n.setEndAfter(this.contain.lastChild))):this._detectInlineRangeProblems(n)&&(i=n.endContainer.previousElementSibling,i&&n.setEnd(i,this._endOffsetForNode(i))))},_endOffsetForNode:function(n){var t=document.createRange();return t.selectNodeContents(n),t.endOffset},_detectInlineRangeProblems:function(n){var i=t.compareDocumentPosition(n.startContainer,n.endContainer);return 0==n.endOffset&&4&i},getRange:function(n){var t=this.getSelection(),i=t&&t.rangeCount&&t.getRangeAt(0);return n!==!0&&this.fixRangeOverflow(i),i},getOwnUneditables:function(){var i=t.query(this.contain,"."+this.unselectableClass),r=t.query(i,"."+this.unselectableClass);return n.lang.array(i).without(r)},getOwnRanges:function(){var f,i,r,u,o,t,s,n=[],e=this.getRange();if(e&&n.push(e),this.unselectableClass&&this.contain&&e&&(i=this.getOwnUneditables(),i.length>0))for(u=0,o=i.length;o>u;u++)for(f=[],t=0,s=n.length;s>t;t++){if(n[t])switch(n[t].compareNode(i[u])){case 2:break;case 3:r=n[t].cloneRange();r.setEndBefore(i[u]);f.push(r);r=n[t].cloneRange();r.setStartAfter(i[u]);f.push(r);break;default:f.push(n[t])}n=f}return n},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(n){var t=this.doc.defaultView||this.doc.parentWindow,i=rangy.getSelection(t);return i.setSingleRange(n)},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},isEndToEndInNode:function(t){var f=this.getRange(),i=f.commonAncestorContainer,r=f.startContainer,u=f.endContainer;if((i.nodeType===n.TEXT_NODE&&(i=i.parentNode),r.nodeType===n.TEXT_NODE&&!/^\s*$/.test(r.data.substr(f.startOffset)))||u.nodeType===n.TEXT_NODE&&!/^\s*$/.test(u.data.substr(f.endOffset)))return!1;for(;r&&r!==i;){if(r.nodeType!==n.TEXT_NODE&&!n.dom.contains(i,r)||n.dom.domNode(r).prev({ignoreBlankTexts:!0}))return!1;r=r.parentNode}for(;u&&u!==i;){if(u.nodeType!==n.TEXT_NODE&&!n.dom.contains(i,u)||n.dom.domNode(u).next({ignoreBlankTexts:!0}))return!1;u=u.parentNode}return n.lang.array(t).contains(i.nodeName)?i:!1},deselect:function(){var n=this.getSelection();n&&n.removeAllRanges()}})}(wysihtml5),function(n,t){function a(n,t,i){if(!n.className)return!1;var r=n.className.match(i)||[];return r[r.length-1]===t}function v(n,t){return!n.getAttribute||!n.getAttribute("style")?!1:(n.getAttribute("style").match(t),n.getAttribute("style").match(t)?!0:!1)}function u(n,t,i){n.getAttribute("style")?(e(n,i),n.getAttribute("style")&&!/^\s*$/.test(n.getAttribute("style"))?n.setAttribute("style",t+";"+n.getAttribute("style")):n.setAttribute("style",t)):n.setAttribute("style",t)}function y(n,t,i){n.className?(f(n,i),n.className+=" "+t):n.className=t}function f(n,t){n.className&&(n.className=n.className.replace(t,""))}function e(n,t){var i,r,u=[];if(n.getAttribute("style")){for(i=n.getAttribute("style").split(";"),r=i.length;r--;)i[r].match(t)||/^\s*$/.test(i[r])||u.push(i[r]);u.length?n.setAttribute("style",u.join(";")):n.removeAttribute("style")}}function o(n,t){var u,i,o,r=[],e=t.split(";"),f=n.getAttribute("style");if(f){for(f=f.replace(/\s/gi,"").toLowerCase(),r.push(RegExp("(^|\\s|;)"+t.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi")),u=e.length;u-->0;)/^\s*$/.test(e[u])||r.push(RegExp("(^|\\s|;)"+e[u].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(i=0,o=r.length;o>i;i++)if(f.match(r[i]))return r[i]}return!1}function p(i,r,u,f){return u?o(i,u):f?n.dom.hasClass(i,f):t.dom.arrayContains(r,i.tagName.toLowerCase())}function s(n,t,i,r){for(var u=n.length;u--;)if(!p(n[u],t,i,r))return!1;return n.length?!0:!1}function w(n,t,i){var r=o(n,t);return r?(e(n,r),"remove"):(u(n,t,i),"change")}function b(n,t){return n.className.replace(l," ")==t.className.replace(l," ")}function k(n){for(var t=n.parentNode;n.firstChild;)t.insertBefore(n.firstChild,n);t.removeChild(n)}function d(n,t){if(n.attributes.length!=t.attributes.length)return!1;for(var i,r,u,f=0,e=n.attributes.length;e>f;++f)if((i=n.attributes[f],u=i.name,"class"!=u)&&((r=t.attributes.getNamedItem(u),i.specified!=r.specified)||i.specified&&i.nodeValue!==r.nodeValue))return!1;return!0}function h(n,i){return t.dom.isCharacterDataNode(n)?0==i?!!n.previousSibling:i==n.length?!!n.nextSibling:!0:i>0&&i<n.childNodes.length}function i(n,r,u,f){var e,o;if(t.dom.isCharacterDataNode(r)&&(0==u?(u=t.dom.getNodeIndex(r),r=r.parentNode):u==r.length?(u=t.dom.getNodeIndex(r)+1,r=r.parentNode):e=t.dom.splitDataNode(r,u)),!(e||f&&r===f)){for(e=r.cloneNode(!1),e.id&&e.removeAttribute("id");o=r.childNodes[u];)e.appendChild(o);t.dom.insertAfter(e,r)}return r==n?e:i(n,e.parentNode,t.dom.getNodeIndex(e),f)}function r(t){this.isElementMerge=t.nodeType==n.ELEMENT_NODE;this.firstTextNode=this.isElementMerge?t.lastChild:t;this.textNodes=[this.firstTextNode]}function c(n,t,i,r,u,f,e){this.tagNames=n||[g];this.cssClass=t||(t===!1?!1:"");this.similarClassRegExp=i;this.cssStyle=u||"";this.similarStyleRegExp=f;this.normalize=r;this.applyToAnyTagName=!1;this.container=e}var g="span",l=/\s+/g;r.prototype={doMerge:function(){for(var i,t,r,f=[],n=0,u=this.textNodes.length;u>n;++n)i=this.textNodes[n],t=i.parentNode,f[n]=i.data,n&&(t.removeChild(i),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=r=f.join(""),r},getLength:function(){for(var n=this.textNodes.length,t=0;n--;)t+=this.textNodes[n].length;return t},toString:function(){for(var i=[],n=0,t=this.textNodes.length;t>n;++n)i[n]="'"+this.textNodes[n].data+"'";return"[Merge("+i.join(",")+")]"}};c.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?a(i,this.cssClass,this.similarClassRegExp):""!==this.cssStyle?!1:!0,i.nodeType==n.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},getAncestorWithStyle:function(i){for(var r;i;){if(r=this.cssStyle?v(i,this.similarStyleRegExp):!1,i.nodeType==n.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},getMatchingAncestor:function(n){var t=this.getAncestorWithClass(n),i=!1;return t?this.cssStyle&&(i="class"):(t=this.getAncestorWithStyle(n),t&&(i="style")),{element:t,type:i}},postApply:function(n,t){for(var i,f,s,c,a=n[0],e=n[n.length-1],o=[],l=a,v=e,y=0,p=e.length,u=0,h=n.length;h>u;++u)f=n[u],s=null,f&&f.parentNode&&(s=this.getAdjacentMergeableTextNode(f.parentNode,!1)),s?(i||(i=new r(s),o.push(i)),i.textNodes.push(f),f===a&&(l=i.firstTextNode,y=l.length),f===e&&(v=i.firstTextNode,p=i.getLength())):i=null;if(e&&e.parentNode&&(c=this.getAdjacentMergeableTextNode(e.parentNode,!0),c&&(i||(i=new r(e),o.push(i)),i.textNodes.push(c))),o.length){for(u=0,h=o.length;h>u;++u)o[u].doMerge();t.setStart(l,y);t.setEnd(v,p)}},getAdjacentMergeableTextNode:function(t,i){var r,u=t.nodeType==n.TEXT_NODE,e=u?t.parentNode:t,f=i?"nextSibling":"previousSibling";if(u){if(r=t[f],r&&r.nodeType==n.TEXT_NODE)return r}else if(r=e[f],r&&this.areElementsMergeable(t,r))return r[i?"firstChild":"lastChild"];return null},areElementsMergeable:function(n,i){return t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(i.tagName||"").toLowerCase())&&b(n,i)&&d(n,i)},createContainer:function(n){var t=n.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),this.cssStyle&&t.setAttribute("style",this.cssStyle),t},applyToTextNode:function(n){var r,i=n.parentNode;1==i.childNodes.length&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())?(this.cssClass&&y(i,this.cssClass,this.similarClassRegExp),this.cssStyle&&u(i,this.cssStyle,this.similarStyleRegExp)):(r=this.createContainer(t.dom.getDocument(n)),n.parentNode.insertBefore(r,n),r.appendChild(n))},isRemovable:function(i){return t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&""===n.lang.string(i.className).trim()&&(!i.getAttribute("style")||""===n.lang.string(i.getAttribute("style")).trim())},undoToTextNode:function(n,t,r,u){var o,s=r?!1:!0,e=r||u,c=!1;t.containsNode(e)||(o=t.cloneRange(),o.selectNode(e),o.isPointInRange(t.endContainer,t.endOffset)&&h(t.endContainer,t.endOffset)&&(i(e,t.endContainer,t.endOffset,this.container),t.setEndAfter(e)),o.isPointInRange(t.startContainer,t.startOffset)&&h(t.startContainer,t.startOffset)&&(e=i(e,t.startContainer,t.startOffset,this.container)));!s&&this.similarClassRegExp&&f(e,this.similarClassRegExp);s&&this.similarStyleRegExp&&(c="change"===w(e,this.cssStyle,this.similarStyleRegExp));this.isRemovable(e)&&!c&&k(e)},applyToRange:function(t){for(var r,e,u,f,o,i=t.length;i--;){if(r=t[i].getNodes([n.TEXT_NODE]),!r.length)try{return e=this.createContainer(t[i].endContainer.ownerDocument),t[i].surroundContents(e),this.selectNode(t[i],e),void 0}catch(s){}if(t[i].splitBoundaries(),r=t[i].getNodes([n.TEXT_NODE]),r.length){for(f=0,o=r.length;o>f;++f)u=r[f],this.getMatchingAncestor(u).element||this.applyToTextNode(u);t[i].setStart(r[0],0);u=r[r.length-1];t[i].setEnd(u,u.length);this.normalize&&this.postApply(r,t[i])}}},undoToRange:function(t){for(var r,u,f,h,e,o,s,i=t.length;i--;){for(r=t[i].getNodes([n.TEXT_NODE]),r.length?(t[i].splitBoundaries(),r=t[i].getNodes([n.TEXT_NODE])):(h=t[i].endContainer.ownerDocument,e=h.createTextNode(n.INVISIBLE_SPACE),t[i].insertNode(e),t[i].selectNode(e),r=[e]),o=0,s=r.length;s>o;++o)t[i].isValid()&&(u=r[o],f=this.getMatchingAncestor(u),"style"===f.type?this.undoToTextNode(u,t[i],!1,f.element):f.element&&this.undoToTextNode(u,t[i],f.element));1==s?this.selectNode(t[i],r[0]):(t[i].setStart(r[0],0),u=r[r.length-1],t[i].setEnd(u,u.length),this.normalize&&this.postApply(r,t[i]))}},selectNode:function(t,i){var r=i.nodeType===n.ELEMENT_NODE,e="canHaveHTML"in i?i.canHaveHTML:!0,f=r?i.innerHTML:i.data,u=""===f||f===n.INVISIBLE_SPACE;if(u&&r&&e)try{i.innerHTML=n.INVISIBLE_SPACE}catch(o){}t.selectNodeContents(i);u&&r?t.collapse(!1):u&&(t.setStartAfter(i),t.setEndAfter(i))},getTextSelectedByRange:function(n,t){var i,u,r=t.cloneRange();return r.selectNodeContents(n),i=r.intersection(t),u=i?""+i:"",r.detach(),u},isAppliedToRange:function(t){for(var i,u,e,s,h,o=[],r="full",f=t.length;f--;){if(u=t[f].getNodes([n.TEXT_NODE]),!u.length)return i=this.getMatchingAncestor(t[f].startContainer).element,i?{elements:[i],coverage:r}:!1;for(e=0,s=u.length;s>e;++e)h=this.getTextSelectedByRange(u[e],t[f]),i=this.getMatchingAncestor(u[e]).element,i&&""!=h?(o.push(i),1===n.dom.getTextNodes(i,!0).length?r="full":"full"===r&&(r="inline")):i||(r="partial")}return o.length?{elements:o,coverage:r}:!1},toggleRange:function(n){var i,t=this.isAppliedToRange(n);t?"full"===t.coverage?this.undoToRange(n):"inline"===t.coverage?(i=s(t.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(n),i||this.applyToRange(n)):(s(t.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(n),this.applyToRange(n)):this.applyToRange(n)}};n.selection.HTMLApplier=c}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(n){this.editor=n;this.composer=n.composer;this.doc=this.composer.doc},support:function(n){return wysihtml5.browser.supportsCommand(this.doc,n)},exec:function(n,t){var i=wysihtml5.commands[n],u=wysihtml5.lang.array(arguments).get(),f=i&&i.exec,r=null;if(this.editor.fire("beforecommand:composer"),f)u.unshift(this.composer),r=f.apply(i,u);else try{r=this.doc.execCommand(n,!1,t)}catch(e){}return this.editor.fire("aftercommand:composer"),r},state:function(n){var t=wysihtml5.commands[n],i=wysihtml5.lang.array(arguments).get(),r=t&&t.state;if(r)return i.unshift(this.composer),r.apply(t,i);try{return this.doc.queryCommandState(n)}catch(u){return!1}},stateValue:function(n){var t=wysihtml5.commands[n],i=wysihtml5.lang.array(arguments).get(),r=t&&t.stateValue;return r?(i.unshift(this.composer),r.apply(t,i)):!1}}),wysihtml5.commands.bold={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"b")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"b")}},function(n){function u(u,f){var s,h,e,y,p,c,l,a,o,w=u.doc,b="_wysihtml5-temp-"+ +new Date,v=0;for(n.commands.formatInline.exec(u,t,r,b,/non-matching-class/g,t,t,!0,!0),h=w.querySelectorAll(r+"."+b),s=h.length;s>v;v++){e=h[v];e.removeAttribute("class");for(o in f)"text"!==o&&e.setAttribute(o,f[o])}c=e;1===s&&(l=i.getTextContent(e),y=!!e.querySelector("*"),p=""===l||l===n.INVISIBLE_SPACE,!y&&p&&(i.setTextContent(e,f.text||e.href),a=w.createTextNode(" "),u.selection.setAfter(e),i.insert(a).after(e),c=a));u.selection.setAfter(c)}function f(n,t,i){for(var f,e,u,r=t.length;r--;){for(f=t[r].attributes,e=f.length;e--;)t[r].removeAttribute(f.item(e).name);for(u in i)i.hasOwnProperty(u)&&t[r].setAttribute(u,i[u])}}var t,r="A",i=n.dom;n.commands.createLink={exec:function(n,t,i){var r=this.state(n,t);r?n.selection.executeAndRestore(function(){f(n,r,i)}):(i="object"==typeof i?i:{href:i},u(n,i))},state:function(t,i){return n.commands.formatInline.state(t,i,"A")}}}(wysihtml5),function(n){function i(n,i){for(var r,u,e,o=i.length,f=0;o>f;f++)r=i[f],u=t.getParentElement(r,{nodeName:"code"}),e=t.getTextContent(r),e.match(t.autoLink.URL_REG_EXP)&&!u?u=t.renameElement(r,"code"):t.replaceWithChildNodes(r)}var t=n.dom;n.commands.removeLink={exec:function(n,t){var r=this.state(n,t);r&&n.selection.executeAndRestore(function(){i(n,r)})},state:function(t,i){return n.commands.formatInline.state(t,i,"A")}}}(wysihtml5),function(n){var t=/wysiwyg-font-size-[0-9a-z\-]+/g;n.commands.fontSize={exec:function(i,r,u){n.commands.formatInline.execWithToggle(i,r,"span","wysiwyg-font-size-"+u,t)},state:function(i,r,u){return n.commands.formatInline.state(i,r,"span","wysiwyg-font-size-"+u,t)}}}(wysihtml5),function(n){var t=/(\s|^)font-size\s*:\s*[^;\s]+;?/gi;n.commands.fontSizeStyle={exec:function(i,r,u){u="object"==typeof u?u.size:u;/^\s*$/.test(u)||n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,"font-size:"+u,t)},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"font-size",t)},stateValue:function(t,i){var u,r=this.state(t,i);return r&&n.lang.object(r).isArray()&&(r=r[0]),r&&(u=r.getAttribute("style"),u)?n.quirks.styleParser.parseFontSize(u):!1}}}(wysihtml5),function(n){var t=/wysiwyg-color-[0-9a-z]+/g;n.commands.foreColor={exec:function(i,r,u){n.commands.formatInline.execWithToggle(i,r,"span","wysiwyg-color-"+u,t)},state:function(i,r,u){return n.commands.formatInline.state(i,r,"span","wysiwyg-color-"+u,t)}}}(wysihtml5),function(n){var t=/(\s|^)color\s*:\s*[^;\s]+;?/gi;n.commands.foreColorStyle={exec:function(i,r,u){var e,f=n.quirks.styleParser.parseColor("object"==typeof u?"color:"+u.color:"color:"+u,"color");f&&(e="color: rgb("+f[0]+","+f[1]+","+f[2]+");",1!==f[3]&&(e+="color: rgba("+f[0]+","+f[1]+","+f[2]+","+f[3]+");"),n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,e,t))},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"color",t)},stateValue:function(t,i,r){var f,u=this.state(t,i);return u&&n.lang.object(u).isArray()&&(u=u[0]),u&&(f=u.getAttribute("style"),f&&f)?(val=n.quirks.styleParser.parseColor(f,"color"),n.quirks.styleParser.unparseColor(val,r)):!1}}}(wysihtml5),function(n){var t=/(\s|^)background-color\s*:\s*[^;\s]+;?/gi;n.commands.bgColorStyle={exec:function(i,r,u){var e,f=n.quirks.styleParser.parseColor("object"==typeof u?"background-color:"+u.color:"background-color:"+u,"background-color");f&&(e="background-color: rgb("+f[0]+","+f[1]+","+f[2]+");",1!==f[3]&&(e+="background-color: rgba("+f[0]+","+f[1]+","+f[2]+","+f[3]+");"),n.commands.formatInline.execWithToggle(i,r,"span",!1,!1,e,t))},state:function(i,r){return n.commands.formatInline.state(i,r,"span",!1,!1,"background-color",t)},stateValue:function(t,i,r){var f,u=this.state(t,i),e=!1;return u&&n.lang.object(u).isArray()&&(u=u[0]),u&&(f=u.getAttribute("style"),f)?(e=n.quirks.styleParser.parseColor(f,"background-color"),n.quirks.styleParser.unparseColor(e,r)):!1}}}(wysihtml5),function(n){function f(t,i,u){t.className?(r(t,u),t.className=n.lang.string(t.className+" "+i).trim()):t.className=i}function e(t,i,r){u(t,r);t.getAttribute("style")?t.setAttribute("style",n.lang.string(t.getAttribute("style")+" "+i).trim()):t.setAttribute("style",i)}function r(t,i){var r=i.test(t.className);return t.className=t.className.replace(i,""),""==n.lang.string(t.className).trim()&&t.removeAttribute("class"),r}function u(t,i){var r=i.test(t.getAttribute("style"));return t.setAttribute("style",(t.getAttribute("style")||"").replace(i,"")),""==n.lang.string(t.getAttribute("style")||"").trim()&&t.removeAttribute("style"),r}function o(n){var t=n.lastChild;t&&s(t)&&t.parentNode.removeChild(t)}function s(n){return"BR"===n.nodeName}function h(t,i){var u,r,f;for(t.selection.isCollapsed()&&t.selection.selectLine(),u=t.selection.surround(i),r=0,f=u.length;f>r;r++)n.dom.lineBreaks(u[r]).remove(),o(u[r])}function c(t){return!!n.lang.string(t.className).trim()}function l(t){return!!n.lang.string(t.getAttribute("style")||"").trim()}var t=n.dom,i=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];n.commands.formatBlock={exec:function(o,s,a,v,y,p,w){var d,nt,tt,it,k,b=(o.doc,this.state(o,s,a,v,y,p,w)),rt=o.config.useLineBreaks,g=rt?"DIV":"P";return a="string"==typeof a?a.toUpperCase():a,b.length?(o.selection.executeAndRestoreRangy(function(){for(var f,e,i=b.length;i--;){if(y&&(nt=r(b[i],y)),w&&(it=u(b[i],w)),(it||nt)&&null===a&&b[i].nodeName!=g)return;f=c(b[i]);e=l(b[i]);f||e||!rt&&"P"!==a?t.renameElement(b[i],"P"===a?"DIV":g):(n.dom.lineBreaks(b[i]).add(),t.replaceWithChildNodes(b[i]))}}),void 0):((null!==a&&!n.lang.array(i).contains(a)||(d=o.selection.findNodesInSelection(i).concat(o.selection.getSelectedOwnNodes()),o.selection.executeAndRestoreRangy(function(){for(var n=d.length;n--;)k=t.getParentElement(d[n],{nodeName:i}),k==o.element&&(k=null),k&&(a&&(k=t.renameElement(k,a)),v&&f(k,v,y),p&&e(k,p,w),tt=!0)}),!tt))&&h(o,{nodeName:a||g,className:v||null,cssStyle:p||null}),void 0)},state:function(i,r,u,f,e,o,s){var h,c,a,v=i.selection.getSelectedOwnNodes(),l=[];for(u="string"==typeof u?u.toUpperCase():u,c=0,a=v.length;a>c;c++)h=t.getParentElement(v[c],{nodeName:u,className:f,classRegExp:e,cssStyle:o,styleRegExp:s}),h&&-1==n.lang.array(l).indexOf(h)&&l.push(h);return 0==l.length?!1:l}}}(wysihtml5),wysihtml5.commands.formatCode={exec:function(n,t,i){var r,f,e,u=this.state(n);u?n.selection.executeAndRestore(function(){r=u.querySelector("code");wysihtml5.dom.replaceWithChildNodes(u);r&&wysihtml5.dom.replaceWithChildNodes(r)}):(f=n.selection.getRange(),e=f.extractContents(),u=n.doc.createElement("pre"),r=n.doc.createElement("code"),i&&(r.className=i),u.appendChild(r),r.appendChild(e),f.insertNode(u),n.selection.selectNode(u))},state:function(n){var t=n.selection.getSelectedNode();return t&&t.nodeName&&"PRE"==t.nodeName&&t.firstChild&&t.firstChild.nodeName&&"CODE"==t.firstChild.nodeName?t:wysihtml5.dom.getParentElement(t,{nodeName:"CODE"})&&wysihtml5.dom.getParentElement(t,{nodeName:"PRE"})}},function(n){function u(n){var t=r[n];return t?[n.toLowerCase(),t.toLowerCase()]:[n.toLowerCase()]}function i(i,r,f,e,o,s){var h=i;return r&&(h+=":"+r),e&&(h+=":"+e),t[h]||(t[h]=new n.selection.HTMLApplier(u(i),r,f,!0,e,o,s)),t[h]}var r={strong:"b",em:"i",b:"strong",i:"em"},t={};n.commands.formatInline={exec:function(n,t,r,u,f,e,o,s,h){var l=n.selection.createRange(),c=n.selection.getOwnRanges();return c&&0!=c.length?(n.selection.getSelection().removeAllRanges(),i(r,u,f,e,o,n.element).toggleRange(c),s?h||n.cleanUp():(l.setStart(c[0].startContainer,c[0].startOffset),l.setEnd(c[c.length-1].endContainer,c[c.length-1].endOffset),n.selection.setSelection(l),n.selection.executeAndRestore(function(){h||n.cleanUp()},!0,!0)),void 0):!1},execWithToggle:function(t,i,r,u,f,e,o){var s,h=this;this.state(t,i,r,u,f,e,o)&&t.selection.isCollapsed()&&!t.selection.caretIsLastInSelection()&&!t.selection.caretIsFirstInSelection()?(s=h.state(t,i,r,u,f)[0],t.selection.executeAndRestoreRangy(function(){s.parentNode;t.selection.selectNode(s,!0);n.commands.formatInline.exec(t,i,r,u,f,e,o,!0,!0)})):this.state(t,i,r,u,f,e,o)&&!t.selection.isCollapsed()?t.selection.executeAndRestoreRangy(function(){n.commands.formatInline.exec(t,i,r,u,f,e,o,!0,!0)}):n.commands.formatInline.exec(t,i,r,u,f,e,o)},state:function(t,u,f,e,o,s,h){var c,l,a=t.doc,v=r[f]||f;return n.dom.hasElementWithTagName(a,f)||n.dom.hasElementWithTagName(a,v)?e&&!n.dom.hasElementWithClassName(a,e)?!1:(c=t.selection.getOwnRanges(),c&&0!==c.length?(l=i(f,e,o,s,h,t.element).isAppliedToRange(c),l&&l.elements?l.elements:!1):!1):!1}}}(wysihtml5),function(n){n.commands.insertBlockQuote={exec:function(t,i){var u=this.state(t,i),r=t.selection.isEndToEndInNode(["H1","H2","H3","H4","H5","H6","P"]);t.selection.executeAndRestore(function(){if(u)t.config.useLineBreaks&&n.dom.lineBreaks(u).add(),n.dom.unwrap(u);else if(t.selection.isCollapsed()&&t.selection.selectLine(),r){var i=r.ownerDocument.createElement("blockquote");n.dom.insert(i).after(r);i.appendChild(r)}else t.selection.surround({nodeName:"blockquote"})})},state:function(t){var r=t.selection.getSelectedNode(),i=n.dom.getParentElement(r,{nodeName:"BLOCKQUOTE"},!1,t.element);return i?i:!1}}}(wysihtml5),wysihtml5.commands.insertHTML={exec:function(n,t,i){n.commands.support(t)?n.doc.execCommand(t,!1,i):n.selection.insertHTML(i)},state:function(){return!1}},function(n){var t="IMG";n.commands.insertImage={exec:function(i,r,u){var s,f,h,e,o;if(u="object"==typeof u?u:{src:u},s=i.doc,f=this.state(i),f)return i.selection.setBefore(f),e=f.parentNode,e.removeChild(f),n.dom.removeEmptyTextNodes(e),"A"!==e.nodeName||e.firstChild||(i.selection.setAfter(e),e.parentNode.removeChild(e)),n.quirks.redraw(i.element),void 0;f=s.createElement(t);for(o in u)f.setAttribute("className"===o?"class":o,u[o]);i.selection.insertNode(f);n.browser.hasProblemsSettingCaretAfterImg()?(h=s.createTextNode(n.INVISIBLE_SPACE),i.selection.insertNode(h),i.selection.setAfter(h)):i.selection.setAfter(f)},state:function(i){var r,u,f,e=i.doc;return n.dom.hasElementWithTagName(e,t)?(r=i.selection.getSelectedNode(),r?r.nodeName===t?r:r.nodeType!==n.ELEMENT_NODE?!1:(u=i.selection.getText(),u=n.lang.string(u).trim(),u?!1:(f=i.selection.getNodes(n.ELEMENT_NODE,function(n){return"IMG"===n.nodeName}),1!==f.length?!1:f[0])):!1):!1}}}(wysihtml5),function(n){var t="<br>"+(n.browser.needsSpaceAfterLineBreak()?" ":"");n.commands.insertLineBreak={exec:function(i,r){i.commands.support(r)?(i.doc.execCommand(r,!1,null),n.browser.autoScrollsToCaret()||i.selection.scrollIntoView()):i.commands.exec("insertHTML",t)},state:function(){return!1}}}(wysihtml5),wysihtml5.commands.insertOrderedList={exec:function(n,t){wysihtml5.commands.insertList.exec(n,t,"OL")},state:function(n,t){return wysihtml5.commands.insertList.state(n,t,"OL")}},wysihtml5.commands.insertUnorderedList={exec:function(n,t){wysihtml5.commands.insertList.exec(n,t,"UL")},state:function(n,t){return wysihtml5.commands.insertList.state(n,t,"UL")}},wysihtml5.commands.insertList=function(n){var t=function(n,t){if(n&&n.nodeName){"string"==typeof t&&(t=[t]);for(var i=t.length;i--;)if(n.nodeName===t[i])return!0}return!1},r=function(i,r,u){var e,o,f={el:null,other:!1};return i&&(e=n.dom.getParentElement(i,{nodeName:"LI"}),o="UL"===r?"OL":"UL",t(i,r)?f.el=i:t(i,o)?f={el:i,other:!0}:e&&(t(e.parentNode,r)?f.el=e.parentNode:t(e.parentNode,o)&&(f={el:e.parentNode,other:!0}))),f.el&&!u.element.contains(f.el)&&(f.el=null),f},u=function(t,r,u){var f,e="UL"===r?"OL":"UL";u.selection.executeAndRestore(function(){var o,s,h=i(e,u);if(h.length)for(o=h.length;o--;)n.dom.renameElement(h[o],r.toLowerCase());else{for(f=i(["OL","UL"],u),s=f.length;s--;)n.dom.resolveList(f[s],u.config.useLineBreaks);n.dom.resolveList(t,u.config.useLineBreaks)}})},f=function(t,r,u){var f="UL"===r?"OL":"UL";u.selection.executeAndRestore(function(){for(var o=[t].concat(i(f,u)),e=o.length;e--;)n.dom.renameElement(o[e],r.toLowerCase())})},i=function(n,i){for(var f=i.selection.getOwnRanges(),u=[],r=f.length;r--;)u=u.concat(f[r].getNodes([1],function(i){return t(i,n)}));return u},e=function(t,i){i.selection.executeAndRestoreRangy(function(){var u,f,e="_wysihtml5-temp-"+(new Date).getTime(),r=i.selection.deblockAndSurround({nodeName:"div",className:e});r.innerHTML=r.innerHTML.replace(/\uFEFF/g,"");r&&(u=n.lang.array(["","<br>",n.INVISIBLE_SPACE]).contains(r.innerHTML),f=n.dom.convertToList(r,t.toLowerCase(),i.parent.config.uneditableContainerClassname),u&&i.selection.selectNode(f.querySelector("li"),!0))})};return{exec:function(n,t,i){var h=n.doc,s="OL"===i?"insertOrderedList":"insertUnorderedList",c=n.selection.getSelectedNode(),o=r(c,i,n);o.el?o.other?f(o.el,i,n):u(o.el,i,n):n.commands.support(s)?h.execCommand(s,!1,null):e(i,n)},state:function(n,t,i){var f=n.selection.getSelectedNode(),u=r(f,i,n);return u.el&&!u.other?u.el:!1}}}(wysihtml5),wysihtml5.commands.italic={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"i")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"i")}},function(n){var t="wysiwyg-text-align-center",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyCenter={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-left",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyLeft={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-right",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyRight={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="wysiwyg-text-align-justify",i=/wysiwyg-text-align-[0-9a-z]+/g;n.commands.justifyFull={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,t,i)}}}(wysihtml5),function(n){var t="text-align: right;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignRightStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5),function(n){var t="text-align: left;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignLeftStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5),function(n){var t="text-align: center;",i=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;n.commands.alignCenterStyle={exec:function(r){return n.commands.formatBlock.exec(r,"formatBlock",null,null,null,t,i)},state:function(r){return n.commands.formatBlock.state(r,"formatBlock",null,null,null,t,i)}}}(wysihtml5),wysihtml5.commands.redo={exec:function(n){return n.undoManager.redo()},state:function(){return!1}},wysihtml5.commands.underline={exec:function(n,t){wysihtml5.commands.formatInline.execWithToggle(n,t,"u")},state:function(n,t){return wysihtml5.commands.formatInline.state(n,t,"u")}},wysihtml5.commands.undo={exec:function(n){return n.undoManager.undo()},state:function(){return!1}},wysihtml5.commands.createTable={exec:function(n,t,i){var u,f,r;if(i&&i.cols&&i.rows&&parseInt(i.cols,10)>0&&parseInt(i.rows,10)>0){for(r=i.tableStyle?'<table style="'+i.tableStyle+'">':"<table>",r+="<tbody>",f=0;f<i.rows;f++){for(r+="<tr>",u=0;u<i.cols;u++)r+="<td>&nbsp;<\/td>";r+="<\/tr>"}r+="<\/tbody><\/table>";n.commands.exec("insertHTML",r)}},state:function(){return!1}},wysihtml5.commands.mergeTableCells={exec:function(n,t){n.tableSelection&&n.tableSelection.start&&n.tableSelection.end&&(this.state(n,t)?wysihtml5.dom.table.unmergeCell(n.tableSelection.start):wysihtml5.dom.table.mergeCellsBetween(n.tableSelection.start,n.tableSelection.end))},state:function(n){if(n.tableSelection){var t=n.tableSelection.start,i=n.tableSelection.end;if(t&&i&&t==i&&(wysihtml5.dom.getAttribute(t,"colspan")&&parseInt(wysihtml5.dom.getAttribute(t,"colspan"),10)>1||wysihtml5.dom.getAttribute(t,"rowspan")&&parseInt(wysihtml5.dom.getAttribute(t,"rowspan"),10)>1))return[t]}return!1}},wysihtml5.commands.addTableCells={exec:function(n,t,i){if(n.tableSelection&&n.tableSelection.start&&n.tableSelection.end){var r=wysihtml5.dom.table.orderSelectionEnds(n.tableSelection.start,n.tableSelection.end);"before"==i||"above"==i?wysihtml5.dom.table.addCells(r.start,i):("after"==i||"below"==i)&&wysihtml5.dom.table.addCells(r.end,i);setTimeout(function(){n.tableSelection.select(r.start,r.end)},0)}},state:function(){return!1}},wysihtml5.commands.deleteTableCells={exec:function(n,t,i){if(n.tableSelection&&n.tableSelection.start&&n.tableSelection.end){var r,e=wysihtml5.dom.table.orderSelectionEnds(n.tableSelection.start,n.tableSelection.end),u=wysihtml5.dom.table.indexOf(e.start),f=n.tableSelection.table;wysihtml5.dom.table.removeCells(e.start,i);setTimeout(function(){r=wysihtml5.dom.table.findCell(f,u);r||("row"==i&&(r=wysihtml5.dom.table.findCell(f,{row:u.row-1,col:u.col})),"column"==i&&(r=wysihtml5.dom.table.findCell(f,{row:u.row,col:u.col-1})));r&&n.tableSelection.select(r,r)},0)}},state:function(){return!1}},wysihtml5.commands.indentList={exec:function(n){var t=n.selection.getSelectionParentsByTag("LI");return t?this.tryToPushLiLevel(t,n.selection):!1},state:function(){return!1},tryToPushLiLevel:function(n,t){var e,u,r,i,f,o=!1;return t.executeAndRestoreRangy(function(){for(var t=n.length;t--;)i=n[t],e="OL"===i.parentNode.nodeName?"OL":"UL",u=i.ownerDocument.createElement(e),r=wysihtml5.dom.domNode(i).prev({nodeTypes:[wysihtml5.ELEMENT_NODE]}),f=r?r.querySelector("ul, ol"):null,r&&(f?f.appendChild(i):(u.appendChild(i),r.appendChild(u)),o=!0)}),o}},wysihtml5.commands.outdentList={exec:function(n){var t=n.selection.getSelectionParentsByTag("LI");return t?this.tryToPullLiLevel(t,n):!1},state:function(){return!1},tryToPullLiLevel:function(n,t){var i,f,e,r,u,o=!1,s=this;return t.selection.executeAndRestoreRangy(function(){for(var c,h=n.length;h--;)if(r=n[h],r.parentNode&&(i=r.parentNode,"OL"===i.tagName||"UL"===i.tagName)){if(o=!0,f=wysihtml5.dom.getParentElement(i.parentNode,{nodeName:["OL","UL"]},!1,t.element),e=wysihtml5.dom.getParentElement(i.parentNode,{nodeName:["LI"]},!1,t.element),f&&e)r.nextSibling&&(u=s.getAfterList(i,r),r.appendChild(u)),f.insertBefore(r,e.nextSibling);else{for(r.nextSibling&&(u=s.getAfterList(i,r),r.appendChild(u)),c=r.childNodes.length;c--;)i.parentNode.insertBefore(r.childNodes[c],i.nextSibling);i.parentNode.insertBefore(document.createElement("br"),i.nextSibling);r.parentNode.removeChild(r)}0===i.childNodes.length&&i.parentNode.removeChild(i)}}),o},getAfterList:function(n,t){for(var r=n.nodeName,i=document.createElement(r);t.nextSibling;)i.appendChild(t.nextSibling);return i}},function(n){var r=90,f=89,e=8,o=46,s=25,i="data-wysihtml5-selection-node",t="data-wysihtml5-selection-offset",u=('<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+n.INVISIBLE_SPACE+"<\/span>",'<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+n.INVISIBLE_SPACE+"<\/span>",n.dom);n.UndoManager=n.lang.Dispatcher.extend({constructor:function(n){this.editor=n;this.composer=n.composer;this.element=this.composer.element;this.position=0;this.historyStr=[];this.historyDom=[];this.transact();this._observe()},_observe:function(){var t,n=this;this.composer.sandbox.getDocument();u.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var i=t.keyCode,u=i===r&&!t.shiftKey,e=i===r&&t.shiftKey||i===f;u?(n.undo(),t.preventDefault()):e&&(n.redo(),t.preventDefault())}});u.observe(this.element,"keydown",function(i){var r=i.keyCode;r!==t&&(t=r,(r===e||r===o)&&n.transact())});this.editor.on("newword:composer",function(){n.transact()}).on("beforecommand:composer",function(){n.transact()})},transact:function(){var u,f,h,r,e,c,l,a=this.historyStr[this.position-1],o=this.composer.getValue(!1,!1),v=this.element.offsetWidth>0&&this.element.offsetHeight>0;o!==a&&(c=this.historyStr.length=this.historyDom.length=this.position,c>s&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,v&&(u=this.composer.selection.getRange(),f=u&&u.startContainer?u.startContainer:this.element,h=u&&u.startOffset?u.startOffset:0,f.nodeType===n.ELEMENT_NODE?r=f:(r=f.parentNode,e=this.getChildNodeIndex(r,f)),r.setAttribute(t,h),void 0!==e&&r.setAttribute(i,e)),l=this.element.cloneNode(!!o),this.historyDom.push(l),this.historyStr.push(o),r&&(r.removeAttribute(t),r.removeAttribute(i)))},undo:function(){this.transact();this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(n){var u,o,s,e,r,f;for(this.element.innerHTML="",u=0,o=n.childNodes,s=n.childNodes.length;s>u;u++)this.element.appendChild(o[u].cloneNode(!0));n.hasAttribute(t)?(e=n.getAttribute(t),f=n.getAttribute(i),r=this.element):(r=this.element.querySelector("["+t+"]")||this.element,e=r.getAttribute(t),f=r.getAttribute(i),r.removeAttribute(t),r.removeAttribute(i));null!==f&&(r=this.getChildNodeByIndex(r,+f));this.composer.selection.set(r,e)},getChildNodeIndex:function(n,t){for(var i=0,r=n.childNodes,u=r.length;u>i;i++)if(r[i]===t)return i},getChildNodeByIndex:function(n,t){return n.childNodes[t]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(n,t,i){this.parent=n;this.element=t;this.config=i;this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var n=this;this.parent.on("beforeload",function(){n.parent.on("change_view",function(t){t===n.name?(n.parent.currentView=n,n.show(),setTimeout(function(){n.focus()},0)):n.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(n){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(n){var t=n.dom,i=n.browser;n.views.Composer=n.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(n,t,i){this.base(n,t,i);this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea;this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=i.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t,i){var r=this.isEmpty()?"":n.quirks.getCorrectInnerHTML(this.element);return t!==!1&&(r=this.parent.parse(r,i===!1?!1:!0)),r},setValue:function(n,t){t&&(n=this.parent.parse(n));try{this.element.innerHTML=n}catch(i){this.element.innerText=n}},cleanUp:function(){this.parent.parse(this.element)},show:function(){this.editableArea.style.display=this._displayStyle||"";this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea);"none"===this._displayStyle&&(this._displayStyle=null);this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer");this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer");this.element.setAttribute("contentEditable","true")},focus:function(t){n.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear();this.base();var i=this.element.lastChild;t&&i&&this.selection&&("BR"===i.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var n=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(n)||""===n||"<br>"===n||"<p><\/p>"===n||"<p><br><\/p>"===n||this.hasPlaceholderSet()},_initContentEditableArea:function(){var n=this;this.config.noTextarea?this.sandbox=new t.ContentEditableArea(function(){n._create()},{},this.editableArea):(this.sandbox=new t.ContentEditableArea(function(){n._create()}),this.editableArea=this.sandbox.getContentEditable(),t.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var n,i=this;this.sandbox=new t.Sandbox(function(){i._create()},{stylesheets:this.config.stylesheets});this.editableArea=this.sandbox.getIframe();n=this.textarea.element;t.insert(this.editableArea).after(n);this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var n=document.createElement("input");n.type="hidden";n.name="_wysihtml5_mode";n.value=1;t.insert(n).after(this.textarea.element)}},_create:function(){var r,u,f=this;this.doc=this.sandbox.getDocument();this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body;this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1));this.selection=new n.Selection(this.parent,this.element,this.config.uneditableContainerClassname);this.commands=new n.Commands(this.parent);this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);t.addClass(this.element,this.config.composerClassName);this.config.style&&!this.config.contentEditableMode&&this.style();this.observe();r=this.config.name;r&&(t.addClass(this.element,r),this.config.contentEditableMode||t.addClass(this.editableArea,r));this.enable();!this.config.noTextarea&&this.textarea.element.disabled&&this.disable();u="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder");u&&t.simulatePlaceholder(this.parent,this,u);this.commands.exec("styleWithCSS",!1);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();this._initLineBreaking();this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||i.isIos()||setTimeout(function(){f.focus(!0)},100);i.clearsContentEditableCorrectly()||n.quirks.ensureProperClearing(this);this.initSync&&this.config.sync&&this.initSync();this.config.noTextarea||this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var f,e,u,r=this,o=i.canDisableAutoLinking(),s=i.doesAutoLinkingInContentEditable();o&&this.commands.exec("autoUrlDetect",!1);this.config.autoLink&&((!s||s&&o)&&(this.parent.on("newword:composer",function(){t.getTextContent(r.element).match(t.autoLink.URL_REG_EXP)&&r.selection.executeAndRestore(function(i,u){for(var e=r.element.querySelectorAll("."+r.config.uneditableContainerClassname),o=!1,f=e.length;f--;)n.dom.contains(e[f],u)&&(o=!0);o||t.autoLink(u.parentNode,[r.config.uneditableContainerClassname])})}),t.observe(this.element,"blur",function(){t.autoLink(r.element,[r.config.uneditableContainerClassname])})),f=this.sandbox.getDocument().getElementsByTagName("a"),e=t.autoLink.URL_REG_EXP,u=function(i){var r=n.lang.string(t.getTextContent(i)).trim();return"www."===r.substr(0,4)&&(r="http://"+r),r},t.observe(this.element,"keydown",function(n){if(f.length){var o,s=r.selection.getSelectedNode(n.target.ownerDocument),i=t.getParentElement(s,{nodeName:"A"},4);i&&(o=u(i),setTimeout(function(){var n=u(i);n!==o&&n.match(e)&&i.setAttribute("href",n)},0))}}))},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),i.supportsEvent("resizeend")){var r=["width","height"],f=r.length,u=this.element;t.observe(u,"resizeend",function(t){var i,e=t.target||t.srcElement,o=e.style,s=0;if("IMG"===e.nodeName){for(;f>s;s++)i=r[s],o[i]&&(e.setAttribute(i,parseInt(o[i],10)),o[i]="");n.quirks.redraw(u)}})}},_initUndoManager:function(){this.undoManager=new n.UndoManager(this.parent)},_initLineBreaking:function(){function u(n){var i=t.getParentElement(n,{nodeName:["P","DIV"]},2);i&&t.contains(r.element,i)&&r.selection.executeAndRestore(function(){r.config.useLineBreaks?t.replaceWithChildNodes(i):"P"!==i.nodeName&&t.renameElement(i,"p")})}var r=this,f=["LI","P","H1","H2","H3","H4","H5","H6"],e=["UL","OL","MENU"];this.config.useLineBreaks||t.observe(this.element,["focus","keydown"],function(){if(r.isEmpty()){var n=r.doc.createElement("P");r.element.innerHTML="";r.element.appendChild(n);i.displaysCaretInEmptyContentEditableCorrectly()?r.selection.selectNode(n,!0):(n.innerHTML="<br>",r.selection.setBefore(n.firstChild))}});t.observe(this.element,"keydown",function(i){var o,s=i.keyCode;if(!i.shiftKey&&(s===n.ENTER_KEY||s===n.BACKSPACE_KEY))return o=t.getParentElement(r.selection.getSelectedNode(),{nodeName:f},4),o?(setTimeout(function(){var f,i=r.selection.getSelectedNode();if("LI"===o.nodeName){if(!i)return;f=t.getParentElement(i,{nodeName:e},2);f||u(i)}s===n.ENTER_KEY&&o.nodeName.match(/^H[1-6]$/)&&u(i)},0),void 0):(r.config.useLineBreaks&&s===n.ENTER_KEY&&!n.browser.insertsLineBreaksOnReturn()&&(i.preventDefault(),r.commands.exec("insertLineBreak")),void 0)})}})}(wysihtml5),function(n){var t=n.dom,r=document,e=window,f=r.createElement("div"),i=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],u=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],o=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",n.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],s=function(n){if(n.setActive)try{n.setActive()}catch(s){}else{var i=n.style,u=r.documentElement.scrollTop||r.body.scrollTop,f=r.documentElement.scrollLeft||r.body.scrollLeft,o={position:i.position,top:i.top,left:i.left,WebkitUserSelect:i.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(n);n.focus();t.setStyles(o).on(n);e.scrollTo&&e.scrollTo(f,u)}};n.views.Composer.prototype.style=function(){var l,c,h=this,a=r.querySelector(":focus"),e=this.textarea.element,v=e.hasAttribute("placeholder"),p=v&&e.getAttribute("placeholder"),y=e.style.display,w=e.disabled;return this.focusStylesHost=f.cloneNode(!1),this.blurStylesHost=f.cloneNode(!1),this.disabledStylesHost=f.cloneNode(!1),v&&e.removeAttribute("placeholder"),e===a&&e.blur(),e.disabled=!1,e.style.display=l="none",(e.getAttribute("rows")&&"auto"===t.getStyle("height").from(e)||e.getAttribute("cols")&&"auto"===t.getStyle("width").from(e))&&(e.style.display=l=y),t.copyStyles(u).from(e).to(this.editableArea).andTo(this.blurStylesHost),t.copyStyles(i).from(e).to(this.element).andTo(this.blurStylesHost),t.insertCSS(o).into(this.element.ownerDocument),e.disabled=!0,t.copyStyles(u).from(e).to(this.disabledStylesHost),t.copyStyles(i).from(e).to(this.disabledStylesHost),e.disabled=w,e.style.display=y,s(e),e.style.display=l,t.copyStyles(u).from(e).to(this.focusStylesHost),t.copyStyles(i).from(e).to(this.focusStylesHost),e.style.display=y,t.copyStyles(["display"]).from(e).to(this.editableArea),c=n.lang.array(u).without(["display"]),a?a.focus():e.blur(),v&&e.setAttribute("placeholder",p),this.parent.on("focus:composer",function(){t.copyStyles(c).from(h.focusStylesHost).to(h.editableArea);t.copyStyles(i).from(h.focusStylesHost).to(h.element)}),this.parent.on("blur:composer",function(){t.copyStyles(c).from(h.blurStylesHost).to(h.editableArea);t.copyStyles(i).from(h.blurStylesHost).to(h.element)}),this.parent.observe("disable:composer",function(){t.copyStyles(c).from(h.disabledStylesHost).to(h.editableArea);t.copyStyles(i).from(h.disabledStylesHost).to(h.element)}),this.parent.observe("enable:composer",function(){t.copyStyles(c).from(h.blurStylesHost).to(h.editableArea);t.copyStyles(i).from(h.blurStylesHost).to(h.element)}),this}}(wysihtml5),function(n){var t=n.dom,i=n.browser,r={66:"bold",73:"italic",85:"underline"},u=function(n,t,i){var f,u=n.getPreviousNode(t,!0),r=n.getSelectedNode();if(1!==r.nodeType&&r.parentNode!==i&&(r=r.parentNode),u)if(1==r.nodeType){if(f=r.firstChild,1==u.nodeType)for(;r.firstChild;)u.appendChild(r.firstChild);else for(;r.firstChild;)t.parentNode.insertBefore(r.firstChild,t);r.parentNode&&r.parentNode.removeChild(r);n.setBefore(f)}else 1==u.nodeType?u.appendChild(r):t.parentNode.insertBefore(r,t),n.setBefore(r)},f=function(n,t,i,r){var f,e,o;t.isCollapsed()?t.caretIsInTheBeginnig("LI")?(n.preventDefault(),r.commands.exec("outdentList")):t.caretIsInTheBeginnig()?n.preventDefault():(t.caretIsFirstInSelection()&&t.getPreviousNode()&&t.getPreviousNode().nodeName&&/^H\d$/gi.test(t.getPreviousNode().nodeName)&&(f=t.getPreviousNode(),n.preventDefault(),/^\s*$/.test(f.textContent||f.innerText)?f.parentNode.removeChild(f):(e=f.ownerDocument.createRange(),e.selectNodeContents(f),e.collapse(!1),t.setSelection(e))),o=t.caretIsBeforeUneditable(),o&&(n.preventDefault(),u(t,o,i))):t.containsUneditable()&&(n.preventDefault(),t.deleteContents())},e=function(n){if(n.selection.isCollapsed()){if(n.selection.caretIsInTheBeginnig("LI")&&n.commands.exec("indentList"))return}else n.selection.deleteContents();n.commands.exec("insertHTML","&emsp;")};n.views.Composer.prototype.observe=function(){var h,l,u=this,a=this.getValue(!1,!1),s=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),o=this.element,c=i.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?o:this.sandbox.getWindow();t.observe(s,"DOMNodeRemoved",function(){clearInterval(h);u.parent.fire("destroy:composer")});i.supportsMutationEvents()||(h=setInterval(function(){t.contains(document.documentElement,s)||(clearInterval(h),u.parent.fire("destroy:composer"))},250));t.observe(c,["drop","paste","mouseup","focus","keyup"],function(){setTimeout(function(){u.parent.fire("interaction").fire("interaction:composer")},0)});this.config.handleTables&&(!this.tableClickHandle&&this.doc.execCommand&&n.browser.supportsCommand(this.doc,"enableObjectResizing")&&n.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?this.tableClickHandle=t.observe(s,["focus","mouseup","mouseover"],function(){u.doc.execCommand("enableObjectResizing",!1,"false");u.doc.execCommand("enableInlineTableEditing",!1,"false");u.tableClickHandle.stop()}):setTimeout(function(){u.doc.execCommand("enableObjectResizing",!1,"false");u.doc.execCommand("enableInlineTableEditing",!1,"false")},0)),this.tableSelection=n.quirks.tableCellsSelection(o,u.parent));t.observe(c,"focus",function(n){u.parent.fire("focus",n).fire("focus:composer",n);setTimeout(function(){a=u.getValue(!1,!1)},0)});t.observe(c,"blur",function(n){if(a!==u.getValue(!1,!1)){var t=n;"function"==typeof Object.create&&(t=Object.create(n,{type:{value:"change"}}));u.parent.fire("change",t).fire("change:composer",t)}u.parent.fire("blur",n).fire("blur:composer",n)});t.observe(o,"dragenter",function(){u.parent.fire("unset_placeholder")});t.observe(o,["drop","paste","beforepaste"],function(n){u.parent.fire(n.type,n).fire(n.type+":composer",n)});this.config.copyedFromMarking&&t.observe(o,"copy",function(n){n.clipboardData&&(n.clipboardData.setData("text/html",u.config.copyedFromMarking+u.selection.getHtml()),n.preventDefault());u.parent.fire(n.type,n).fire(n.type+":composer",n)});t.observe(o,"keyup",function(t){var i=t.keyCode;(i===n.SPACE_KEY||i===n.ENTER_KEY)&&u.parent.fire("newword:composer")});this.parent.on("paste:composer",function(){setTimeout(function(){u.parent.fire("newword:composer")},0)});i.canSelectImagesInContentEditable()||t.observe(o,"mousedown",function(t){var i=t.target,r=o.querySelectorAll("img"),f=o.querySelectorAll("."+u.config.uneditableContainerClassname+" img"),e=n.lang.array(r).without(f);"IMG"===i.nodeName&&n.lang.array(e).contains(i)&&u.selection.selectNode(i)});i.canSelectImagesInContentEditable()||t.observe(o,"drop",function(){setTimeout(function(){u.selection.getSelection().removeAllRanges()},0)});i.hasHistoryIssue()&&i.supportsSelectionModify()&&t.observe(o,"keydown",function(n){if(n.metaKey||n.ctrlKey){var t=n.keyCode,r=o.ownerDocument.defaultView,i=r.getSelection();(37===t||39===t)&&(37===t&&(i.modify("extend","left","lineboundary"),n.shiftKey||i.collapseToStart()),39===t&&(i.modify("extend","right","lineboundary"),n.shiftKey||i.collapseToEnd()),n.preventDefault())}});t.observe(o,"keydown",function(n){var t=n.keyCode,i=r[t];(n.ctrlKey||n.metaKey)&&!n.altKey&&i&&(u.commands.exec(i),n.preventDefault());8===t?f(n,u.selection,o,u):u.config.handleTabKey&&9===t&&(n.preventDefault(),e(u,o))});t.observe(o,"keydown",function(t){var i,r=u.selection.getSelectedNode(!0),f=t.keyCode;r&&"IMG"===r.nodeName&&(f===n.BACKSPACE_KEY||f===n.DELETE_KEY)&&(i=r.parentNode,i.removeChild(r),"A"!==i.nodeName||i.firstChild||i.parentNode.removeChild(i),setTimeout(function(){n.quirks.redraw(o)},0),t.preventDefault())});!this.config.contentEditableMode&&i.hasIframeFocusIssue()&&(t.observe(s,"focus",function(){setTimeout(function(){u.doc.querySelector(":focus")!==u.element&&u.focus()},0)}),t.observe(this.element,"blur",function(){setTimeout(function(){u.selection.getSelection().removeAllRanges()},0)}));l={IMG:"Image: ",A:"Link: "};t.observe(o,"mouseover",function(n){var r,u,t=n.target,i=t.nodeName;("A"===i||"IMG"===i)&&(u=t.hasAttribute("title"),u||(r=l[i]+(t.getAttribute("href")||t.getAttribute("src")),t.setAttribute("title",r)))})}}(wysihtml5),function(n){var t=400;n.views.Synchronizer=Base.extend({constructor:function(n,t,i){this.editor=n;this.textarea=t;this.composer=i;this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(n.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(n){var t=this.textarea.getValue(!1,!1);t?this.composer.setValue(t,n):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(n){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(n):this.fromComposerToTextarea(n)},_observe:function(){var r,i=this,u=this.textarea.element.form,f=function(){r=setInterval(function(){i.fromComposerToTextarea()},t)},e=function(){clearInterval(r);r=null};f();u&&(n.dom.observe(u,"submit",function(){i.sync(!0)}),n.dom.observe(u,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)}));this.editor.on("change_view",function(n){"composer"!==n||r?"textarea"===n&&(i.fromComposerToTextarea(!0),e()):(i.fromTextareaToComposer(!0),f())});this.editor.on("destroy:composer",e)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(n,t,i){this.base(n,t,i);this._observe()},clear:function(){this.element.value=""},getValue:function(n){var t=this.isEmpty()?"":this.element.value;return n!==!1&&(t=this.parent.parse(t)),t},setValue:function(n,t){t&&(n=this.parent.parse(n));this.element.value=n},cleanUp:function(){var n=this.parent.parse(this.element.value);this.element.value=n},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),i=this.element.getAttribute("placeholder")||null,n=this.element.value,r=!n;return t&&r||n===i},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,n=this.parent,i={focusin:"focus",focusout:"blur"},r=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];n.on("beforeload",function(){wysihtml5.dom.observe(t,r,function(t){var r=i[t.type]||t.type;n.fire(r).fire(r+":textarea")});wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){n.fire("paste").fire("paste:textarea")},0)})})}}),function(n){var t,i={name:t,style:!0,toolbar:t,showToolbarAfterInit:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},pasteParserRulesets:null,parser:n.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:t,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,uneditableContainerClassname:"wysihtml5-uneditable-container",copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};n.Editor=n.lang.Dispatcher.extend({constructor:function(t,r){if(this.editableElement="string"==typeof t?document.getElementById(t):t,this.config=n.lang.object({}).merge(i).merge(r).get(),this._isCompatible=n.browser.supported(),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new n.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&n.browser.isTouchDevice()){var u=this;return setTimeout(function(){u.fire("beforeload").fire("load")},0),void 0}n.dom.addClass(document.body,this.config.bodyClassName);this.composer=new n.views.Composer(this,this.editableElement,this.config);this.currentView=this.composer;"function"==typeof this.config.parser&&this._initParser();this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea||(this.synchronizer=new n.views.Synchronizer(this,this.textarea,this.composer));this.config.toolbar&&(this.toolbar=new n.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(n,t){return this.currentView.getValue(n,t)},setValue:function(n,t){return this.fire("unset_placeholder"),n?(this.currentView.setValue(n,t),this):this.clear()},cleanUp:function(){this.currentView.cleanUp()},focus:function(n){return this.currentView.focus(n),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t,i){var r=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,u=this.config.parser(t,{rules:this.config.parserRules,cleanUp:this.config.cleanUp,context:r,uneditableClass:this.config.uneditableContainerClassname,clearInternals:i});return"object"==typeof t&&n.quirks.redraw(t),u},_initParser:function(){var t,i=this;n.browser.supportsModenPaste()?this.on("paste:composer",function(r){r.preventDefault();t=n.dom.getPastedHtml(r);t&&i._cleanAndPaste(t)}):this.on("beforepaste:composer",function(t){t.preventDefault();n.dom.getPastedHtmlWithDiv(i.composer,function(n){n&&i._cleanAndPaste(n)})})},_cleanAndPaste:function(t){var i=n.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.uneditableContainerClassname});this.composer.selection.deleteContents();this.composer.selection.insertHTML(i)}})}(wysihtml5),function(n){var t=n.dom,i="wysihtml5-command-dialog-opened",r="input, select, textarea",u="[data-wysihtml5-dialog-field]",f="data-wysihtml5-dialog-field";n.toolbar.Dialog=n.lang.Dispatcher.extend({constructor:function(n,t){this.link=n;this.container=t},_observe:function(){var u,e,o,f,s,h;if(!this._observed){for(u=this,e=function(n){var t=u._serialize();t==u.elementToChange?u.fire("edit",t):u.fire("save",t);u.hide();n.preventDefault();n.stopPropagation()},t.observe(u.link,"click",function(){t.hasClass(u.link,i)&&setTimeout(function(){u.hide()},0)}),t.observe(this.container,"keydown",function(t){var i=t.keyCode;i===n.ENTER_KEY&&e(t);i===n.ESCAPE_KEY&&(u.fire("cancel"),u.hide())}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",e),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(n){u.fire("cancel");u.hide();n.preventDefault();n.stopPropagation()}),o=this.container.querySelectorAll(r),f=0,s=o.length,h=function(){clearInterval(u.interval)};s>f;f++)t.observe(o[f],"change",h);this._observed=!0}},_serialize:function(){for(var i=this.elementToChange||{},t=this.container.querySelectorAll(u),r=t.length,n=0;r>n;n++)i[t[n].getAttribute(f)]=t[n].value;return i},_interpolate:function(n){for(var t,r,e,s=document.querySelector(":focus"),o=this.container.querySelectorAll(u),h=o.length,i=0;h>i;i++)t=o[i],t!==s&&(n&&"hidden"===t.type||(r=t.getAttribute(f),e=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(r)||"":t.defaultValue,t.value=e))},show:function(n){if(!t.hasClass(this.link,i)){var f=this,u=this.container.querySelector(r);if(this.elementToChange=n,this._observe(),this._interpolate(),n&&(this.interval=setInterval(function(){f._interpolate(!0)},500)),t.addClass(this.link,i),this.container.style.display="",this.fire("show"),u&&!n)try{u.focus()}catch(e){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;t.removeClass(this.link,i);this.container.style.display="none";this.fire("hide")}})}(wysihtml5),function(n){var t=n.dom,u={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},f={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},r={"x-webkit-speech":"",speech:""};n.toolbar.Speech=function(e,o){var c,h,l,s=document.createElement("input");return n.browser.supportsSpeechApiOn(s)?(c=e.editor.textarea.element.getAttribute("lang"),c&&(r.lang=c),h=document.createElement("div"),n.lang.object(i).merge({width:o.offsetWidth+"px",height:o.offsetHeight+"px"}),t.insert(s).into(h),t.insert(h).into(o),t.setStyles(f).on(s),t.setAttributes(r).on(s),t.setStyles(i).on(h),t.setStyles(u).on(o),l="onwebkitspeechchange"in s?"webkitspeechchange":"speechchange",t.observe(s,l,function(){e.execCommand("insertText",s.value);s.value=""}),t.observe(s,"click",function(n){t.hasClass(o,"wysihtml5-command-disabled")&&n.preventDefault();n.stopPropagation()}),void 0):(o.style.display="none",void 0)}}(wysihtml5),function(n){var r="wysihtml5-command-disabled",u="wysihtml5-commands-disabled",i="wysihtml5-command-active",f="wysihtml5-action-active",t=n.dom;n.toolbar.Toolbar=Base.extend({constructor:function(t,e,o){this.editor=t;this.container="string"==typeof e?document.getElementById(e):e;this.composer=t.composer;this._getLinks("command");this._getLinks("action");this._observe();o&&this.show();null!=t.config.classNameCommandDisabled&&(r=t.config.classNameCommandDisabled);null!=t.config.classNameCommandsDisabled&&(u=t.config.classNameCommandsDisabled);null!=t.config.classNameCommandActive&&(i=t.config.classNameCommandActive);null!=t.config.classNameActionActive&&(f=t.config.classNameActionActive);for(var h=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),c=h.length,s=0;c>s;s++)new n.toolbar.Speech(this,h[s])},_getLinks:function(t){for(var i,e,r,u,o,s=this[t+"Links"]=n.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),h=s.length,f=0,c=this[t+"Mapping"]={};h>f;f++)i=s[f],r=i.getAttribute("data-wysihtml5-"+t),u=i.getAttribute("data-wysihtml5-"+t+"-value"),e=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+r+"']"),o=this._getDialog(i,r),c[r+":"+u]={link:i,group:e,name:r,value:u,dialog:o,state:!1}},_getDialog:function(t,i){var f,e,r=this,u=this.container.querySelector("[data-wysihtml5-dialog='"+i+"']");return u&&(f=n.toolbar["Dialog_"+i]?new n.toolbar["Dialog_"+i](t,u):new n.toolbar.Dialog(t,u),f.on("show",function(){e=r.composer.selection.getBookmark();r.editor.fire("show:dialog",{command:i,dialogContainer:u,commandLink:t})}),f.on("save",function(n){e&&r.composer.selection.setBookmark(e);r._execCommand(i,n);r.editor.fire("save:dialog",{command:i,dialogContainer:u,commandLink:t})}),f.on("cancel",function(){r.editor.focus(!1);r.editor.fire("cancel:dialog",{command:i,dialogContainer:u,commandLink:t})})),f},execCommand:function(n,t){if(!this.commandsDisabled){var i=this.commandMapping[n+":"+t];i&&i.dialog&&!i.state?i.dialog.show():this._execCommand(n,t)}},_execCommand:function(n,t){this.editor.focus(!1);this.composer.commands.exec(n,t);this._updateLinkStates()},execAction:function(n){var t=this.editor;"change_view"===n&&t.textarea&&(t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea"));"showSource"==n&&t.fire("showSource")},_observe:function(){for(var n=this,i=this.editor,r=this.container,e=this.commandLinks.concat(this.actionLinks),o=e.length,f=0;o>f;f++)"A"===e[f].nodeName?t.setAttributes({href:"javascript:;",unselectable:"on"}).on(e[f]):t.setAttributes({unselectable:"on"}).on(e[f]);t.delegate(r,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(n){n.preventDefault()});t.delegate(r,"[data-wysihtml5-command]","click",function(t){var i=this,r=i.getAttribute("data-wysihtml5-command"),u=i.getAttribute("data-wysihtml5-command-value");n.execCommand(r,u);t.preventDefault()});t.delegate(r,"[data-wysihtml5-action]","click",function(t){var i=this.getAttribute("data-wysihtml5-action");n.execAction(i);t.preventDefault()});i.on("interaction:composer",function(){n._updateLinkStates()});i.on("focus:composer",function(){n.bookmark=null});this.editor.config.handleTables&&(i.on("tableselect:composer",function(){n.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),i.on("tableunselect:composer",function(){n.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"}));i.on("change_view",function(f){i.textarea&&setTimeout(function(){n.commandsDisabled="composer"!==f;n._updateLinkStates();n.commandsDisabled?t.addClass(r,u):t.removeClass(r,u)},0)})},_updateLinkStates:function(){var s,e,o,u,h=this.commandMapping,c=this.actionMapping;for(s in h)u=h[s],this.commandsDisabled?(e=!1,t.removeClass(u.link,i),u.group&&t.removeClass(u.group,i),u.dialog&&u.dialog.hide()):(e=this.composer.commands.state(u.name,u.value),t.removeClass(u.link,r),u.group&&t.removeClass(u.group,r)),u.state!==e&&(u.state=e,e?(t.addClass(u.link,i),u.group&&t.addClass(u.group,i),u.dialog&&("object"==typeof e||n.lang.object(e).isArray()?(!u.dialog.multiselect&&n.lang.object(e).isArray()&&(e=1===e.length?e[0]:!0,u.state=e),u.dialog.show(e)):u.dialog.hide())):(t.removeClass(u.link,i),u.group&&t.removeClass(u.group,i),u.dialog&&u.dialog.hide()));for(s in c)o=c[s],"change_view"===o.name&&(o.state=this.editor.currentView===this.editor.textarea,o.state?t.addClass(o.link,f):t.removeClass(o.link,f))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(n){n.toolbar.Dialog_createTable=n.toolbar.Dialog.extend({show:function(n){this.base(n)}})}(wysihtml5),function(n){var t=(n.dom,"[data-wysihtml5-dialog-field]"),i="data-wysihtml5-dialog-field";n.toolbar.Dialog_foreColorStyle=n.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var u={},r=this.container.querySelectorAll(t),f=r.length,n=0;f>n;n++)u[r[n].getAttribute(i)]=r[n].value;return u},_interpolate:function(r){for(var f,c=document.querySelector(":focus"),o=this.container.querySelectorAll(t),l=o.length,e=0,s=this.elementToChange?n.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,h=s?s.getAttribute("style"):null,u=h?n.quirks.styleParser.parseColor(h,"color"):null;l>e;e++)f=o[e],f!==c&&(r&&"hidden"===f.type||"color"===f.getAttribute(i)&&(f.value=u?u[3]&&1!=u[3]?"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+");":"rgb("+u[0]+","+u[1]+","+u[2]+");":"rgb(0,0,0);"))}})}(wysihtml5),function(n){n.dom;n.toolbar.Dialog_fontSizeStyle=n.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(){var f=document.querySelector(":focus"),t=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),r=this.elementToChange?n.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,u=r?r.getAttribute("style"):null,i=u?n.quirks.styleParser.parseFontSize(u):null;t&&t!==f&&i&&!/^\s*$/.test(i)&&(t.value=i)}})}(wysihtml5),Handlebars=function(){var i=function(){"use strict";function n(n){this.string=n}var t;return n.prototype.toString=function(){return""+this.string},t=n}(),n=function(n){"use strict";function f(n){return c[n]||"&amp;"}function e(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}function o(n){return n instanceof h?""+n:n||0===n?(n=""+n,a.test(n)?n.replace(l,f):n):""}function s(n){return n||0===n?u(n)&&0===n.length?!0:!1:!0}var i,r,u,t={},h=n,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,a=/[&<>"'`]/;return t.extend=e,i=Object.prototype.toString,t.toString=i,r=function(n){return"function"==typeof n},r(/x/)&&(r=function(n){return"function"==typeof n&&"[object Function]"===i.call(n)}),t.isFunction=r,u=Array.isArray||function(n){return n&&"object"==typeof n?"[object Array]"===i.call(n):!1},t.isArray=u,t.escapeExpression=o,t.isEmpty=s,t}(i),t=function(){"use strict";function t(t,i){var u,f,r;for(i&&i.firstLine&&(u=i.firstLine,t+=" - "+u+":"+i.firstColumn),f=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=f[n[r]];u&&(this.lineNumber=u,this.column=i.firstColumn)}var i,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),i=t}(),r=function(n,t){"use strict";function e(n,t){this.helpers=n||{};this.partials=t||{};p(this)}function p(n){n.registerHelper("helperMissing",function(n){if(2===arguments.length)return void 0;throw new y("Missing helper: '"+n+"'");});n.registerHelper("blockHelperMissing",function(t,i){var r=i.inverse||function(){},u=i.fn;return f(t)&&(t=t.call(this)),t===!0?u(this):t===!1||null==t?r(this):o(t)?t.length>0?n.helpers.each(t,i):r(this):u(t)});n.registerHelper("each",function(n,t){var i,s,u,h=t.fn,l=t.inverse,r=0,e="";if(f(n)&&(n=n.call(this)),t.data&&(i=c(t.data)),n&&"object"==typeof n)if(o(n))for(s=n.length;s>r;r++)i&&(i.index=r,i.first=0===r,i.last=r===n.length-1),e+=h(n[r],{data:i});else for(u in n)n.hasOwnProperty(u)&&(i&&(i.key=u,i.index=r,i.first=0===r),e+=h(n[u],{data:i}),r++);return 0===r&&(e=l(this)),e});n.registerHelper("if",function(n,t){return f(n)&&(n=n.call(this)),!t.hash.includeZero&&!n||r.isEmpty(n)?t.inverse(this):t.fn(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})});n.registerHelper("with",function(n,t){return f(n)&&(n=n.call(this)),r.isEmpty(n)?void 0:t.fn(n)});n.registerHelper("log",function(t,i){var r=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;n.log(r,t)})}function l(n,t){u.log(n,t)}var a,v,o,f,s,h,u,c,i={},r=n,y=t;return i.VERSION="1.3.0",a=4,i.COMPILER_REVISION=a,v={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},i.REVISION_CHANGES=v,o=r.isArray,f=r.isFunction,s=r.toString,h="[object Object]",i.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:u,log:l,registerHelper:function(n,t,i){if(s.call(n)===h){if(i||t)throw new y("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else i&&(t.not=i),this.helpers[n]=t},registerPartial:function(n,t){s.call(n)===h?r.extend(this.partials,n):this.partials[n]=t}},u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(n,t){if(u.level<=n){var i=u.methodMap[n];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}},i.logger=u,i.log=l,c=function(n){var t={};return r.extend(t,n),t},i.createFrame=c,i}(n,t),u=function(n,t,i){"use strict";function s(n){var r,f,t=n&&n[0]||1,i=v;if(t!==i){if(i>t)throw r=o[i],f=o[t],new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+f+").");throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}}function h(n,t){if(!t)throw new u("No environment passed to template");var r=function(n,i,r,f,e,o){var s,h=t.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(t.compile)return s={helpers:f,partials:e,data:o},e[i]=t.compile(n,{data:void 0!==o},t),e[i](r,s);throw new u("The partial "+i+" could not be compiled when running in runtime-only mode");},i={escapeExpression:e.escapeExpression,invokePartial:r,programs:[],program:function(n,t,i){var r=this.programs[n];return i?r=f(n,t,i):r||(r=this.programs[n]=f(n,t)),r},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i={},e.extend(i,t),e.extend(i,n)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(r,u){var f,e,o,s;return u=u||{},o=u.partial?u:t,u.partial||(f=u.helpers,e=u.partials),s=n.call(i,o,r,f,e,u.data),u.partial||t.VM.checkRevision(i.compilerInfo),s}}function c(n,t,i){var u=Array.prototype.slice.call(arguments,3),r=function(n,r){return r=r||{},t.apply(this,[n,r.data||i].concat(u))};return r.program=n,r.depth=u.length,r}function f(n,t,i){var r=function(n,r){return r=r||{},t(n,r.data||i)};return r.program=n,r.depth=0,r}function l(n,t,i,r,f,e){var o={partial:!0,helpers:r,partials:f,data:e};if(void 0===n)throw new u("The partial "+t+" could not be found");if(n instanceof Function)return n(i,o)}function a(){return""}var r={},e=n,u=t,v=i.COMPILER_REVISION,o=i.REVISION_CHANGES;return r.checkRevision=s,r.template=h,r.programWithDepth=c,r.program=f,r.invokePartial=l,r.noop=a,r}(n,t,r);return function(n,t,i,r,u){"use strict";var c,f=n,l=t,a=i,e=r,o=u,s=function(){var n=new f.HandlebarsEnvironment;return e.extend(n,f),n.SafeString=l,n.Exception=a,n.Utils=e,n.VM=o,n.template=function(t){return o.template(t,n)},n},h=s();return h.create=s,c=h}(r,i,t,n,u)}(),this.wysihtml5=this.wysihtml5||{},this.wysihtml5.tpl=this.wysihtml5.tpl||{},this.wysihtml5.tpl.blockquote=Handlebars.template(function(n,t,i,r,u){function s(n){var t,i="";return i+="btn-"+a((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===l?t.apply(n):t)),i}function h(){return' \n      <span class="fa fa-quote-left"><\/span>\n    '}function c(){return'\n      <span class="glyphicon glyphicon-quote"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",l="function",a=this.escapeExpression,o=this;return e+='<li>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,s,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote" data-wysihtml5-display-format-name="false" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,c,u),fn:o.program(3,h,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e}),this.wysihtml5.tpl.color=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+o((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===e?t.apply(n):t)),i}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,s="",e="function",o=this.escapeExpression,h=this;return s+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(s+=f),s+='" data-toggle="dropdown" tabindex="-1">\n    <span class="current-color">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.black,typeof f===e?f.apply(t):f))+'<\/span>\n    <b class="caret"><\/b>\n  <\/a>\n  <ul class="dropdown-menu">\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="black"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="black">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.black,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="silver"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="silver">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.silver,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="gray"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="gray">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.gray,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="maroon"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="maroon">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.maroon,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="red"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.red,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="purple"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="purple">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.purple,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="green"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.green,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="olive"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="olive">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.olive,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="navy"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="navy">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.navy,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="blue"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.blue,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="orange"><\/div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="orange">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.colours,f=null==f||f===!1?f:f.orange,typeof f===e?f.apply(t):f))+"<\/a><\/li>\n  <\/ul>\n<\/li>\n",s}),this.wysihtml5.tpl.emphasis=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(n,t){var r,u="";return u+='\n    <a class="btn ',r=i["if"].call(n,(r=n&&n.options,r=null==r||r===!1?r:r.toolbar,null==r||r===!1?r:r.size),{hash:{},inverse:o.noop,fn:o.program(1,c,t),data:t}),(r||0===r)&&(u+=r),u+=' btn-default" data-wysihtml5-command="small" title="CTRL+S" tabindex="-1">'+h((r=n&&n.locale,r=null==r||r===!1?r:r.emphasis,r=null==r||r===!1?r:r.small,typeof r===s?r.apply(n):r))+"<\/a>\n    ",u}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="bold" title="CTRL+B" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.bold,typeof f===s?f.apply(t):f))+'<\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="italic" title="CTRL+I" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.italic,typeof f===s?f.apply(t):f))+'<\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="underline" title="CTRL+U" tabindex="-1">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.emphasis,f=null==f||f===!1?f:f.underline,typeof f===s?f.apply(t):f))+"<\/a>\n    ",f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,f=null==f||f===!1?f:f.emphasis,null==f||f===!1?f:f.small),{hash:{},inverse:o.noop,fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/div>\n<\/li>\n",e}),this.wysihtml5.tpl["font-styles"]=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+o((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===e?t.apply(n):t)),i}function l(){return'\n      <span class="fa fa-font"><\/span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-font"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,s="",e="function",o=this.escapeExpression,h=this;return s+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(s+=f),s+='" data-toggle="dropdown">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:h.program(5,a,u),fn:h.program(3,l,u),data:u}),(f||0===f)&&(s+=f),s+='\n    <span class="current-font">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.normal,typeof f===e?f.apply(t):f))+'<\/span>\n    <b class="caret"><\/b>\n  <\/a>\n  <ul class="dropdown-menu">\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.normal,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h1,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h2,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h3,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h4,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h5,typeof f===e?f.apply(t):f))+'<\/a><\/li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6" tabindex="-1">'+o((f=t&&t.locale,f=null==f||f===!1?f:f.font_styles,f=null==f||f===!1?f:f.h6,typeof f===e?f.apply(t):f))+"<\/a><\/li>\n  <\/ul>\n<\/li>\n",s}),this.wysihtml5.tpl.html=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(){return'\n        <span class="fa fa-pencil"><\/span>\n      '}function a(){return'\n        <span class="glyphicon glyphicon-pencil"><\/span>\n      '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-action="change_view" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.html,f=null==f||f===!1?f:f.edit,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n      ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,a,u),fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+="\n    <\/a>\n  <\/div>\n<\/li>\n",e}),this.wysihtml5.tpl.image=Handlebars.template(function(n,t,i,r,u){function c(){return"modal-sm"}function l(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function a(){return'\n      <span class="fa fa-file-image-o"><\/span>\n    '}function v(){return'\n      <span class="glyphicon glyphicon-picture"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="bootstrap-wysihtml5-insert-image-modal modal fade" data-wysihtml5-dialog="insertImage">\n    <div class="modal-dialog ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.smallmodals),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;<\/a>\n          <h3>'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'<\/h3>\n        <\/div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-image-url form-control" data-wysihtml5-dialog-field="src">\n          <\/div> \n        <\/div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.cancel,typeof f===s?f.apply(t):f))+'<\/a>\n          <a class="btn btn-primary" data-dismiss="modal"  data-wysihtml5-dialog-action="save" href="#">'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'<\/a>\n        <\/div>\n      <\/div>\n    <\/div>\n  <\/div>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertImage" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.image,f=null==f||f===!1?f:f.insert,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(7,v,u),fn:o.program(5,a,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e}),this.wysihtml5.tpl.link=Handlebars.template(function(n,t,i,r,u){function c(){return"modal-sm"}function l(n){var t,i="";return i+="btn-"+s((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===o?t.apply(n):t)),i}function a(){return'\n      <span class="fa fa-share-square-o"><\/span>\n    '}function v(){return'\n      <span class="glyphicon glyphicon-share"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",o="function",s=this.escapeExpression,h=this;return e+='<li>\n  <div class="bootstrap-wysihtml5-insert-link-modal modal fade" data-wysihtml5-dialog="createLink">\n    <div class="modal-dialog ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.smallmodals),{hash:{},inverse:h.noop,fn:h.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;<\/a>\n          <h3>'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'<\/h3>\n        <\/div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-link-url form-control" data-wysihtml5-dialog-field="href">\n          <\/div> \n          <div class="checkbox">\n            <label> \n              <input type="checkbox" class="bootstrap-wysihtml5-insert-link-target" checked>'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.target,typeof f===o?f.apply(t):f))+'\n            <\/label>\n          <\/div>\n        <\/div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.cancel,typeof f===o?f.apply(t):f))+'<\/a>\n          <a href="#" class="btn btn-primary" data-dismiss="modal" data-wysihtml5-dialog-action="save">'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'<\/a>\n        <\/div>\n      <\/div>\n    <\/div>\n  <\/div>\n  <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:h.noop,fn:h.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="createLink" title="'+s((f=t&&t.locale,f=null==f||f===!1?f:f.link,f=null==f||f===!1?f:f.insert,typeof f===o?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:h.program(7,v,u),fn:h.program(5,a,u),data:u}),(f||0===f)&&(e+=f),e+="\n  <\/a>\n<\/li>\n",e}),this.wysihtml5.tpl.lists=Handlebars.template(function(n,t,i,r,u){function c(n){var t,i="";return i+="btn-"+h((t=n&&n.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===s?t.apply(n):t)),i}function l(){return'\n      <span class="fa fa-list-ul"><\/span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-list"><\/span>\n    '}function v(){return'\n      <span class="fa fa-list-ol"><\/span>\n    '}function y(){return'\n      <span class="glyphicon glyphicon-th-list"><\/span>\n    '}function p(){return'\n      <span class="fa fa-outdent"><\/span>\n    '}function w(){return'\n      <span class="glyphicon glyphicon-indent-right"><\/span>\n    '}function b(){return'\n      <span class="fa fa-indent"><\/span>\n    '}function k(){return'\n      <span class="glyphicon glyphicon-indent-left"><\/span>\n    '}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e="",s="function",h=this.escapeExpression,o=this;return e+='<li>\n  <div class="btn-group">\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertUnorderedList" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.unordered,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(5,a,u),fn:o.program(3,l,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="insertOrderedList" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.ordered,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(9,y,u),fn:o.program(7,v,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="Outdent" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.outdent,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(13,w,u),fn:o.program(11,p,u),data:u}),(f||0===f)&&(e+=f),e+='\n    <\/a>\n    <a class="btn ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.size),{hash:{},inverse:o.noop,fn:o.program(1,c,u),data:u}),(f||0===f)&&(e+=f),e+=' btn-default" data-wysihtml5-command="Indent" title="'+h((f=t&&t.locale,f=null==f||f===!1?f:f.lists,f=null==f||f===!1?f:f.indent,typeof f===s?f.apply(t):f))+'" tabindex="-1">\n    ',f=i["if"].call(t,(f=t&&t.options,f=null==f||f===!1?f:f.toolbar,null==f||f===!1?f:f.fa),{hash:{},inverse:o.program(17,k,u),fn:o.program(15,b,u),data:u}),(f||0===f)&&(e+=f),e+="\n    <\/a>\n  <\/div>\n<\/li>\n",e}),function(n){"use strict";"function"==typeof define&&define.amd?define("bootstrap.wysihtml5",["jquery","wysihtml5","bootstrap","bootstrap.wysihtml5.templates","bootstrap.wysihtml5.commands"],n):n(jQuery,wysihtml5)}(function(n,t){"use strict";var i=function(n,t){var i,f,r,e=function(n,i,r){if(t.tpl[n])return t.tpl[n]({locale:i,options:r})},u=function(i,r){var u,e;this.el=i;u=n.extend(!0,{},f,r);for(e in u.customTemplates)u.customTemplates.hasOwnProperty(e)&&(t.tpl[e]=u.customTemplates[e]);this.toolbar=this.createToolbar(i,u);this.editor=this.createEditor(u)};u.prototype={constructor:u,createEditor:function(t){t=t||{};t=n.extend(!0,{},t);t.toolbar=this.toolbar[0];this.initializeEditor(this.el[0],t)},initializeEditor:function(n,i){var u,r=new t.Editor(this.el[0],i);if(r.on("beforeload",this.syncBootstrapDialogEvents),r.on("beforeload",this.loadParserRules),r.composer.editableArea.contentDocument?this.addMoreShortcuts(r,r.composer.editableArea.contentDocument.body||r.composer.editableArea.contentDocument,i.shortcuts):this.addMoreShortcuts(r,r.composer.editableArea,i.shortcuts),i&&i.events)for(u in i.events)i.events.hasOwnProperty(u)&&r.on(u,i.events[u]);return r},loadParserRules:function(){"string"===n.type(this.config.parserRules)&&n.ajax({dataType:"json",url:this.config.parserRules,context:this,error:function(){void 0},success:function(n){this.config.parserRules=n;void 0}});this.config.pasteParserRulesets&&"string"===n.type(this.config.pasteParserRulesets)&&n.ajax({dataType:"json",url:this.config.pasteParserRulesets,context:this,error:function(){void 0},success:function(n){this.config.pasteParserRulesets=n}})},syncBootstrapDialogEvents:function(){var t=this;n.map(this.toolbar.commandMapping,function(n){return[n]}).filter(function(n){return n.dialog}).map(function(n){return n.dialog}).forEach(function(i){i.on("show",function(){n(this.container).modal("show")});i.on("hide",function(){n(this.container).modal("hide");setTimeout(t.composer.focus,0)});n(i.container).on("shown.bs.modal",function(){n(this).find("input, select, textarea").first().focus()})});this.on("change_view",function(){n(this.toolbar.container.children).find("a.btn").not('[data-wysihtml5-action="change_view"]').toggleClass("disabled")})},createToolbar:function(t,i){var h,o,c=this,u=n("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),s=i.locale||f.locale||"en";r.hasOwnProperty(s)||(void 0,s="en");h=n.extend(!0,{},r.en,r[s]);for(o in i.toolbar)i.toolbar[o]&&u.append(e(o,h,i));return u.find('a[data-wysihtml5-command="formatBlock"]').click(function(t){var u=t.delegateTarget||t.target||t.srcElement,i=n(u),r=i.data("wysihtml5-display-format-name"),f=i.data("wysihtml5-format-name")||i.html();(void 0===r||"true"===r)&&c.toolbar.find(".current-font").text(f)}),u.find('a[data-wysihtml5-command="foreColor"]').click(function(t){var i=t.target||t.srcElement,r=n(i);c.toolbar.find(".current-color").text(r.html())}),this.el.before(u),u},addMoreShortcuts:function(n,i,r){t.dom.observe(i,"keydown",function(i){var u,e=i.keyCode,f=r[e];(i.ctrlKey||i.metaKey||i.altKey)&&f&&t.commands[f]&&(u=n.toolbar.commandMapping[f+":null"],u&&u.dialog&&!u.state?u.dialog.show():t.commands[f].exec(n.composer,f),i.preventDefault())})}};i={resetDefaults:function(){n.fn.wysihtml5.defaultOptions=n.extend(!0,{},n.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var i=n(this);i.data("wysihtml5",new u(i,t))})},shallowExtend:function(t){var r=n.extend({},n.fn.wysihtml5.defaultOptions,t||{},n(this).data()),u=this;return i.bypassDefaults.apply(u,[r])},deepExtend:function(t){var r=n.extend(!0,{},n.fn.wysihtml5.defaultOptions,t||{}),u=this;return i.bypassDefaults.apply(u,[r])},init:function(n){var t=this;return i.shallowExtend.apply(t,[n])}};n.fn.wysihtml5=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(n.error("Method "+t+" does not exist on jQuery.wysihtml5"),void 0):i.init.apply(this,arguments)};n.fn.wysihtml5.Constructor=u;f=n.fn.wysihtml5.defaultOptions={toolbar:{"font-styles":!0,color:!1,emphasis:{small:!0},blockquote:!0,lists:!0,html:!1,link:!0,image:!0,smallmodals:!1},useLineBreaks:!1,parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,small:1,code:1,pre:1}},locale:"en",shortcuts:{83:"small",75:"createLink"}};void 0===n.fn.wysihtml5.defaultOptionsCache&&(n.fn.wysihtml5.defaultOptionsCache=n.extend(!0,{},n.fn.wysihtml5.defaultOptions));r=n.fn.wysihtml5.locale={}};i(n,t)}),function(n){n.commands.small={exec:function(t,i){return n.commands.formatInline.exec(t,i,"small")},state:function(t,i){return n.commands.formatInline.state(t,i,"small")}}}(wysihtml5),function(n){"function"==typeof define&&define.amd?define("bootstrap.wysihtml5.en-US",["jquery","bootstrap.wysihtml5"],n):n(jQuery)}(function(n){n.fn.wysihtml5.locale.en=n.fn.wysihtml5.locale["en-US"]={font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline",small:"Small"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}),"undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");if($.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict";$("body").removeClass("hold-transition");"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var n=$.AdminLTE.options;_init();$.AdminLTE.layout.activate();$.AdminLTE.tree(".sidebar");n.enableControlSidebar&&$.AdminLTE.controlSidebar.activate();n.navbarMenuSlimscroll&&"undefined"!=typeof $.fn.slimscroll&&$(".navbar .menu").slimscroll({height:n.navbarMenuHeight,alwaysVisible:!1,size:n.navbarMenuSlimscrollWidth}).css("width","100%");n.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(n.sidebarToggleSelector);n.enableBSToppltip&&$("body").tooltip({selector:n.BSTooltipSelector});n.enableBoxWidget&&$.AdminLTE.boxWidget.activate();n.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body);n.directChat.enable&&$(document).on("click",n.directChat.contactToggleSelector,function(){var n=$(this).parents(".direct-chat").first();n.toggleClass("direct-chat-contacts-open")});$('.btn-group[data-toggle="btn-toggle"]').each(function(){var n=$(this);$(this).find(".btn").on("click",function(t){n.find(".btn.active").removeClass("active");$(this).addClass("active");t.preventDefault()})})}),function(n){"use strict";n.fn.boxRefresh=function(t){function u(n){n.append(r);i.onLoadStart.call(n)}function f(n){n.find(r).remove();i.onLoadDone.call(n)}var i=n.extend({trigger:".refresh-btn",source:"",onLoadStart:function(n){return n},onLoadDone:function(n){return n}},t),r=n('<div class="overlay"><div class="fa fa-refresh fa-spin"><\/div><\/div>');return this.each(function(){if(""===i.source)return void(window.console&&window.console.log("Please specify a source first - boxRefresh()"));var t=n(this),r=t.find(i.trigger).first();r.on("click",function(n){n.preventDefault();u(t);t.find(".box-body").load(i.source,function(){f(t)})})})}}(jQuery),function(n){"use strict";n.fn.activateBox=function(){n.AdminLTE.boxWidget.activate(this)}}(jQuery),function(n){"use strict";n.fn.todolist=function(t){var i=n.extend({onCheck:function(n){return n},onUncheck:function(n){return n}},t);return this.each(function(){"undefined"!=typeof n.fn.iCheck?(n("input",this).on("ifChecked",function(){var t=n(this).parents("li").first();t.toggleClass("done");i.onCheck.call(t)}),n("input",this).on("ifUnchecked",function(){var t=n(this).parents("li").first();t.toggleClass("done");i.onUncheck.call(t)})):n("input",this).on("change",function(){var t=n(this).parents("li").first();t.toggleClass("done");n("input",t).is(":checked")?i.onCheck.call(t):i.onUncheck.call(t)})})}}(jQuery),function(n,t){"use strict";function b(i){n("body").toggleClass(i);t.layout.fixSidebar();i=="layout-boxed"&&t.controlSidebar._fix(n(".control-sidebar-bg"));n("body").hasClass("fixed")&&i=="fixed"&&(t.pushMenu.expandOnHover(),t.layout.activate());t.controlSidebar._fix(n(".control-sidebar-bg"));t.controlSidebar._fix(n(".control-sidebar"))}function k(t){return n.each(r,function(t){n("body").removeClass(r[t])}),n("body").addClass(t),nt("skin",t),!1}function nt(n,t){typeof Storage!="undefined"?localStorage.setItem(n,t):window.alert("Please use a modern browser to properly view this template!")}function tt(n){if(typeof Storage!="undefined")return localStorage.getItem(n);window.alert("Please use a modern browser to properly view this template!")}function it(){var i=tt("skin");i&&n.inArray(i,r)&&k(i);n("[data-skin]").on("click",function(t){t.preventDefault();k(n(this).data("skin"))});n("[data-layout]").on("click",function(){b(n(this).data("layout"))});n("[data-controlsidebar]").on("click",function(){b(n(this).data("controlsidebar"));var i=!t.options.controlSidebarOptions.slide;t.options.controlSidebarOptions.slide=i;i||n(".control-sidebar").removeClass("control-sidebar-open")});n("[data-sidebarskin='toggle']").on("click",function(){var t=n(".control-sidebar");t.hasClass("control-sidebar-dark")?(t.removeClass("control-sidebar-dark"),t.addClass("control-sidebar-light")):(t.removeClass("control-sidebar-light"),t.addClass("control-sidebar-dark"))});n("[data-enable='expandOnHover']").on("click",function(){n(this).attr("disabled",!0);t.pushMenu.expandOnHover();n("body").hasClass("sidebar-collapse")||n("[data-layout='sidebar-collapse']").click()});n("body").hasClass("fixed")&&n("[data-layout='fixed']").attr("checked","checked");n("body").hasClass("layout-boxed")&&n("[data-layout='layout-boxed']").attr("checked","checked");n("body").hasClass("sidebar-collapse")&&n("[data-layout='sidebar-collapse']").attr("checked","checked")}var r=["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"],f=n("<div />",{id:"control-sidebar-theme-demo-options-tab","class":"tab-pane active"}),d=n("<li />",{"class":"active"}).html("<a href='#control-sidebar-theme-demo-options-tab' data-toggle='tab'><i class='fa fa-wrench'><\/i><\/a>"),e,o,s,h,c,l,a,v,y,p,w;n("[href='#control-sidebar-home-tab']").parent().before(d);var u=n("<div />"),i=n("<ul />",{"class":"list-unstyled clearfix"}),g=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-blue' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px; background: #367fa9;'><\/span><span class='bg-light-blue' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Blue<\/p>");i.append(g);e=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-black' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div style='box-shadow: 0 0 2px rgba(0,0,0,0.1)' class='clearfix'><span style='display:block; width: 20%; float: left; height: 7px; background: #fefefe;'><\/span><span style='display:block; width: 80%; float: left; height: 7px; background: #fefefe;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Black<\/p>");i.append(e);o=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-purple' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-purple-active'><\/span><span class='bg-purple' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Purple<\/p>");i.append(o);s=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-green' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-green-active'><\/span><span class='bg-green' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Green<\/p>");i.append(s);h=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-red' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-red-active'><\/span><span class='bg-red' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Red<\/p>");i.append(h);c=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-yellow' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-yellow-active'><\/span><span class='bg-yellow' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin'>Yellow<\/p>");i.append(c);l=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-blue-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px; background: #367fa9;'><\/span><span class='bg-light-blue' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px'>Blue Light<\/p>");i.append(l);a=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-black-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div style='box-shadow: 0 0 2px rgba(0,0,0,0.1)' class='clearfix'><span style='display:block; width: 20%; float: left; height: 7px; background: #fefefe;'><\/span><span style='display:block; width: 80%; float: left; height: 7px; background: #fefefe;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px'>Black Light<\/p>");i.append(a);v=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-purple-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-purple-active'><\/span><span class='bg-purple' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px'>Purple Light<\/p>");i.append(v);y=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-green-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-green-active'><\/span><span class='bg-green' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px'>Green Light<\/p>");i.append(y);p=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-red-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-red-active'><\/span><span class='bg-red' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px'>Red Light<\/p>");i.append(p);w=n("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-yellow-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-yellow-active'><\/span><span class='bg-yellow' style='display:block; width: 80%; float: left; height: 7px;'><\/span><\/div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'><\/span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'><\/span><\/div><\/a><p class='text-center no-margin' style='font-size: 12px;'>Yellow Light<\/p>");i.append(w);u.append("<h4 class='control-sidebar-heading'>Skins<\/h4>");u.append(i);f.append(u);n("#control-sidebar-home-tab").after(f);it()}(jQuery,$.AdminLTE),function(n){n.notifyInfo=function(t,i,r){n.notify("info",t,i,r)};n.notifySuccess=function(t,i,r){n.notify("success",t,i,r)};n.notifyError=function(t,i,r){n.notify("error",t,i,r)};n.notifyWarning=function(t,i,r){n.notify("notice",t,i,r)};n.notify=function(t,i,r,u){var f={title:i,text:r,type:t};n.extend(f,u);new PNotify(f)};n.infoMessageBox=function(t,i){t="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª";culture=="fr-FR"&&(t="Information");n.MessageBox("info",t,i)};n.successMessageBox=function(t,i){t="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª";culture=="fr-FR"&&(t="Information");n.notifySuccess(t,i)};n.successMessageBoxNew=function(t,i){t="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª";culture=="fr-FR"&&(t="Information");n.MessageBox("success",t,i)};n.warningMessageBox=function(t,i){t="Ø¥Ù†Ø°Ø§Ø±";culture=="fr-FR"&&(t="Avertissement");n.notifyWarning(t,i)};n.warningMessageBoxNew=function(t,i){t="Ø¥Ù†Ø°Ø§Ø±";culture=="fr-FR"&&(t="Avertissement");n.MessageBox("warning",t,i)};n.errorMessageBox=function(t,i){t="Ø®Ø·Ø£";culture=="fr-FR"&&(t="Erreur");n.notifyError(t,i)};n.MessageBox=function(t,i,r){var u,f;t=="info"&&(u="modal-info",f="btn  btn-info");t=="success"&&(u="modal-success",f="errorZone MsgValid");t=="warning"&&(u="modal-warning",f="btn btn-warning");t=="error"&&(u="modal-danger",f="btn  btn-danger");n("#Model_msg_Class").removeClass();n("#Model_msg_Class").addClass(u);n("#Model_msg_Btn").removeClass();n("#Model_msg_Btn").addClass(f);n("#Model_msg_Header_title").html(i);n("#Model_msg_body").html(r);n("#Model_msg").modal("show")}}(jQuery),function(n){"function"==typeof define&&define.amd?define("pnotify",["jquery"],n):n(jQuery)}(function(n){var f={dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25,context:n("body")},t,i,r=n(window),u=function(){i=n("body");PNotify.prototype.options.stack.context=i;r=n(window);r.bind("resize",function(){t&&clearTimeout(t);t=setTimeout(function(){PNotify.positionAll(!0)},10)})};return PNotify=function(n){this.parseOptions(n);this.init()},n.extend(PNotify.prototype,{version:"2.0.1",options:{title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"bootstrap3",addclass:"",cornerclass:"",auto_display:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,opacity:1,animation:"fade",animate_speed:"slow",position_animate_speed:500,shadow:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,destroy:!0,stack:f},modules:{},runModules:function(n,t){var r;for(var i in this.modules)(r="object"==typeof t&&i in t?t[i]:t,"function"==typeof this.modules[i][n])&&this.modules[i][n](this,"object"==typeof this.options[i]?this.options[i]:{},r)},state:"initializing",timer:null,styles:null,elem:null,container:null,title_container:null,text_container:null,animating:!1,timerHide:!1,init:function(){var t=this;return this.modules={},n.extend(!0,this.modules,PNotify.prototype.modules),this.styles="object"==typeof this.options.styling?this.options.styling:PNotify.styling[this.options.styling],this.elem=n("<div />",{"class":"ui-pnotify "+this.options.addclass,css:{display:"none"},mouseenter:function(){if(t.options.mouse_reset&&"out"===t.animating){if(!t.timerHide)return;t.cancelRemove()}t.options.hide&&t.options.mouse_reset&&t.cancelRemove()},mouseleave:function(){t.options.hide&&t.options.mouse_reset&&t.queueRemove();PNotify.positionAll()}}),this.container=n("<div />",{"class":this.styles.container+" ui-pnotify-container "+("error"===this.options.type?this.styles.error:"info"===this.options.type?this.styles.info:"success"===this.options.type?this.styles.success:this.styles.notice)}).appendTo(this.elem),""!==this.options.cornerclass&&this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass),this.options.shadow&&this.container.addClass("ui-pnotify-shadow"),!1!==this.options.icon&&n("<div />",{"class":"ui-pnotify-icon"}).append(n("<span />",{"class":!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container),this.title_container=this.text_container=n("<div />",{"class":"ui-pnotify-text"}).appendTo(this.container),!1===this.options.text?this.text_container.hide():this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),"string"==typeof this.options.width&&this.elem.css("width",this.options.width),"string"==typeof this.options.min_height&&this.container.css("min-height",this.options.min_height),PNotify.notices="top"===this.options.stack.push?n.merge([this],PNotify.notices):n.merge(PNotify.notices,[this]),"top"===this.options.stack.push&&this.queuePosition(!1,1),this.options.stack.animation=!1,this.runModules("init"),this.options.auto_display&&this.open(),this},update:function(t){var i=this.options;return this.parseOptions(i,t),this.options.cornerclass!==i.cornerclass&&this.container.removeClass("ui-corner-all "+i.cornerclass).addClass(this.options.cornerclass),this.options.shadow!==i.shadow&&(this.options.shadow?this.container.addClass("ui-pnotify-shadow"):this.container.removeClass("ui-pnotify-shadow")),!1===this.options.addclass?this.elem.removeClass(i.addclass):this.options.addclass!==i.addclass&&this.elem.removeClass(i.addclass).addClass(this.options.addclass),!1===this.options.title?this.title_container.slideUp("fast"):this.options.title!==i.title&&(this.options.title_escape?this.title_container.text(this.options.title):this.title_container.html(this.options.title),!1===i.title&&this.title_container.slideDown(200)),!1===this.options.text?this.text_container.slideUp("fast"):this.options.text!==i.text&&(this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),!1===i.text&&this.text_container.slideDown(200)),this.options.type!==i.type&&this.container.removeClass(this.styles.error+" "+this.styles.notice+" "+this.styles.success+" "+this.styles.info).addClass("error"===this.options.type?this.styles.error:"info"===this.options.type?this.styles.info:"success"===this.options.type?this.styles.success:this.styles.notice),(this.options.icon!==i.icon||!0===this.options.icon&&this.options.type!==i.type)&&(this.container.find("div.ui-pnotify-icon").remove(),!1!==this.options.icon&&n("<div />",{"class":"ui-pnotify-icon"}).append(n("<span />",{"class":!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container)),this.options.width!==i.width&&this.elem.animate({width:this.options.width}),this.options.min_height!==i.min_height&&this.container.animate({minHeight:this.options.min_height}),this.options.opacity!==i.opacity&&this.elem.fadeTo(this.options.animate_speed,this.options.opacity),this.options.hide?i.hide||this.queueRemove():this.cancelRemove(),this.queuePosition(!0),this.runModules("update",i),this},open:function(){this.state="opening";this.runModules("beforeOpen");var n=this;return this.elem.parent().length||this.elem.appendTo(this.options.stack.context?this.options.stack.context:i),"top"!==this.options.stack.push&&this.position(!0),"fade"===this.options.animation||"fade"===this.options.animation.effect_in?this.elem.show().fadeTo(0,0).hide():1!==this.options.opacity&&this.elem.show().fadeTo(0,this.options.opacity).hide(),this.animateIn(function(){n.queuePosition(!0);n.options.hide&&n.queueRemove();n.state="open";n.runModules("afterOpen")}),this},remove:function(t){this.state="closing";this.timerHide=!!t;this.runModules("beforeClose");var i=this;return this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.animateOut(function(){if(i.state="closed",i.runModules("afterClose"),i.queuePosition(!0),i.options.remove&&i.elem.detach(),i.runModules("beforeDestroy"),i.options.destroy&&null!==PNotify.notices){var t=n.inArray(i,PNotify.notices);-1!==t&&PNotify.notices.splice(t,1)}i.runModules("afterDestroy")}),this},get:function(){return this.elem},parseOptions:function(t,i){var f,r,e,u;this.options=n.extend(!0,{},PNotify.prototype.options);this.options.stack=PNotify.prototype.options.stack;f=[t,i];for(e in f){if(r=f[e],"undefined"==typeof r)break;if("object"!=typeof r)this.options.text=r;else for(u in r)this.modules[u]?n.extend(!0,this.options[u],r[u]):this.options[u]=r[u]}},animateIn:function(n){this.animating="in";var t;t="undefined"!=typeof this.options.animation.effect_in?this.options.animation.effect_in:this.options.animation;"none"===t?(this.elem.show(),n()):"show"===t?this.elem.show(this.options.animate_speed,n):"fade"===t?this.elem.show().fadeTo(this.options.animate_speed,this.options.opacity,n):"slide"===t?this.elem.slideDown(this.options.animate_speed,n):"function"==typeof t?t("in",n,this.elem):this.elem.show(t,"object"==typeof this.options.animation.options_in?this.options.animation.options_in:{},this.options.animate_speed,n);this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"});"slide"!==t&&this.elem.css("overflow","visible");this.container.css("overflow","hidden")},animateOut:function(n){this.animating="out";var t;t="undefined"!=typeof this.options.animation.effect_out?this.options.animation.effect_out:this.options.animation;"none"===t?(this.elem.hide(),n()):"show"===t?this.elem.hide(this.options.animate_speed,n):"fade"===t?this.elem.fadeOut(this.options.animate_speed,n):"slide"===t?this.elem.slideUp(this.options.animate_speed,n):"function"==typeof t?t("out",n,this.elem):this.elem.hide(t,"object"==typeof this.options.animation.options_out?this.options.animation.options_out:{},this.options.animate_speed,n);this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"});"slide"!==t&&this.elem.css("overflow","visible");this.container.css("overflow","hidden")},position:function(n){var t=this.options.stack,u=this.elem,h,s,f,e,o;if(u.parent().hasClass("ui-effects-wrapper")&&(u=this.elem.css({left:"0",top:"0",right:"0",bottom:"0"}).parent()),"undefined"==typeof t.context&&(t.context=i),t){if("number"!=typeof t.nextpos1&&(t.nextpos1=t.firstpos1),"number"!=typeof t.nextpos2&&(t.nextpos2=t.firstpos2),"number"!=typeof t.addpos2&&(t.addpos2=0),h="none"===u.css("display"),!h||n){f={};switch(t.dir1){case"down":e="top";break;case"up":e="bottom";break;case"left":e="right";break;case"right":e="left"}n=parseInt(u.css(e).replace(/(?:\..*|[^0-9.])/g,""));isNaN(n)&&(n=0);"undefined"!=typeof t.firstpos1||h||(t.firstpos1=n,t.nextpos1=t.firstpos1);switch(t.dir2){case"down":o="top";break;case"up":o="bottom";break;case"left":o="right";break;case"right":o="left"}if(s=parseInt(u.css(o).replace(/(?:\..*|[^0-9.])/g,"")),isNaN(s)&&(s=0),"undefined"!=typeof t.firstpos2||h||(t.firstpos2=s,t.nextpos2=t.firstpos2),("down"===t.dir1&&t.nextpos1+u.height()>(t.context.is(i)?r.height():t.context.prop("scrollHeight"))||"up"===t.dir1&&t.nextpos1+u.height()>(t.context.is(i)?r.height():t.context.prop("scrollHeight"))||"left"===t.dir1&&t.nextpos1+u.width()>(t.context.is(i)?r.width():t.context.prop("scrollWidth"))||"right"===t.dir1&&t.nextpos1+u.width()>(t.context.is(i)?r.width():t.context.prop("scrollWidth")))&&(t.nextpos1=t.firstpos1,t.nextpos2+=t.addpos2+("undefined"==typeof t.spacing2?25:t.spacing2),t.addpos2=0),t.animation&&t.nextpos2<s)switch(t.dir2){case"down":f.top=t.nextpos2+"px";break;case"up":f.bottom=t.nextpos2+"px";break;case"left":f.right=t.nextpos2+"px";break;case"right":f.left=t.nextpos2+"px"}else"number"==typeof t.nextpos2&&u.css(o,t.nextpos2+"px");switch(t.dir2){case"down":case"up":u.outerHeight(!0)>t.addpos2&&(t.addpos2=u.height());break;case"left":case"right":u.outerWidth(!0)>t.addpos2&&(t.addpos2=u.width())}if("number"==typeof t.nextpos1)if(t.animation&&(n>t.nextpos1||f.top||f.bottom||f.right||f.left))switch(t.dir1){case"down":f.top=t.nextpos1+"px";break;case"up":f.bottom=t.nextpos1+"px";break;case"left":f.right=t.nextpos1+"px";break;case"right":f.left=t.nextpos1+"px"}else u.css(e,t.nextpos1+"px");(f.top||f.bottom||f.right||f.left)&&u.animate(f,{duration:this.options.position_animate_speed,queue:!1});switch(t.dir1){case"down":case"up":t.nextpos1+=u.height()+("undefined"==typeof t.spacing1?25:t.spacing1);break;case"left":case"right":t.nextpos1+=u.width()+("undefined"==typeof t.spacing1?25:t.spacing1)}}return this}},queuePosition:function(n,i){return t&&clearTimeout(t),i||(i=10),t=setTimeout(function(){PNotify.positionAll(n)},i),this},cancelRemove:function(){return this.timer&&window.clearTimeout(this.timer),"closing"===this.state&&(this.elem.stop(!0),this.state="open",this.animating="in",this.elem.css("height","auto").animate({width:this.options.width,opacity:this.options.opacity},"fast")),this},queueRemove:function(){var n=this;return this.cancelRemove(),this.timer=window.setTimeout(function(){n.remove(!0)},isNaN(this.options.delay)?0:this.options.delay),this}}),n.extend(PNotify,{notices:[],removeAll:function(){n.each(PNotify.notices,function(){this.remove&&this.remove()})},positionAll:function(i){t&&clearTimeout(t);t=null;n.each(PNotify.notices,function(){var n=this.options.stack;n&&(n.nextpos1=n.firstpos1,n.nextpos2=n.firstpos2,n.addpos2=0,n.animation=i)});n.each(PNotify.notices,function(){this.position()})},styling:{jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert"},bootstrap2:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign"},bootstrap3:{container:"alert",notice:"alert-warning",notice_icon:"",info:"alert-info",info_icon:"",success:"alert-success",success_icon:"",error:"alert-danger",error_icon:""}}}),PNotify.styling.fontawesome=n.extend({},PNotify.styling.bootstrap3),n.extend(PNotify.styling.fontawesome,{notice_icon:"fa fa-exclamation-circle",info_icon:"fa fa-info",success_icon:"fa fa-check",error_icon:"fa fa-warning"}),document.body?u():n(u),PNotify}),function(n){"function"==typeof define&&define.amd?define("pnotify.buttons",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){t.prototype.options.buttons={closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,labels:{close:"Close",stick:"Stick"}};t.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(t,i){var r=this;this.myOptions=i;t.elem.on({mouseenter:function(){!r.myOptions.sticker||t.options.nonblock&&t.options.nonblock.nonblock||r.sticker.trigger("pnotify_icon").css("visibility","visible");!r.myOptions.closer||t.options.nonblock&&t.options.nonblock.nonblock||r.closer.css("visibility","visible")},mouseleave:function(){r.myOptions.sticker_hover&&r.sticker.css("visibility","hidden");r.myOptions.closer_hover&&r.closer.css("visibility","hidden")}});this.sticker=n("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:i.sticker_hover?"hidden":"visible"},click:function(){t.options.hide=!t.options.hide;t.options.hide?t.queueRemove():t.cancelRemove();n(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){n(this).children().removeClass(t.styles.pin_up+" "+t.styles.pin_down).addClass(t.options.hide?t.styles.pin_up:t.styles.pin_down)}).append(n("<span />",{"class":t.styles.pin_up,title:i.labels.stick})).prependTo(t.container);(!i.sticker||t.options.nonblock&&t.options.nonblock.nonblock)&&this.sticker.css("display","none");this.closer=n("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:i.closer_hover?"hidden":"visible"},click:function(){t.remove(!1);r.sticker.css("visibility","hidden");r.closer.css("visibility","hidden")}}).append(n("<span />",{"class":t.styles.closer,title:i.labels.close})).prependTo(t.container);(!i.closer||t.options.nonblock&&t.options.nonblock.nonblock)&&this.closer.css("display","none")},update:function(n,t){this.myOptions=t;!t.closer||n.options.nonblock&&n.options.nonblock.nonblock?this.closer.css("display","none"):t.closer&&this.closer.css("display","block");!t.sticker||n.options.nonblock&&n.options.nonblock.nonblock?this.sticker.css("display","none"):t.sticker&&this.sticker.css("display","block");this.sticker.trigger("pnotify_icon");t.sticker_hover?this.sticker.css("visibility","hidden"):n.options.nonblock&&n.options.nonblock.nonblock||this.sticker.css("visibility","visible");t.closer_hover?this.closer.css("visibility","hidden"):n.options.nonblock&&n.options.nonblock.nonblock||this.closer.css("visibility","visible")}};n.extend(t.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"});n.extend(t.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"});n.extend(t.styling.bootstrap3,{closer:"",pin_up:"",pin_down:""});n.extend(t.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"})}),function(n){"function"==typeof define&&define.amd?define("pnotify.callbacks",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){var i=t.prototype.init,r=t.prototype.open,u=t.prototype.remove;t.prototype.init=function(){this.options.before_init&&this.options.before_init(this.options);i.apply(this,arguments);this.options.after_init&&this.options.after_init(this)};t.prototype.open=function(){var n;this.options.before_open&&(n=this.options.before_open(this));!1!==n&&(r.apply(this,arguments),this.options.after_open&&this.options.after_open(this))};t.prototype.remove=function(n){var t;this.options.before_close&&(t=this.options.before_close(this,n));!1!==t&&(u.apply(this,arguments),this.options.after_close&&this.options.after_close(this,n))}}),function(n){"function"==typeof define&&define.amd?define("pnotify.confirm",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){t.prototype.options.confirm={confirm:!1,prompt:!1,prompt_class:"",prompt_default:"",prompt_multi_line:!1,align:"right",buttons:[{text:"Ok",addClass:"",promptTrigger:!0,click:function(n,t){n.remove();n.get().trigger("pnotify.confirm",[n,t])}},{text:"Cancel",addClass:"",click:function(n){n.remove();n.get().trigger("pnotify.cancel",n)}}]};t.prototype.modules.confirm={container:null,prompt:null,init:function(t,i){this.container=n('<div style="margin-top:5px;clear:both;" />').css("text-align",i.align).appendTo(t.container);i.confirm||i.prompt?this.makeDialog(t,i):this.container.hide()},update:function(n,t){t.confirm?(this.makeDialog(n,t),this.container.show()):this.container.hide().empty()},afterOpen:function(n,t){t.prompt&&this.prompt.focus()},makeDialog:function(t,i){var f=!1,o=this,u,r,e;this.container.empty();i.prompt&&(this.prompt=n("<"+(i.prompt_multi_line?'textarea rows="5"':'input type="text"')+' style="margin-bottom:5px;clear:both;" />').addClass(t.styles.input+" "+i.prompt_class).val(i.prompt_default).appendTo(this.container));for(e in i.buttons){if(u=i.buttons[e],f?this.container.append(" "):f=!0,r=n('<button type="button" />').addClass(t.styles.btn+" "+u.addClass).text(u.text).appendTo(this.container).on("click",function(n){return function(){"function"==typeof n.click&&n.click(t,i.prompt?o.prompt.val():null)}}(u)),i.prompt&&!i.prompt_multi_line&&u.promptTrigger&&this.prompt.keypress(function(n){return function(t){13==t.keyCode&&n.click()}}(r)),t.styles.text&&r.wrapInner('<span class="'+t.styles.text+'"><\/span>'),t.styles.btnhover&&r.hover(function(n){return function(){n.addClass(t.styles.btnhover)}}(r),function(n){return function(){n.removeClass(t.styles.btnhover)}}(r)),t.styles.btnactive)r.on("mousedown",function(n){return function(){n.addClass(t.styles.btnactive)}}(r)).on("mouseup",function(n){return function(){n.removeClass(t.styles.btnactive)}}(r));if(t.styles.btnfocus)r.on("focus",function(n){return function(){n.addClass(t.styles.btnfocus)}}(r)).on("blur",function(n){return function(){n.removeClass(t.styles.btnfocus)}}(r))}}};n.extend(t.styling.jqueryui,{btn:"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",btnhover:"ui-state-hover",btnactive:"ui-state-active",btnfocus:"ui-state-focus",input:"",text:"ui-button-text"});n.extend(t.styling.bootstrap2,{btn:"btn",input:""});n.extend(t.styling.bootstrap3,{btn:"btn btn-default",input:"form-control"});n.extend(t.styling.fontawesome,{btn:"btn btn-default",input:"form-control"})}),function(n){"function"==typeof define&&define.amd?define("pnotify.desktop",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){var i,r=function(n,t){return r="Notification"in window?function(n,t){return new Notification(n,t)}:"mozNotification"in navigator?function(n,t){return navigator.mozNotification.createNotification(n,t.body,t.icon).show()}:"webkitNotifications"in window?function(n,t){return window.webkitNotifications.createNotification(t.icon,n,t.body)}:function(){return null},r(n,t)};t.prototype.options.desktop={desktop:!1,icon:null,tag:null};t.prototype.modules.desktop={tag:null,icon:null,genNotice:function(n,t){this.icon=null===t.icon?"http://sciactive.com/pnotify/includes/desktop/"+n.options.type+".png":!1===t.icon?null:t.icon;(null===this.tag||null!==t.tag)&&(this.tag=null===t.tag?"PNotify-"+Math.round(1e6*Math.random()):t.tag);n.desktop=r(n.options.title,{icon:this.icon,body:n.options.text,tag:this.tag});"close"in n.desktop||(n.desktop.close=function(){n.desktop.cancel()});n.desktop.onclick=function(){n.elem.trigger("click")};n.desktop.onclose=function(){"closing"!==n.state&&"closed"!==n.state&&n.remove()}},init:function(n,r){r.desktop&&(i=t.desktop.checkPermission(),0==i&&this.genNotice(n,r))},update:function(n,t){0==i&&t.desktop&&this.genNotice(n,t)},beforeOpen:function(n,t){0==i&&t.desktop&&n.elem.css({left:"-10000px",display:"none"})},afterOpen:function(n,t){0==i&&t.desktop&&(n.elem.css({left:"-10000px",display:"none"}),"show"in n.desktop&&n.desktop.show())},beforeClose:function(n,t){0==i&&t.desktop&&n.elem.css({left:"-10000px",display:"none"})},afterClose:function(n,t){0==i&&t.desktop&&(n.elem.css({left:"-10000px",display:"none"}),n.desktop.close())}};t.desktop={permission:function(){"undefined"!=typeof Notification&&"requestPermission"in Notification?Notification.requestPermission():"webkitNotifications"in window&&window.webkitNotifications.requestPermission()},checkPermission:function(){return"undefined"!=typeof Notification&&"permission"in Notification?"granted"==Notification.permission?0:1:"webkitNotifications"in window?window.webkitNotifications.checkPermission():1}};i=t.desktop.checkPermission()}),function(n){"function"==typeof define&&define.amd?define("pnotify.history",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){var i,r;n(function(){n("body").on("pnotify.history-all",function(){n.each(t.notices,function(){this.modules.history.inHistory&&(this.elem.is(":visible")?this.options.hide&&this.queueRemove():this.open&&this.open())})}).on("pnotify.history-last",function(){var r="top"===t.prototype.options.stack.push,n=r?0:-1,i;do{if(i=-1===n?t.notices.slice(n):t.notices.slice(n,n+1),!i[0])return!1;n=r?n+1:n-1}while(!i[0].modules.history.inHistory||i[0].elem.is(":visible"));i[0].open&&i[0].open()})});t.prototype.options.history={history:!0,menu:!1,fixed:!0,maxonscreen:Infinity,labels:{redisplay:"Redisplay",all:"All",last:"Last"}};t.prototype.modules.history={inHistory:!1,init:function(t,u){if(t.options.destroy=!1,this.inHistory=u.history,u.menu&&"undefined"==typeof i){i=n("<div />",{"class":"ui-pnotify-history-container "+t.styles.hi_menu,mouseleave:function(){i.animate({top:"-"+r+"px"},{duration:100,queue:!1})}}).append(n("<div />",{"class":"ui-pnotify-history-header",text:u.labels.redisplay})).append(n("<button />",{"class":"ui-pnotify-history-all "+t.styles.hi_btn,text:u.labels.all,mouseenter:function(){n(this).addClass(t.styles.hi_btnhov)},mouseleave:function(){n(this).removeClass(t.styles.hi_btnhov)},click:function(){return n(this).trigger("pnotify.history-all"),!1}})).append(n("<button />",{"class":"ui-pnotify-history-last "+t.styles.hi_btn,text:u.labels.last,mouseenter:function(){n(this).addClass(t.styles.hi_btnhov)},mouseleave:function(){n(this).removeClass(t.styles.hi_btnhov)},click:function(){return n(this).trigger("pnotify.history-last"),!1}})).appendTo("body");var f=n("<span />",{"class":"ui-pnotify-history-pulldown "+t.styles.hi_hnd,mouseenter:function(){i.animate({top:"0"},{duration:100,queue:!1})}}).appendTo(i);console.log(f.offset());r=f.offset().top+2;i.css({top:"-"+r+"px"});u.fixed&&i.addClass("ui-pnotify-history-fixed")}},update:function(n,t){this.inHistory=t.history;t.fixed&&i?i.addClass("ui-pnotify-history-fixed"):i&&i.removeClass("ui-pnotify-history-fixed")},beforeOpen:function(i,r){if(t.notices&&t.notices.length>r.maxonscreen){var u;u="top"!==i.options.stack.push?t.notices.slice(0,t.notices.length-r.maxonscreen):t.notices.slice(r.maxonscreen,t.notices.length);n.each(u,function(){this.remove&&this.remove()})}}};n.extend(t.styling.jqueryui,{hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"});n.extend(t.styling.bootstrap2,{hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"});n.extend(t.styling.bootstrap3,{hi_menu:"well",hi_btn:"btn btn-default",hi_btnhov:"",hi_hnd:"glyphicon glyphicon-chevron-down"});n.extend(t.styling.fontawesome,{hi_menu:"well",hi_btn:"btn btn-default",hi_btnhov:"",hi_hnd:"fa fa-chevron-down"})}),function(n){"function"==typeof define&&define.amd?define("pnotify.nonblock",["jquery","pnotify"],n):n(jQuery,PNotify)}(function(n,t){var f=/^on/,e=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,o=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,s=/^(scroll|resize|(un)?load|abort|error)$/,r=function(t,i){var r;t=t.toLowerCase();document.createEvent&&this.dispatchEvent?(t=t.replace(f,""),t.match(e)?(n(this).offset(),r=document.createEvent("MouseEvents"),r.initMouseEvent(t,i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)):t.match(o)?(r=document.createEvent("UIEvents"),r.initUIEvent(t,i.bubbles,i.cancelable,i.view,i.detail)):t.match(s)&&(r=document.createEvent("HTMLEvents"),r.initEvent(t,i.bubbles,i.cancelable)),r&&this.dispatchEvent(r)):(t.match(f)||(t="on"+t),r=document.createEventObject(i),this.fireEvent(t,r))},i,u=function(t,u,f){var e,o,s;t.elem.css("display","none");e=document.elementFromPoint(u.clientX,u.clientY);t.elem.css("display","block");o=n(e);s=o.css("cursor");t.elem.css("cursor","auto"!==s?s:"default");i&&i.get(0)==e||(i&&(r.call(i.get(0),"mouseleave",u.originalEvent),r.call(i.get(0),"mouseout",u.originalEvent)),r.call(e,"mouseenter",u.originalEvent),r.call(e,"mouseover",u.originalEvent));r.call(e,f,u.originalEvent);i=o};t.prototype.options.nonblock={nonblock:!1,nonblock_opacity:.2};t.prototype.modules.nonblock={myOptions:null,init:function(n,t){var r=this;this.myOptions=t;n.elem.on({mouseenter:function(t){r.myOptions.nonblock&&t.stopPropagation();r.myOptions.nonblock&&n.elem.stop().animate({opacity:r.myOptions.nonblock_opacity},"fast")},mouseleave:function(t){r.myOptions.nonblock&&t.stopPropagation();i=null;n.elem.css("cursor","auto");r.myOptions.nonblock&&"out"!==n.animating&&n.elem.stop().animate({opacity:n.options.opacity},"fast")},mouseover:function(n){r.myOptions.nonblock&&n.stopPropagation()},mouseout:function(n){r.myOptions.nonblock&&n.stopPropagation()},mousemove:function(t){r.myOptions.nonblock&&(t.stopPropagation(),u(n,t,"onmousemove"))},mousedown:function(t){r.myOptions.nonblock&&(t.stopPropagation(),t.preventDefault(),u(n,t,"onmousedown"))},mouseup:function(t){r.myOptions.nonblock&&(t.stopPropagation(),t.preventDefault(),u(n,t,"onmouseup"))},click:function(t){r.myOptions.nonblock&&(t.stopPropagation(),u(n,t,"onclick"))},dblclick:function(t){r.myOptions.nonblock&&(t.stopPropagation(),u(n,t,"ondblclick"))}})},update:function(n,t){this.myOptions=t}}}),typeof jQuery=="undefined")throw new Error("popup-manager's JavaScript requires jQuery");if(function(n){var t={},r='<div class="modal-header"><h4 class="modal-title"><\/h4><\/div>';r+='<div class="modal-body"><p>There was an error while loading this popup.<\/p><\/div>';r+='<div class="modal-footer"><button type="button" class="btn-cancel btn btn-default" data-dismiss="modal">Cancel<\/button><\/div>';var o={large:"modal-lg",medium:"modal-md",small:"modal-sm"},u=function(){var n=0;return function(){return"popup-"+n++}}(),f=function(n,t,i){var f="",r,e;return t==!0&&(f=" fade"),r=" "+o[i],r||(r=""),n=n||u(),e='<div class="modal'+f+'" id="'+n+'" role="dialog" data-keyboard="false" data-backdrop="static" style="display: none;">',e+'<div class="modal-dialog'+r+'"><div class="modal-content"><\/div><\/div><\/div>'},s=function(n,t){if(t!==null&&t!==undefined&&n)for(var i in n)n.hasOwnProperty(i)&&typeof n[i]=="function"&&(n[i]=n[i].bind(t))},e=function(n){return n.view.find(":button")},h=function(t){t.view.find(":input").each(function(){var r=n(this),f=r.prop("tagName"),i=r.attr("name"),u;f==="SELECT"?(t.data[i]=[],r.find("option:selected").each(function(){t.data[i].push(n(this).val())})):f==="TEXTAREA"?t.data[i]=r.val():f==="INPUT"&&(u=r.attr("type"),u==="text"?t.data[i]=r.val():u==="checkbox"?(t.data[i]=[],t.view.find("input:checkbox[name='"+i+"']:checked").each(function(){t.data[i].push(n(this).val())})):u==="radio"&&(t.data[i]=t.view.find("input:radio[name='"+i+"']:checked").val()))})},c=function(t){var i,r,u,f;for(i in t.data)t.data.hasOwnProperty(i)&&(r=t.view.find("[name='"+i+"']"),u=r.prop("tagName"),u==="SELECT"?(t.data[i].constructor!==Array&&(t.data[i]=[]),r.find("option").each(function(){var r=n(this);r.prop("selected",n.inArray(r.val(),t.data[i])!==-1)})):u==="TEXTAREA"?r.val(t.data[i]):u==="INPUT"&&(f=r.attr("type"),f==="text"?r.val(t.data[i]):f==="checkbox"?(t.data[i].constructor!==Array&&(t.data[i]=[]),r.each(function(){var r=n(this);r.prop("checked",n.inArray(r.val(),t.data[i])!==-1)})):f==="radio"&&t.view.find("input[type='radio'][name='"+i+"'][value='"+t.data[i]+"']").prop("checked",!0)))},l=function(i,r){if(i){n.isPlainObject(r)||(r={});i.view.on("show.bs.modal",typeof r.onShow=="function"?r.onShow:null).on("shown.bs.modal",typeof r.onShown=="function"?r.onShown:null).on("hide.bs.modal",function(){typeof r.onHide=="function"&&r.onHide()}).on("hidden.bs.modal",function(){typeof r.onHidden=="function"&&r.onHidden();i.reset();i._off();delete t[i.id]})}},a=function(t,i){t&&(n.isPlainObject(i)||(i={}),e(t).each(function(r,u){u=n(u);var f=u.attr("data-callback"),o=u.attr("data-dismiss")==="modal",e=u.is("[data-validate]");u.on("click",function(){e?(t.status="ok",n.extend(t.data,t.childData),t._parent&&n.extend(t._parent.childData,t.data),h(t)):t.status="cancel";f&&typeof i[f]=="function"&&i[f]()})}))},v=function(t,i,r,u){if(!t)throw new Error("Undefined URL");typeof r!="function"&&(r=null);typeof u!="function"&&(u=function(n,i,r){console.error("GET",t,"FAILED",n.status,r)});n.get(t,i).done(r).fail(u)},i=function(i){n.isPlainObject(i)||(i={});this.id=i.id;this.parentId=i.parentId;this._parent=t[this.parentId];this.status="open";this.data=i.data==="parent"?this._parent?this._parent.data:{}:i.data||{};this.childData={};this.view=n("#"+this.id);this._initBody=this.view.find(".modal-body").html();this.emptyAfterUse=!!i.emptyAfterUse;this.draggable=i.draggable;this.setEventHandlers(i.callbacks);c(this);i.draggable==!0&&this.view.draggable({handle:".modal-header"});t[i.id]=this};i.prototype.setEventHandlers=function(t){n.isPlainObject(t)||(t={});s(t,this);l(this,t);a(this,t)};i.prototype.reset=function(){this.draggable&&this.view.draggable("destroy");this.emptyAfterUse?this.view.remove():this.view.find(".modal-body").html(this._initBody)};i.prototype._off=function(){this.view.off();e(this).each(function(t,i){n(i).off()})};n.fn.createPopupFromUrl=function(e){var o,s;return(!n.isPlainObject(e)||n.isEmptyObject(e))&&(e={}),e.emptyAfterUse=!0,o=n(this),e.id==null&&(e.id=u()),s=n("body"),this.each(function(){o.on("click",function(){var u=t[e.id],h,c;if(u!=null){u.view.modal();return}h=n(f(e.id,e.fading,o.data("popup-size")));c=n(h.find(".modal-content").get(0));e.RefreshData!=null&&e.RefreshData(e.data);c.load(o.data("popup-url"),function(n,f,o){if(f==="error"&&c.html(r).find(".modal-title").html(o.status+" : "+o.statusText),u=t[e.id],u!=null){u.view.modal();return}s.append(h);new i(e);h.modal()})})})};n.createPopup=function(e){var c,o,s,h;if((!n.isPlainObject(e)||n.isEmptyObject(e))&&(e={}),e.emptyAfterUse=!0,e.id==null&&(e.id=u()),c=n("body"),o=t[e.id],o!=null){o.view.modal();return}s=n(f(e.id,e.fading,e.popupSize));h=n(s.find(".modal-content").get(0));h.load(e.popupUrl,function(n,u,f){if(u==="error"&&h.html(r).find(".modal-title").html(f.status+" : "+f.statusText),o=t[e.id],o!=null){o.view.modal();return}c.append(s);new i(e);s.modal()})}}(jQuery),typeof jQuery=="undefined")throw new Error("popup-manager's JavaScript requires jQuery");(function(n){var t={decimal:"",emptyTable:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª",infoPostFix:"",thousands:",",zeroRecords:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª",info:"( Ù…Ù† _START_ Ø¥Ù„Ù‰  _END_     ) / _TOTAL_ ",infoEmpty:"",paginate:{first:"Ø§Ù„Ø£ÙˆÙ„Ù‰",last:"Ø§Ù„Ø§Ø®ÙŠØ±Ø©",next:">",previous:"<"},aria:{sortAscending:": ØªØµØ§Ø¹Ø¯ÙŠ",sortDescending:": ØªÙ†Ø§Ø²Ù„ÙŠ"}},i={decimal:"",emptyTable:"Aucune donnÃ©e disponible",infoPostFix:"",thousands:",",zeroRecords:"Aucune donnÃ©e disponible",info:"de  _START_ Ã   _END_ / _TOTAL_ elements",infoEmpty:"",paginate:{first:"premiÃ¨re",last:"derniÃ¨re",next:">",previous:"<"},aria:{sortAscending:": activer pour trier la colonne ascendante",sortDescending:": activer pour trier la colonne descendante"}};n.fn.SGSDataTable=function(r){var u,f,e;return console.log("dt"),(!n.isPlainObject(r)||n.isEmptyObject(r))&&(r={}),u={paging:!0,bInfo:!1,iDisplayLength:30,lengthChange:!1,searching:!0,ordering:!0,order:[],responsive:!0,autoWidth:!1,language:t},culture=="fr-FR"&&(u.language=i),f=n.extend({},u,r),e=n(this).DataTable(f),n(".dataTables_wrapper").find(".row:nth(0)").hide(),e};n.fn.eachSelectedId=function(t){var i=[];return n(this).each(function(r,u){i[r]=parseInt(n(u).attr(t))}),i};n.fn.deserializeObject=function(){var t={},i=this.serializeArray();return n.each(i,function(){t[this.name]!==undefined?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}})(jQuery);var randomColorFactor=function(){return Math.round(Math.random()*255)},randomColor=function(n){return"rgba("+randomColorFactor()+","+randomColorFactor()+","+randomColorFactor()+","+(n||".3")+")"},initializeChart=function(n,t,i,r,u){var f,e,o,s;if(i!=null&&i.length>0&&r!=null&&r.length>0){if(f=[],u==null||u.length==0)for(e=0;e<i.length;e++)f.push(randomColor(.7));else f=u;o={type:n,data:{datasets:[{data:i,backgroundColor:f}],labels:r},options:{segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0,legend:{display:!1}}};s=$("#"+t).get(0).getContext("2d");window.myPie=new Chart(s,o)}};Array.prototype.contains=function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return!0;return!1};Array.prototype.unique=function(){for(var t=[],n=0;n<this.length;n++)t.contains(this[n])||t.push(this[n]);return t},function(n){n.fn.limitkeypress=function(t,i,r){var u={rexp:/^\d{0,2}([\.,]\d{0,2})?$/},f,t;return r!=null&&r==!0&&(u={rexp:/^\d{0,3}([\.,]\d{0,2})?$/}),f=parseInt(t),t=n.extend(u,t),this.each(function(){function u(n){if(n.createTextRange&&document.selection!=null){var t=document.selection.createRange().duplicate();return(t.moveEnd("character",n.value.length),t.text=="")?n.value.length:n.value.lastIndexOf(t.text)}return n.selectionStart}function e(n){if(n.createTextRange&&document.selection!=null){var t=document.selection.createRange().duplicate();return t.moveStart("character",-n.value.length),t.text.length}return n.selectionEnd}var r=t.rexp;n(this).keypress(function(n){var o,t;if(n.which!="0"&&n.which!="8"&&n.which!="13"&&!n.ctrlKey&&!n.altKey){if(o=String.fromCharCode(n.which),updatedInput=this.value.substring(0,u(this))+o+this.value.substring(e(this),this.value.length),!r.test(updatedInput)){n.preventDefault();return}if(updatedInput=updatedInput.replace(",","."),t=parseFloat(updatedInput),t>f){n.preventDefault();return}if(i!=null&&t<i){n.preventDefault();return}return}})})}}(jQuery),function(n){n.fn.limitIntegerkeypress=function(t){var t=n.extend({rexp:/^\d+$/},t);return this.each(function(){function r(n){if(n.createTextRange&&document.selection!=null){var t=document.selection.createRange().duplicate();return(t.moveEnd("character",n.value.length),t.text=="")?n.value.length:n.value.lastIndexOf(t.text)}return n.selectionStart}function u(n){if(n.createTextRange&&document.selection!=null){var t=document.selection.createRange().duplicate();return t.moveStart("character",-n.value.length),t.text.length}return n.selectionEnd}var i=t.rexp;n(this).keypress(function(n){if(n.which!="0"&&n.which!="8"&&n.which!="13"&&!n.ctrlKey&&!n.altKey){var t=String.fromCharCode(n.which);if(updatedInput=this.value.substring(0,r(this))+t+this.value.substring(u(this),this.value.length),!i.test(updatedInput)){n.preventDefault();return}return}})})}}(jQuery),function(n){function t(n){return"."+n.className.replace(/ /g,".")}n.fn.gridNavigation=function(i){return i=n.extend({upCodes:[38],downCodes:[13,40],nextCodes:[]},i),this.each(function(){n(this).on("keydown",function(r){var o=r.which,f,s,u,e,h;r.which==13&&r.preventDefault();jQuery.inArray(o,i.upCodes)!==-1?(u=t(this),f=n(this).closest("tr").prev(),f.length||(f=n(this).closest("table").find("tr:last")),s=f.find(u),s.focus()):jQuery.inArray(o,i.downCodes)!==-1&&(u=t(this),e=n(this).closest("tr").next(),e.length||(e=n(this).closest("table").find("tr:first")),h=e.find(u),h.focus())});n(this).on("keyup",function(n){var t=n.which;(jQuery.inArray(t,i.downCodes)!==-1||jQuery.inArray(t,i.upCodes)!==-1)&&this.select()})})}}(jQuery);!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n){var t=function(){var t;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),function(){if(!t||!t.requirejs){t?i=t:t={};var n,i,r;!function(t){function e(n,t){return nt.call(n,t)}function c(n,t){var e,s,o,u,h,y,c,w,i,l,p,r=t&&t.split("/"),a=f.map,v=a&&a["*"]||{};if(n&&"."===n.charAt(0))if(t){for(r=r.slice(0,r.length-1),n=n.split("/"),h=n.length-1,f.nodeIdCompat&&b.test(n[h])&&(n[h]=n[h].replace(b,"")),n=r.concat(n),i=0;i<n.length;i+=1)if(p=n[i],"."===p)n.splice(i,1),i-=1;else if(".."===p){if(1===i&&(".."===n[2]||".."===n[0]))break;i>0&&(n.splice(i-1,2),i-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((r||v)&&a){for(e=n.split("/"),i=e.length;i>0;i-=1){if(s=e.slice(0,i).join("/"),r)for(l=r.length;l>0;l-=1)if(o=a[r.slice(0,l).join("/")],o&&(o=o[s])){u=o;y=i;break}if(u)break;!c&&v&&v[s]&&(c=v[s],w=i)}!u&&c&&(u=c,y=w);u&&(e.splice(0,y,u),n=e.join("/"))}return n}function p(n,i){return function(){return o.apply(t,tt.call(arguments,0).concat([n,i]))}}function k(n){return function(t){return c(t,n)}}function d(n){return function(t){u[n]=t}}function l(n){if(e(h,n)){var i=h[n];delete h[n];y[n]=!0;a.apply(t,i)}if(!e(u,n)&&!e(y,n))throw new Error("No "+n);return u[n]}function w(n){var i,t=n?n.indexOf("!"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function g(n){return function(){return f&&f.config&&f.config[n]||{}}}var a,o,v,s,u={},h={},f={},y={},nt=Object.prototype.hasOwnProperty,tt=[].slice,b=/\.js$/;v=function(n,t){var r,u=w(n),i=u[0];return n=u[1],i&&(i=c(i,t),r=l(i)),i?n=r&&r.normalize?r.normalize(n,k(t)):c(n,t):(n=c(n,t),u=w(n),i=u[0],n=u[1],i&&(r=l(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}};s={require:function(n){return p(n)},exports:function(n){var t=u[n];return"undefined"!=typeof t?t:u[n]={}},module:function(n){return{id:n,uri:"",exports:u[n],config:g(n)}}};a=function(n,i,r,f){var w,o,k,b,c,g,a=[],nt=typeof r;if(f=f||n,"undefined"===nt||"function"===nt){for(i=!i.length&&r.length?["require","exports","module"]:i,c=0;c<i.length;c+=1)if(b=v(i[c],f),o=b.f,"require"===o)a[c]=s.require(n);else if("exports"===o)a[c]=s.exports(n),g=!0;else if("module"===o)w=a[c]=s.module(n);else if(e(u,o)||e(h,o)||e(y,o))a[c]=l(o);else{if(!b.p)throw new Error(n+" missing "+o);b.p.load(b.n,p(f,!0),d(o),{});a[c]=u[o]}k=r?r.apply(u[n],a):void 0;n&&(w&&w.exports!==t&&w.exports!==u[n]?u[n]=w.exports:k===t&&g||(u[n]=k))}else n&&(u[n]=r)};n=i=o=function(n,i,r,u,e){if("string"==typeof n)return s[n]?s[n](i):l(v(n,i).f);if(!n.splice){if(f=n,f.deps&&o(f.deps,f.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},"function"==typeof r&&(r=u,u=e),u?a(t,n,i,r):setTimeout(function(){a(t,n,i,r)},4),o};o.config=function(n){return o(n)};n._defined=u;r=function(n,t,i){t.splice||(i=t,t=[]);e(u,n)||e(h,n)||(h[n]=[n,t,i])};r.amd={jQuery:!0}}();t.requirejs=n;t.require=i;t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[],t,u;for(t in i)u=i[t],"function"==typeof u&&"constructor"!==t&&r.push(t);return r}var t={},i;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;u>0&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function l(){this.constructor=i}var s=r(t),h=r(n),u,e,c,f,o;for(t.displayName=n.displayName,i.prototype=new l,u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(c=function(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){var n=Array.prototype.unshift;return n.call(arguments,r),u.apply(this,arguments)}},f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i=function(){this.listeners={}},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var t=Array.prototype.slice;this.listeners=this.listeners||{};n in this.listeners&&this.invoke(this.listeners[n],t.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;r>i;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var r,t="",i=0;n>i;i++)r=Math.floor(36*Math.random()),t+=r.toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,1!==r.length){for(u=0;u<r.length;u++)t=r[u],t=t.substring(0,1).toLowerCase()+t.substring(1),t in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return f!==r||"hidden"!==r&&"visible"!==r?"scroll"===f||"scroll"===r?!0:u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth:!1},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof n?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.appendMany=function(t,i){if("1.7"===n.fn.jquery.substr(0,3)){var r=n();n.map(i,function(n){r=r.add(n)});i=r}t.append(i)},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="tree"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="treeitem" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));this.$results.append(i)},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],null==n.results||0===n.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)},i.prototype.position=function(n,t){var i=t.find(".select2-results");i.append(n)},i.prototype.sort=function(n){var t=this.options.get("sorter");return t(n)},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var f=n.map(i,function(n){return n.id.toString()}),r=t.$results.find(".select2-results__option[aria-selected]"),u;r.each(function(){var i=n(this),t=n.data(this,"data"),r=""+t.id;null!=t.element&&t.element.selected||null==t.element&&n.inArray(r,f)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")});u=r.filter("[aria-selected=true]");u.length>0?u.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},i.prototype.showLoading=function(n){this.hideLoading();var i=this.options.get("translations").get("searching"),r={disabled:!0,loading:!0,text:i(n)},t=this.option(r);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var r=document.createElement("li"),i,e,c,o,u,s,f,l,a,h;r.className="select2-results__option";i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true");null==t.id&&delete i["aria-selected"];null!=t._resultId&&(r.id=t._resultId);t.title&&(r.title=t.title);t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(e in i)c=i[e],r.setAttribute(e,c);if(t.children){for(o=n(r),u=document.createElement("strong"),u.className="select2-results__group",n(u),this.template(t,u),s=[],f=0;f<t.children.length;f++)l=t.children[f],a=this.option(l),s.push(a);h=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(s);o.append(u);o.append(h)}else this.template(t,r);return n.data(r,"data",t),r},i.prototype.bind=function(t){var i=this,r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(n){i.clear();i.append(n.data);t.isOpen()&&i.setClasses()});t.on("results:append",function(n){i.append(n.data);t.isOpen()&&i.setClasses()});t.on("query",function(n){i.showLoading(n)});t.on("select",function(){t.isOpen()&&i.setClasses()});t.on("unselect",function(){t.isOpen()&&i.setClasses()});t.on("open",function(){i.$results.attr("aria-expanded","true");i.$results.attr("aria-hidden","false");i.setClasses();i.ensureHighlightVisible()});t.on("close",function(){i.$results.attr("aria-expanded","false");i.$results.attr("aria-hidden","true");i.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var n=i.getHighlightedResults();0!==n.length&&n.trigger("mouseup")});t.on("results:select",function(){var n=i.getHighlightedResults(),t;0!==n.length&&(t=n.data("data"),"true"==n.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:t}))});t.on("results:previous",function(){var r=i.getHighlightedResults(),u=i.$results.find("[aria-selected]"),f=u.index(r),n,t;if(0!==f){n=f-1;0===r.length&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=i.$results.offset().top,o=t.offset().top,s=i.$results.scrollTop()+(o-e);0===n?i.$results.scrollTop(0):0>o-e&&i.$results.scrollTop(s)}});t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),o=t.index(e),r=o+1,n;if(!(r>=t.length)){n=t.eq(r);n.trigger("mouseenter");var u=i.$results.offset().top+i.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),s=i.$results.scrollTop()+f-u;0===r?i.$results.scrollTop(0):f>u&&i.$results.scrollTop(s)}});t.on("results:focus",function(n){n.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(n){i.displayMessage(n)});n.fn.mousewheel&&this.$results.on("mousewheel",function(n){var t=i.$results.scrollTop(),r=i.$results.get(0).scrollHeight-i.$results.scrollTop()+n.deltaY,u=n.deltaY>0&&t-n.deltaY<=0,f=n.deltaY<0&&r<=i.$results.height();u?(i.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var r=n(this),u=r.data("data");return"true"===r.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:u}):i.trigger("close")):void i.trigger("select",{originalEvent:t,data:u})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=n(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted");i.trigger("results:focus",{data:t,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(0!==n.length){var f=this.$results.find("[aria-selected]"),e=f.index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=2*n.outerHeight(!1);2>=e?this.$results.scrollTop(0):(u>this.$results.outerHeight()||0>u)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=n('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(n){var t=this,r=(n.id+"-container",n.id+"-results");this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t.trigger("blur",n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.focus();t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)});n.on("disable",function(){t.$selection.attr("tabindex","-1")})},r.prototype._attachCloseHandler=function(t){n(document.body).on("mousedown.select2."+t.id,function(t){var i=n(t.target),r=i.closest(".select2"),u=n(".select2.select2-container--open");u.each(function(){var i=n(this),t;this!=r[0]&&(t=i.data("element"),t.select2("close"))})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){var i=t.find(".selection");i.append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t);this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){1===n.which&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("selection:update",function(n){i.update(n.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){if(0===n.length)return void this.clear();var t=n[0],r=this.display(t),i=this.$selection.find(".select2-selection__rendered");i.empty().append(r);i.prop("title",t.title||t.text)},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(){var t=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(n){t.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(i){var r=n(this),u=r.parent(),f=u.data("data");t.trigger("unselect",{originalEvent:i,data:f})})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},r.prototype.update=function(n){var f,t,e;if(this.clear(),0!==n.length){for(f=[],t=0;t<n.length;t++){var r=n[t],o=this.display(r),u=this.selectionContainer();u.append(o);u.prop("title",r.title||r.text);u.data("data",r);f.push(u)}e=this.$selection.find(".select2-selection__rendered");i.appendMany(e,f)}},r}),t.define("select2/selection/placeholder",["../utils"],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=1==t.length&&t[0].id!=this.placeholder.id,u=t.length>1,i;if(u||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys"],function(n,t){function i(){}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},i.prototype._handleClear=function(n,t){var r,u,i,f;if(!this.options.get("disabled")&&(r=this.$selection.find(".select2-selection__clear"),0!==r.length)){for(t.stopPropagation(),u=r.data("data"),i=0;i<u.length;i++)if(f={data:u[i]},this.trigger("unselect",f),f.prevented)return;this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle")}},i.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var r=n('<span class="select2-selection__clear">&times;<\/span>');r.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(r)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var i=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/li>');return this.$searchContainer=i,this.$search=i.find("input"),t.call(this)},r.prototype.bind=function(n,t,r){var u=this;n.call(this,t,r);t.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus()});t.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("");u.$search.focus()});t.on("enable",function(){u.$search.prop("disabled",!1)});t.on("disable",function(){u.$search.prop("disabled",!0)});this.$selection.on("focusin",".select2-search--inline",function(n){u.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){u.trigger("blur",n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,t,f;n.stopPropagation();u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented();r=n.which;r===i.BACKSPACE&&""===u.$search.val()&&(t=u.$searchContainer.prev(".select2-selection__choice"),t.length>0&&(f=t.data("data"),u.searchRemoveChoice(f),n.preventDefault()))});this.$selection.on("input",".select2-search--inline",function(){u.$selection.off("keyup.search")});this.$selection.on("keyup.search input",".select2-search--inline",function(n){u.handleSearch(n)})},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){this.$search.attr("placeholder","");n.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.trigger("open");this.$search.val(t.text+" ")},r.prototype.resizeSearch=function(){var n,t;this.$search.css("width","25px");n="";""!==this.$search.attr("placeholder")?n=this.$selection.find(".select2-selection__rendered").innerWidth():(t=this.$search.val().length+1,n=.75*t+"em");this.$search.css("width",n)},r}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],e=["opening","closing","selecting","unselecting"];t.call(this,i,r);i.on("*",function(t,i){if(-1!==n.inArray(t,f)){i=i||{};var r=n.Event("select2:"+t,{params:i});u.$element.trigger(r);-1!==n.inArray(t,e)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"â’¶":"A","ï¼¡":"A","Ã€":"A","Ã":"A","Ã‚":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ãƒ":"A","Ä€":"A","Ä‚":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã„":"A","Çž":"A","áº¢":"A","Ã…":"A","Çº":"A","Ç":"A","È€":"A","È‚":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸€":"A","Ä„":"A","Èº":"A","â±¯":"A","êœ²":"AA","Ã†":"AE","Ç¼":"AE","Ç¢":"AE","êœ´":"AO","êœ¶":"AU","êœ¸":"AV","êœº":"AV","êœ¼":"AY","â’·":"B","ï¼¢":"B","á¸‚":"B","á¸„":"B","á¸†":"B","Éƒ":"B","Æ‚":"B","Æ":"B","â’¸":"C","ï¼£":"C","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ã‡":"C","á¸ˆ":"C","Æ‡":"C","È»":"C","êœ¾":"C","â’¹":"D","ï¼¤":"D","á¸Š":"D","ÄŽ":"D","á¸Œ":"D","á¸":"D","á¸’":"D","á¸Ž":"D","Ä":"D","Æ‹":"D","ÆŠ":"D","Æ‰":"D","ê¹":"D","Ç±":"DZ","Ç„":"DZ","Ç²":"Dz","Ç…":"Dz","â’º":"E","ï¼¥":"E","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","á»€":"E","áº¾":"E","á»„":"E","á»‚":"E","áº¼":"E","Ä’":"E","á¸”":"E","á¸–":"E","Ä”":"E","Ä–":"E","Ã‹":"E","áºº":"E","Äš":"E","È„":"E","È†":"E","áº¸":"E","á»†":"E","È¨":"E","á¸œ":"E","Ä˜":"E","á¸˜":"E","á¸š":"E","Æ":"E","ÆŽ":"E","â’»":"F","ï¼¦":"F","á¸ž":"F","Æ‘":"F","ê»":"F","â’¼":"G","ï¼§":"G","Ç´":"G","Äœ":"G","á¸ ":"G","Äž":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ“":"G","êž ":"G","ê½":"G","ê¾":"G","â’½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","Èž":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","êž":"H","â’¾":"I","ï¼©":"I","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»ˆ":"I","Ç":"I","Èˆ":"I","ÈŠ":"I","á»Š":"I","Ä®":"I","á¸¬":"I","Æ—":"I","â’¿":"J","ï¼ª":"J","Ä´":"J","Éˆ":"J","â“€":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ˜":"K","â±©":"K","ê€":"K","ê‚":"K","ê„":"K","êž¢":"K","â“":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","êˆ":"L","ê†":"L","êž€":"L","Ç‡":"LJ","Çˆ":"Lj","â“‚":"M","ï¼­":"M","á¸¾":"M","á¹€":"M","á¹‚":"M","â±®":"M","Æœ":"M","â“ƒ":"N","ï¼®":"N","Ç¸":"N","Åƒ":"N","Ã‘":"N","á¹„":"N","Å‡":"N","á¹†":"N","Å…":"N","á¹Š":"N","á¹ˆ":"N","È ":"N","Æ":"N","êž":"N","êž¤":"N","ÇŠ":"NJ","Ç‹":"Nj","â“„":"O","ï¼¯":"O","Ã’":"O","Ã“":"O","Ã”":"O","á»’":"O","á»":"O","á»–":"O","á»”":"O","Ã•":"O","á¹Œ":"O","È¬":"O","á¹Ž":"O","ÅŒ":"O","á¹":"O","á¹’":"O","ÅŽ":"O","È®":"O","È°":"O","Ã–":"O","Èª":"O","á»Ž":"O","Å":"O","Ç‘":"O","ÈŒ":"O","ÈŽ":"O","Æ ":"O","á»œ":"O","á»š":"O","á» ":"O","á»ž":"O","á»¢":"O","á»Œ":"O","á»˜":"O","Çª":"O","Ç¬":"O","Ã˜":"O","Ç¾":"O","Æ†":"O","ÆŸ":"O","êŠ":"O","êŒ":"O","Æ¢":"OI","êŽ":"OO","È¢":"OU","â“…":"P","ï¼°":"P","á¹”":"P","á¹–":"P","Æ¤":"P","â±£":"P","ê":"P","ê’":"P","ê”":"P","â“†":"Q","ï¼±":"Q","ê–":"Q","ê˜":"Q","ÉŠ":"Q","â“‡":"R","ï¼²":"R","Å”":"R","á¹˜":"R","Å˜":"R","È":"R","È’":"R","á¹š":"R","á¹œ":"R","Å–":"R","á¹ž":"R","ÉŒ":"R","â±¤":"R","êš":"R","êž¦":"R","êž‚":"R","â“ˆ":"S","ï¼³":"S","áºž":"S","Åš":"S","á¹¤":"S","Åœ":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È˜":"S","Åž":"S","â±¾":"S","êž¨":"S","êž„":"S","â“‰":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","Èš":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","êž†":"T","êœ¨":"TZ","â“Š":"U","ï¼µ":"U","Ã™":"U","Ãš":"U","Ã›":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ãœ":"U","Ç›":"U","Ç—":"U","Ç•":"U","Ç™":"U","á»¦":"U","Å®":"U","Å°":"U","Ç“":"U","È”":"U","È–":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É„":"U","â“‹":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","êž":"V","É…":"V","ê ":"VY","â“Œ":"W","ï¼·":"W","áº€":"W","áº‚":"W","Å´":"W","áº†":"W","áº„":"W","áºˆ":"W","â±²":"W","â“":"X","ï¼¸":"X","áºŠ":"X","áºŒ":"X","â“Ž":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áºŽ":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","ÉŽ":"Y","á»¾":"Y","â“":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº’":"Z","áº”":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â“":"a","ï½":"a","áºš":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Äƒ":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","ÇŸ":"a","áº£":"a","Ã¥":"a","Ç»":"a","ÇŽ":"a","È":"a","Èƒ":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä…":"a","â±¥":"a","É":"a","êœ³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êœµ":"ao","êœ·":"au","êœ¹":"av","êœ»":"av","êœ½":"ay","â“‘":"b","ï½‚":"b","á¸ƒ":"b","á¸…":"b","á¸‡":"b","Æ€":"b","Æƒ":"b","É“":"b","â“’":"c","ï½ƒ":"c","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","Ã§":"c","á¸‰":"c","Æˆ":"c","È¼":"c","êœ¿":"c","â†„":"c","â““":"d","ï½„":"d","á¸‹":"d","Ä":"d","á¸":"d","á¸‘":"d","á¸“":"d","á¸":"d","Ä‘":"d","ÆŒ":"d","É–":"d","É—":"d","êº":"d","Ç³":"dz","Ç†":"dz","â“”":"e","ï½…":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»…":"e","á»ƒ":"e","áº½":"e","Ä“":"e","á¸•":"e","á¸—":"e","Ä•":"e","Ä—":"e","Ã«":"e","áº»":"e","Ä›":"e","È…":"e","È‡":"e","áº¹":"e","á»‡":"e","È©":"e","á¸":"e","Ä™":"e","á¸™":"e","á¸›":"e","É‡":"e","É›":"e","Ç":"e","â“•":"f","ï½†":"f","á¸Ÿ":"f","Æ’":"f","ê¼":"f","â“–":"g","ï½‡":"g","Çµ":"g","Ä":"g","á¸¡":"g","ÄŸ":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","êž¡":"g","áµ¹":"g","ê¿":"g","â“—":"h","ï½ˆ":"h","Ä¥":"h","á¸£":"h","á¸§":"h","ÈŸ":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº–":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ•":"hv","â“˜":"i","ï½‰":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»‰":"i","Ç":"i","È‰":"i","È‹":"i","á»‹":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â“™":"j","ï½Š":"j","Äµ":"j","Ç°":"j","É‰":"j","â“š":"k","ï½‹":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ™":"k","â±ª":"k","ê":"k","êƒ":"k","ê…":"k","êž£":"k","â“›":"l","ï½Œ":"l","Å€":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å‚":"l","Æš":"l","É«":"l","â±¡":"l","ê‰":"l","êž":"l","ê‡":"l","Ç‰":"lj","â“œ":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹ƒ":"m","É±":"m","É¯":"m","â“":"n","ï½Ž":"n","Ç¹":"n","Å„":"n","Ã±":"n","á¹…":"n","Åˆ":"n","á¹‡":"n","Å†":"n","á¹‹":"n","á¹‰":"n","Æž":"n","É²":"n","Å‰":"n","êž‘":"n","êž¥":"n","ÇŒ":"nj","â“ž":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»“":"o","á»‘":"o","á»—":"o","á»•":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹‘":"o","á¹“":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å‘":"o","Ç’":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»›":"o","á»¡":"o","á»Ÿ":"o","á»£":"o","á»":"o","á»™":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É”":"o","ê‹":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â“Ÿ":"p","ï½":"p","á¹•":"p","á¹—":"p","Æ¥":"p","áµ½":"p","ê‘":"p","ê“":"p","ê•":"p","â“ ":"q","ï½‘":"q","É‹":"q","ê—":"q","ê™":"q","â“¡":"r","ï½’":"r","Å•":"r","á¹™":"r","Å™":"r","È‘":"r","È“":"r","á¹›":"r","á¹":"r","Å—":"r","á¹Ÿ":"r","É":"r","É½":"r","ê›":"r","êž§":"r","êžƒ":"r","â“¢":"s","ï½“":"s","ÃŸ":"s","Å›":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È™":"s","ÅŸ":"s","È¿":"s","êž©":"s","êž…":"s","áº›":"s","â“£":"t","ï½”":"t","á¹«":"t","áº—":"t","Å¥":"t","á¹­":"t","È›":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Êˆ":"t","â±¦":"t","êž‡":"t","êœ©":"tz","â“¤":"u","ï½•":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Çœ":"u","Ç˜":"u","Ç–":"u","Çš":"u","á»§":"u","Å¯":"u","Å±":"u","Ç”":"u","È•":"u","È—":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê‰":"u","â“¥":"v","ï½–":"v","á¹½":"v","á¹¿":"v","Ê‹":"v","êŸ":"v","ÊŒ":"v","ê¡":"vy","â“¦":"w","ï½—":"w","áº":"w","áºƒ":"w","Åµ":"w","áº‡":"w","áº…":"w","áº˜":"w","áº‰":"w","â±³":"w","â“§":"x","ï½˜":"x","áº‹":"x","áº":"x","â“¨":"y","ï½™":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº™":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â“©":"z","ï½š":"z","Åº":"z","áº‘":"z","Å¼":"z","Å¾":"z","áº“":"z","áº•":"z","Æ¶":"z","È¥":"z","É€":"z","â±¬":"z","ê£":"z","Î†":"Î‘","Îˆ":"Î•","Î‰":"Î—","ÎŠ":"Î™","Îª":"Î™","ÎŒ":"ÎŸ","ÎŽ":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","ÏŠ":"Î¹","Î":"Î¹","ÏŒ":"Î¿","Ï":"Ï…","Ï‹":"Ï…","Î°":"Ï…","Ï‰":"Ï‰","Ï‚":"Ïƒ"}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+(null!=i.id?"-"+i.id.toString():"-"+n.generateChars(4))},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=[],r=this;this.$element.find(":selected").each(function(){var n=i(this),u=r.item(n);t.push(u)});n(t)},r.prototype.select=function(n){var t=this,r;if(n.selected=!0,i(n.element).is("option"))return n.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(r){var f=[],u,e;for(n=[n],n.push.apply(n,r),u=0;u<n.length;u++)e=n[u].id,-1===i.inArray(e,f)&&f.push(e);t.$element.val(f);t.$element.trigger("change")}):(r=n.id,this.$element.val(r),this.$element.trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple"))return n.selected=!1,i(n.element).is("option")?(n.element.selected=!1,void this.$element.trigger("change")):void this.current(function(r){for(var e,u=[],f=0;f<r.length;f++)e=r[f].id,e!==n.id&&-1===i.inArray(e,u)&&u.push(e);t.$element.val(u);t.$element.trigger("change")})},r.prototype.bind=function(n){var t=this;this.container=n;n.on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},r.prototype.query=function(n,t){var r=[],u=this,f=this.$element.children();f.each(function(){var t=i(this),e,f;(t.is("option")||t.is("optgroup"))&&(e=u.item(t),f=u.matches(n,e),null!==f&&r.push(f))});t({results:r})},r.prototype.addOptions=function(n){t.appendMany(this.$element,n)},r.prototype.option=function(n){var t,u,r;return n.children?(t=document.createElement("optgroup"),t.label=n.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=n.text:t.innerText=n.text),n.id&&(t.value=n.id),n.disabled&&(t.disabled=!0),n.selected&&(t.selected=!0),n.title&&(t.title=n.title),u=i(t),r=this._normalizeItem(n),r.element=t,i.data(t,"data",r),u},r.prototype.item=function(n){var t={},e,o;if(t=i.data(n[0],"data"),null!=t)return t;if(n.is("option"))t={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if(n.is("optgroup")){t={text:n.prop("label"),children:[],title:n.prop("title")};for(var u=n.children("option"),f=[],r=0;r<u.length;r++)e=i(u[r]),o=this.item(e),f.push(o);t.children=f}return t=this._normalizeItem(t),t.element=n[0],i.data(n[0],"data",t),t},r.prototype._normalizeItem=function(n){i.isPlainObject(n)||(n={id:n,text:n});n=i.extend({},{text:""},n);return null!=n.id&&(n.id=n.id.toString()),null!=n.text&&(n.text=n.text.toString()),null==n._resultId&&n.id&&null!=this.container&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){var i=this.options.get("matcher");return i(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){var i=t.get("data")||[];r.__super__.constructor.call(this,n,t);this.addOptions(this.convertToOptions(i))}return t.Extend(r,n),r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});0===t.length&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function l(n){return function(){return i(this).val()==n.id}}for(var r,f,c,a=this,e=this.$element.find("option"),v=e.map(function(){return a.item(i(this)).id}).get(),o=[],u=0;u<n.length;u++)if(r=this._normalizeItem(n[u]),i.inArray(r.id,v)>=0){var s=e.filter(l(r)),h=this.item(s),y=(i.extend(!0,{},h,r),this.option(h));s.replaceWith(y)}else f=this.option(r),r.children&&(c=this.convertToOptions(r.children),t.appendMany(f,c)),o.push(f);return o},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(t,i){this.ajaxOptions=this._applyDefaults(i.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);n.__super__.constructor.call(this,t,i)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return{q:n.term}},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var f=r.transport(r,function(r){var f=u.processResults(r,n);u.options.get("debug")&&window.console&&console.error&&(f&&f.results&&i.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(f)},function(){});u._request=f}var u=this,r;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url(n));"function"==typeof r.data&&(r.data=r.data(n));this.ajaxOptions.delay&&""!==n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(t,i,r){var f=r.get("tags"),e=r.get("createTag"),u;if(void 0!==e&&(this.createTag=e),t.call(this,i,r),n.isArray(f))for(u=0;u<f.length;u++){var o=f[u],s=this._normalizeItem(o),h=this.option(s);this.$element.append(h)}}return t.prototype.query=function(n,t,i){function u(n,f){for(var s,c,e=n.results,o=0;o<e.length;o++){var h=e[o],l=null!=h.children&&!u({results:h.children},!0),a=h.text===t.term;if(a||l)return f?!1:(n.data=e,void i(n))}if(f)return!0;s=r.createTag(t);null!=s&&(c=r.option(s),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,s));n.results=e;i(n)}var r=this;return this._removeOldTags(),null==t.term||null!=t.page?void n.call(this,t,i):void n.call(this,t,u)},t.prototype.createTag=function(t,i){var r=n.trim(i.term);return""===r?null:{id:r,text:r}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){var t=(this._lastTag,this.$element.find("option[data-select2-tag]"));t.each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(n,t,i){function u(n){f.select(n)}var f=this,r;t.term=t.term||"";r=this.tokenizer(t,this.options,u);r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),t.term=r.term);n.call(this,t,i)},t.prototype.tokenizer=function(t,i,r,u){for(var o,s=r.get("tokenSeparators")||[],f=i.term,e=0,h=this.createTag||function(n){return{id:n.term,text:n.term}};e<f.length;)if(o=f[e],-1!==n.inArray(o,s)){var c=f.substr(0,e),l=n.extend({},i,{term:c}),a=h(l);u(a);f=f.substr(e+1)||"";e=0}else e++;return{term:f}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){var r=this;this.current(function(u){var f=null!=u?u.length:0;return r.maximumSelectionLength>0&&f>=r.maximumSelectionLength?void r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):void n.call(r,t,i)})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus();window.setTimeout(function(){u.$search.focus()},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("")});i.on("results:all",function(n){if(null==n.query.term||""===n.query.term){var t=u.showSearch(n);t?u.$searchContainer.removeClass("select2-search--hide"):u.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;i>=0;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);i.on("query",function(n){u.lastParams=n;u.loading=!0});i.on("query:append",function(n){u.lastParams=n;u.loading=!0});this.$results.on("scroll",function(){var r=n.contains(document.documentElement,u.$loadingMore[0]),t,i;!u.loading&&r&&(t=u.$results.offset().top+u.$results.outerHeight(!1),i=u.$loadingMore.offset().top+u.$loadingMore.outerHeight(!1),t+50>=i&&u.loadMore())})},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="option load-more" role="treeitem"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(n,t,i){this.$dropdownParent=i.get("dropdownParent")||document.body;n.call(this,t,i)}return i.prototype.bind=function(n,t,i){var r=this,u=!1;n.call(this,t,i);t.on("open",function(){r._showDropdown();r._attachPositioningHandler(t);u||(u=!0,t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()}),t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()}))});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var r=this,u="scroll.select2."+i.id,e="resize.select2."+i.id,o="orientationchange.select2."+i.id,f=this.$container.parents().filter(t.hasScroll);f.each(function(){n(this).data("select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});f.on(u,function(){var t=n(this).data("select2-scroll-position");n(this).scrollTop(t.y)});n(window).on(u+" "+e+" "+o,function(){r._positionDropdown();r._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var r="scroll.select2."+i.id,u="resize.select2."+i.id,f="orientationchange.select2."+i.id,e=this.$container.parents().filter(t.hasScroll);e.off(r);n(window).off(r+" "+u+" "+f)},i.prototype._positionDropdown=function(){var f=n(window),u=this.$dropdown.hasClass("select2-dropdown--above"),l=this.$dropdown.hasClass("select2-dropdown--below"),t=null,i=(this.$container.position(),this.$container.offset()),r;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var e={height:this.$dropdown.outerHeight(!1)},o={top:f.scrollTop(),bottom:f.scrollTop()+f.height()},s=o.top<i.top-e.height,h=o.bottom>i.bottom+e.height,c={left:i.left,top:r.bottom};u||l||(t="below");h||!s||u?!s&&h&&u&&(t="below"):t="above";("above"==t||u&&"below"!==t)&&(c.top=r.top-e.height);null!=t&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+t),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+t));this.$dropdownContainer.css(c)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}function t(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);n.call(this,t,i,r)}return t.prototype.showSearch=function(t,i){return n(i.data.results)<this.minimumResultsForSearch?!1:t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(){r._handleSelectOnClose()})},n.prototype._handleSelectOnClose=function(){var n=this.getHighlightedResults();n.length<1||this.trigger("select",{data:n.data("data")})},n}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close")},n}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(n){var t=n.minimum-n.input.length;return"Please enter "+t+" or more characters"},loadingMore:function(){return"Loading more resultsâ€¦"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return 1!=n.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searchingâ€¦"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}st.prototype.apply=function(l){var vt,yt,pt,wt,bt,kt,dt,ct,lt,st,ot,ht,gt,at;if((l=n.extend({},this.defaults,l),null==l.dataAdapter)&&((l.dataAdapter=null!=l.ajax?y:null!=l.data?v:a,l.minimumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,b)),l.maximumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,k)),l.maximumSelectionLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,d)),l.tags&&(l.dataAdapter=h.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=h.Decorate(l.dataAdapter,w)),null!=l.query)&&(vt=t(l.amdBase+"compat/query"),l.dataAdapter=h.Decorate(l.dataAdapter,vt)),null!=l.initSelection&&(yt=t(l.amdBase+"compat/initSelection"),l.dataAdapter=h.Decorate(l.dataAdapter,yt))),(null==l.resultsAdapter&&(l.resultsAdapter=i,null!=l.ajax&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,it)),null!=l.placeholder&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,tt)),l.selectOnClose&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,ft))),null==l.dropdownAdapter)&&(l.multiple?l.dropdownAdapter=g:(pt=h.Decorate(g,nt),l.dropdownAdapter=pt),(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,ut)),l.closeOnSelect&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,et)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass)&&(wt=t(l.amdBase+"compat/dropdownCss"),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,wt)),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,rt)),null==l.selectionAdapter&&((l.selectionAdapter=l.multiple?u:r,null!=l.placeholder&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,e)),l.multiple&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,o)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass)&&(bt=t(l.amdBase+"compat/containerCss"),l.selectionAdapter=h.Decorate(l.selectionAdapter,bt)),l.selectionAdapter=h.Decorate(l.selectionAdapter,s)),"string"==typeof l.language&&(l.language.indexOf("-")>0?(kt=l.language.split("-"),dt=kt[0],l.language=[l.language,dt]):l.language=[l.language]),n.isArray(l.language)){for(ct=new c,l.language.push("en"),lt=l.language,st=0;st<lt.length;st++){ot=lt[st];ht={};try{ht=c.loadPath(ot)}catch(ni){try{ot=this.defaults.amdLanguageBase+ot;ht=c.loadPath(ot)}catch(ti){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+ot+'" could not be automatically loaded. A fallback will be used instead.');continue}}ct.extend(ht)}l.translations=ct}else gt=c.loadPath(this.defaults.amdLanguageBase+"en"),at=new c(l.language),at.extend(gt),l.translations=at;return l};st.prototype.reset=function(){function i(n){function t(n){return l[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function t(r,u){var f,e,o,s,h,c;if(""===n.trim(r.term))return u;if(u.children&&u.children.length>0){for(f=n.extend(!0,{},u),e=u.children.length-1;e>=0;e--)o=u.children[e],s=t(r,o),null==s&&f.children.splice(e,1);return f.children.length>0?f:t(r,f)}return h=i(u.text).toUpperCase(),c=i(r.term).toUpperCase(),h.indexOf(c)>-1?u:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:ot,matcher:t,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}};st.prototype.set=function(t,i){var f=n.camelCase(t),r={},u;r[f]=i;u=h._convertData(r);n.extend(this.defaults,u)};return new st}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,t,i,r){function u(t,u){if(this.options=t,null!=u&&this.fromElement(u),this.options=i.apply(this.options),u&&u.is("input")){var f=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,f)}}return u.prototype.fromElement=function(n){var e=["select2"],f,u,i;null==this.options.multiple&&(this.options.multiple=n.prop("multiple"));null==this.options.disabled&&(this.options.disabled=n.prop("disabled"));null==this.options.language&&(n.prop("lang")?this.options.language=n.prop("lang").toLowerCase():n.closest("[lang]").prop("lang")&&(this.options.language=n.closest("[lang]").prop("lang")));null==this.options.dir&&(this.options.dir=n.prop("dir")?n.prop("dir"):n.closest("[dir]").prop("dir")?n.closest("[dir]").prop("dir"):"ltr");n.prop("disabled",this.options.disabled);n.prop("multiple",this.options.multiple);n.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.data("data",n.data("select2Tags")),n.data("tags",!0));n.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),n.attr("ajax--url",n.data("ajaxUrl")),n.data("ajax--url",n.data("ajaxUrl")));f={};f=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&n[0].dataset?t.extend(!0,{},n[0].dataset,n.data()):n.data();u=t.extend(!0,{},f);u=r._convertData(u);for(i in u)t.inArray(i,e)>-1||(t.isPlainObject(this.options[i])?t.extend(this.options[i],u[i]):this.options[i]=u[i]);return this},u.prototype.get=function(n){return this.options[n]},u.prototype.set=function(n,t){this.options[n]=t},u}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,i){var f,e,r,o,s,h,c;null!=n.data("select2")&&n.data("select2").destroy();this.$element=n;this.id=this._generateId(n);i=i||{};this.options=new t(i,n);u.__super__.constructor.call(this);f=n.attr("tabindex")||0;n.data("old-tabindex",f);n.attr("tabindex","-1");e=this.options.get("dataAdapter");this.dataAdapter=new e(n,this.options);r=this.render();this._placeContainer(r);o=this.options.get("selectionAdapter");this.selection=new o(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);s=this.options.get("dropdownAdapter");this.dropdown=new s(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);h=this.options.get("resultsAdapter");this.results=new h(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);c=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){c.trigger("selection:update",{data:n})});n.addClass("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){var t="";return t=null!=n.attr("id")?n.attr("id"):null!=n.attr("name")?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4),t="select2-"+t},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var r,u,f,s,i;if("resolve"==t)return r=this._resolveWidth(n,"style"),null!=r?r:this._resolveWidth(n,"element");if("element"==t)return u=n.outerWidth(!1),0>=u?"auto":u+"px";if("style"==t){if(f=n.attr("style"),"string"!=typeof f)return null;for(var o=f.split(";"),e=0,h=o.length;h>e;e+=1)if(s=o[e].replace(/\s/g,""),i=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return null}return t},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this,r;this.$element.on("change.select2",function(){t.dataAdapter.current(function(n){t.trigger("selection:update",{data:n})})});this._sync=i.bind(this._syncAttributes,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=r?(this._observer=new r(function(i){n.each(i,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var t=this,i=["toggle"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("*",function(r,u){-1===n.inArray(r,i)&&t.trigger(r,u)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")});this.on("close",function(){n.$container.removeClass("select2-container--open")});this.on("enable",function(){n.$container.removeClass("select2-container--disabled")});this.on("disable",function(){n.$container.addClass("select2-container--disabled")});this.on("focus",function(){n.$container.addClass("select2-container--focus")});this.on("blur",function(){n.$container.removeClass("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open");this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ENTER?(n.trigger("results:select"),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle"),t.preventDefault()):i===r.UP?(n.trigger("results:previous"),t.preventDefault()):i===r.DOWN?(n.trigger("results:next"),t.preventDefault()):(i===r.ESC||i===r.TAB)&&(n.close(),t.preventDefault()):(i===r.ENTER||i===r.SPACE||(i===r.DOWN||i===r.UP)&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"},e,i;if(n in f&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented))return void(t.prevented=!0);r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},u.prototype.close=function(){this.isOpen()&&this.trigger("close")},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');(null==n||0===n.length)&&(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var i=t[0];n.isArray(i)&&(i=n.map(i,function(n){return n.toString()}));this.$element.val(i).trigger("change")},u.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync);null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1);this._sync=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},u}),t.define("select2/compat/utils",["jquery"],function(n){function t(t,i,r){var u,f,e=[];u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&e.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(f=r(this),null!=f&&e.push(f))}));t.attr("class",e.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("containerCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptContainerCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("containerCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("dropdownCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptDropdownCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("dropdownCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/initSelection",["jquery"],function(n){function t(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2");this.initSelection=i.get("initSelection");this._isInitialized=!1;n.call(this,t,i)}return t.prototype.current=function(t,i){var r=this;return this._isInitialized?void t.call(this,i):void this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0;n.isArray(t)||(t=[t]);i(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(n){function t(n,t,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";"hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.");n.call(this,t,i)}return t.prototype.current=function(t,i){function f(t,i){var r=[];return t.selected||-1!==n.inArray(t.id,i)?(t.selected=!0,r.push(t)):t.selected=!1,t.children&&r.push.apply(r,f(t.children,i)),r}for(var e,r=[],u=0;u<this._currentData.length;u++)e=this._currentData[u],r.push.apply(r,f(e,this.$element.val().split(this._valueSeparator)));i(r)},t.prototype.select=function(t,i){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+i.id;this.$element.val(r);this.$element.trigger("change")}else this.current(function(t){n.map(t,function(n){n.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},t.prototype.unselect=function(n,t){var i=this;t.selected=!1;this.current(function(n){for(var f,u=[],r=0;r<n.length;r++)f=n[r],t.id!=f.id&&u.push(f.id);i.$element.val(u.join(i._valueSeparator));i.$element.trigger("change")})},t.prototype.query=function(n,t,i){for(var e,f,u=[],r=0;r<this._currentData.length;r++)e=this._currentData[r],f=this.matches(t,e),null!==f&&u.push(f);i({results:u})},t.prototype.addOptions=function(t,i){var r=n.map(i,function(t){return n.data(t[0],"data")});this._currentData.push.apply(this._currentData,r)},t}),t.define("select2/compat/matcher",["jquery"],function(n){function t(t){function i(i,r){var u=n.extend(!0,{},r),f,e,o;if(null==i.term||""===n.trim(i.term))return u;if(r.children){for(f=r.children.length-1;f>=0;f--)e=r.children[f],o=t(i.term,e.text,e),o||u.children.splice(f,1);if(u.children.length>0)return u}return t(i.term,r.text,r)?u:null}return i}return t}),t.define("select2/compat/query",[],function(){function n(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.callback=i;var r=this.options.get("query");r.call(null,t)},n}),t.define("select2/dropdown/attachContainer",[],function(){function n(n,t,i){n.call(this,t,i)}return n.prototype.position=function(n,t,i){var r=i.find(".dropdown-wrapper");r.append(t);t.addClass("select2-dropdown--below");i.addClass("select2-container--below")},n}),t.define("select2/dropdown/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$dropdown.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("select2/selection/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$selection.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(n,t,i,r){if(t("jquery.mousewheel"),null==n.fn.select2){var u=["open","close","destroy"];n.fn.select2=function(t){var r,f,e;if(t=t||{},"object"==typeof t)return this.each(function(){var r=n.extend({},t,!0);new i(n(this),r)}),this;if("string"==typeof t)return r=this.data("select2"),null==r&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),f=Array.prototype.slice.call(arguments,1),e=r[t](f),n.inArray(t,u)>-1?this:e;throw new Error("Invalid arguments for Select2: "+t);}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=r),i}),function(i){"function"==typeof t.define&&t.define.amd?t.define("jquery.mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(n)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=-1*u.detail),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=-1*e,e=0),l=0===e?s:e,"deltaY"in u&&(e=-1*u.deltaY,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=-1*s)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||t>a)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i})